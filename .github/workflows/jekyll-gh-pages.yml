<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4-3-3</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body { 
      font-family: "Cairo", "Tajawal", system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Arabic", sans-serif;
      background: #145A32;
      color: white;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
    }
    
    .back-btn {
      background: orange;
    }

    /* Screens */
    .screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      transition: all 0.8s ease;
    }

    #game-screen {
      z-index: 1;
    }

    #loading-screen {
      background-image: url('https://i.postimg.cc/prJVmLWy/Gemini-Generated-Image-em56nxem56nxem56.png');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 3;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 0;
    }

    #loading-screen.active {
      display: flex;
      opacity: 1;
    }

    #store-screen {
      background-image: url('https://i.postimg.cc/XJXDZHnK/Gemini-Generated-Image-wg2uzcwg2uzcwg2u.png');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 2;
      opacity: 0;
      transform: translateY(100%);
    }

    #store-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

    #players-screen {
      background: linear-gradient(to right,gold, black);
      z-index: 4;
      opacity: 0;
      transform: translateY(100%);
      padding: 20px;
      overflow-y: auto;
    }

    #players-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

    #formation-screen {
      background-image: url('https://uploads.onecompiler.io/43wsb3ewn/4465gnchn/WhatsApp%20Image%202025-12-11%20at%206.51.25%20PM.jpeg');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 5;
      opacity: 0;
      transform: translateY(100%);
      padding: 20px;
      overflow-y: auto;
    }

    #formation-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

    #match-screen {
      background-image: url('https://i.postimg.cc/Y9DXXPgS/Chat-GPT-Image-Dec-11-2025-10-57-51-PM.jpg');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 6;
      opacity: 0;
      transform: translateY(100%);
      padding: 20px;
      overflow-y: auto;
    }

    #match-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* ÿ¥ÿßÿ¥ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÑÿßÿπÿ® */
    #player-guess-screen {
      background-image: url('https://i.postimg.cc/vmcJJHCv/Gemini-Generated-Image-c0zwdc0zwdc0zwdc.png');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 7;
      opacity: 0;
      transform: translateY(100%);
      padding: 20px;
      overflow-y: auto;
    }

    #player-guess-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* ÿ¥ÿßÿ¥ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÜÿßÿØŸä */
    #club-guess-screen {
      background-image: url('https://i.postimg.cc/vmcJJHCv/Gemini-Generated-Image-c0zwdc0zwdc0zwdc.png');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 8;
      opacity: 0;
      transform: translateY(100%);
      padding: 20px;
      overflow-y: auto;
    }

    #club-guess-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* ÿ¥ÿßÿ¥ÿ© ÿßŸÑŸÉŸàŸäÿ≤ ÿßŸÑÿ¨ÿØŸäÿØÿ© */
    #quiz-screen {
      background-image: url('https://i.postimg.cc/vmcJJHCv/Gemini-Generated-Image-c0zwdc0zwdc0zwdc.png');
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 9;
      opacity: 0;
      transform: translateY(100%);
      padding: 20px;
      overflow-y: auto;
    }

    #quiz-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ© */
    #stats-screen {
      background: linear-gradient(to right,blue,purple);
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 10;
      opacity: 0;
      transform: translateY(100%);
      padding: 20px;
      overflow-y: auto;
    }

    #stats-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* ÿ¥ÿßÿ¥ÿ© Speed Challenge ÿßŸÑÿ¨ÿØŸäÿØÿ© */
    #speed-challenge-screen {
      background-image: url('https://image2url.com/r2/bucket2/images/1766787855532-1e2f43f4-2837-4e71-9e10-3ffee9347ea5.jpeg');
     background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      z-index: 11;
      opacity: 0;
      transform: translateY(100%);
      padding: 20px;
      overflow-y: auto;
    }

    #speed-challenge-screen.active {
      opacity: 1;
      transform: translateY(0);
    }

  .game-title {
  position: absolute;
  top: -30px;
  left: 150px;
  text-align: center;
  background: transparent;
  border-radius: 50px;
  width: 100px;

  /* Add these: */
  display: inline-block;           /* Make it inline-block to accept transform */
  transition: transform 0.3s ease; /* Smooth transform transition */
}

    
    .game-title img {
  pointer-events: none;
}

    .game-title:hover {
      transform: scale(1.1);
    }
    /* Game Screen Styles */
    .field {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .defense {
      position: absolute;
      bottom: 4%;
      left: -12%;
      display: flex;
      margin-left: 5px; 
  margin-right: 5px;
  padding: 5px;
    }

    .midfield {
      position: absolute;
      top: 36%;
      right: -43%;
      display: flex;
      gap: 200px;
    }

    .t4keela {
      position: absolute;
      top: 39%;
      left: 10%;
    }

    .music-btn {
      position: absolute;
      top: 10%;
      left: 1%;
    }

    .players-btn {
      position: absolute;
      top: 4.5%;
      right: 1%;
    }

    .match {
      position: absolute;
      top: 35%;
      left: 60%;
    }

    .half-line {
      position: absolute;
      left: 0;
      top: 50%;
      width: 101%;
      height: 2px;
      background: white;
      transform: translateY(-50%);
    }

    .center-circle {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 120px;
      height: 120px;
      border: 2px solid white;
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    .penalty-box {
      position: absolute;
      width: 200px;
      height: 80px;
      border: 2px solid white;
      left: 50%;
      transform: translateX(-50%);
    }

    .penalty-box.top { top: 0; }
    .penalty-box.bottom { bottom: 0; }

    .goal {
      position: absolute;
      font-size: 50px;
      left: 50%;
      transform: translateX(-50%);
    }

    .goal.top { top: -100px; }
    .goal.bottom { bottom: -40px; }

    button {
      border: none;
      border-radius: 6px;
      background: transparent;
      cursor: pointer;
      font-weight: bold;
      display: inline-block;
      width: auto;
      height: auto;
      transition: transform 0.3s ease;
    }

    button:hover {
      transform: scale(1.1);
    }

    .outline-down, .outline-up, .outline-right {
      position: absolute;
      background: white;
    }

    .outline-down {
      left: 0;
      top: 100%;
      width: 100%;
      height: 2px;
      transform: translateY(-50%);
    }

    .outline-up {
      left: 0;
      top: 0%;
      width: 100%;
      height: 2px;
      transform: translateY(-50%);
    }

    .outline-right {
      left: 100%;
      top: 0%;
      width: 2px;
      height: 100%;
      transform: translateX(50%);
    }

    .story {
      position: absolute;
      top: 85%;
      left: 32%;
    }

    /* Store Button at Bottom Left */
    .store-btn {
      position: absolute;
      bottom: 50%;
      left: 38%;
      z-index: 10;
    }

    /* Loading Screen Styles */
    .loading-container {
      text-align: center;
      width: 80%;
      max-width: 400px;
      background-image: url('https://uploads.onecompiler.io/43wsb3ewn/43zx6jsw8/ChatGPT%20Image%20Oct%2017,%202025,%2009_41_50%20PM.png');
      height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background-color: #333;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: -300px;
    }

    .progress {
      height: 100%;
      background: linear-gradient(to right, #FFD700, #FFA500);
      width: 0%;
      transition: width 0.3s ease;
      bottom: 0px;
    }

    /* Store Screen Styles */
    .store-container {
      width: 100%;
      height: 100%;
      padding: 20px;
      display: flex;
      flex-direction: column;
      color: gold;
    }

    .store-header {
      text-align: center;
      top: -7px; 
      font-size: 3rem;
      text-shadow: 0 0 10px rgba(0,0,0,0.7);
      background: linear-gradient(to bottom, red, white,black);
      width: 100%;
      border-radius: 10px;
      padding: 10px;
    }

    .search-wrapper {
      width: 100%;
      margin-bottom: 15px;
      text-align: center;
    }

    #player-search {
      width: 50%;
      max-width: 300px;
      padding: 8px 12px;
      border: black;
      border-radius: 6px;
      background: white;
      color: black;
      font-size: 0.5rem;
    }

    #player-search::placeholder {
      color: black;
    }

    .marketplace {
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 30px;
      margin-bottom: 30px;
      margin-right: 220px;
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      scrollbar-width: thin;
      scrollbar-color: rgba(255, 255, 255, 0.5) rgba(0, 0, 0, 0.2);
      width: 50%;
    }

    .marketplace::-webkit-scrollbar {
      width: 8px;
    }

    .items-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }

    .item-card {
      background: linear-gradient(to bottom, red, blue);
      border-radius: 10px;
      padding: 12px;
      text-align: center;
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
    }

    .item-card.sold-out {
      pointer-events: none;
    }

    .sold-out-badge {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      color: red;
      padding: 10px 20px;
      border-radius: 5px;
      font-weight: bold;
      font-size: 1.2rem;
      z-index: 10;
    }

    .item-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
      background: linear-gradient(to bottom, yellow, turquoise);
    }

    .item-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 8px;
      border: 0px transparent;
    }

    .item-name {
      font-size: 1rem;
      margin-bottom: 8px;
      font-weight: bold;
      color: white;
      text-shadow: 
        0 0 5px white,
        0 0 10px white,
        0 0 20px white,
        0 0 40px white,
        0 0 80px white;
      background: linear-gradient(to left, white, black);
      border-radius: 20px;
    }
    
    .item-position {
      color: #00A2FF;
      font-size: 20px;
    }

    .item-rating {
      font-size: 0.9rem;
      margin-bottom: 8px;
      color: #FFD700;
    }

    .item-price {
      font-size: 20px;
      font-weight: bold;
      color: #4CAF50;
      margin-bottom: 12px;
      text-shadow: 
        0 0 2px gold,
        0 0 2px gold,
        0 0 3px green,
        0 0 5px green,
        0 0 25px white;
    }

    .buy-button {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
      width: 100%;
      transition: background 2s;
      margin-top: 5px;
    }

    .buy-button:disabled {
      color: white;
      background-color: red;
      cursor: not-allowed;
    }

    .buy-button:hover:not(:disabled) {
      background: linear-gradient(to right, 66BB6A, #388E3C);
    }

    /* Players Screen Styles */
    .players-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
    }

    .players-header {
      text-align: center;
      margin-bottom: 20px;
      font-size: 2.5rem;
      color: gold;
      text-shadow: 0 0 10px rgba(0,0,0,0.7);
      background: linear-gradient(to bottom, red, white,black);
      width: 100%;
      border-radius: 10px;
    }

    .my-players-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      width: 100%;
      margin-bottom: 30px;
    }

    .my-player-card {
      background: linear-gradient(to bottom,red, blue);
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      position: relative;
    }

    .my-player-image {
      width: 100%;
      height: 200px;
      object-fit: contain;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .my-player-name {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 5px;
      color: white;
    }

    .my-player-details {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .my-player-position, .my-player-number {
      background: rgba(0,0,0,0.3);
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.9rem;
    }

    .position-selector, .number-input {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: white;
      color: black;
    }

    .update-player-btn {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
    }

    .update-player-btn:hover {
      background: linear-gradient(to right, #66BB6A, #388E3C);
    }

    /* Back Button with Image */
    .back-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: linear-gradient(to bottom,red,white,black);
      border-radius: 50px;
      border: none;
      padding: 0;
      cursor: pointer;
      font-weight: bold;
      z-index: 1000;
    }

    .back-btn img {
      width: 80px;
      height: 80px;
      transition: transform 0.3s;
    }

    .back-btn:hover img {
      transform: scale(1.1);
    }

    /* Wallet */
    .wallet-top {
      position: fixed;
      top: 5px;
      right: 20px;
      background: none;
      padding: 10px 15px;
      border-radius: 10px;
      font-size: 1.2rem;
      z-index: 1000;
      text-align: center;
      text-shadow: 
        0 0 5px gold,
        0 0 5px gold,
        0 0 5px green,
        0 0 10px green,
        0 0 50px white;
    }

    .wallet-top span {
      color: #FFD700;
      font-weight: bold;
    }

    #coins {
      width: 30px;
      vertical-align: middle;
      margin-left: 0px;
    }

    /* New CSS for flying coin animation */
    .flying-coin {
      position: fixed;
      width: 35px; /* Made bigger */
      height: 35px; /* Made bigger */
      object-fit: contain;
      z-index: 9999; /* Ensure it's on top of other elements */
      transition: all 0.8s ease-out; /* Smooth transition for movement and fade */
      pointer-events: none; /* Allow clicks to pass through */
      opacity: 1;
    }

    /* Club Image */
    .club-image {
      width: 50px;
      height: 50px;
      object-fit: contain;
      margin-top: 5px;
    }

    /* Formation Screen Styles */
    .formation-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

    .formation-header {
      text-align: center;
      margin-bottom: 20px;
      font-size: 2.5rem;
      color: gold;
      text-shadow: 0 0 10px rgba(0,0,0,0.7);
    }

    .formation-controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      width: 100%;
    }

    .formation-selector {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 10px;
      border: 2px solid gold;
    }

    .formation-selector h3 {
      margin-bottom: 10px;
      color: #FFD700;
    }

    .formation-buttons {
      display: flex;
      gap: 10px;
    }

    .formation-btn {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .formation-btn.active {
      background: linear-gradient(to right, #2196F3, #0D47A1);
    }

    .formation-btn:hover:not(.active) {
      background: linear-gradient(to right, #66BB6A, #388E3C);
    }

    .formation-summary {
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 10px;
      border: 2px solid gold;
      text-align: center;
      font-size: 20px;
    }

    .formation-summary h3 {
      margin-bottom: 10px;
      color: #FFD700;
    }

    .formation-layout {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      width: 100%;
    }

    .formation-field {
      flex: 1;
      min-width: 100px;
      background: #1e7a3c; /* ÿÆŸÑŸÅŸäÿ© ÿÆÿ∂ÿ±ÿßÿ° ŸÑŸÑŸÖŸÑÿπÿ® */
      border-radius: 15px;
      padding: 20px;
      position: relative;
      height: 600px;
      border: 3px solid gold;
      overflow: hidden;
    }

    /* ÿπŸÜÿßÿµÿ± ÿßŸÑŸÖŸÑÿπÿ® ÿØÿßÿÆŸÑ formation-field */
    .formation-half-line {
      position: absolute;
      left: 0;
      top: 50%;
      width: 101%;
      height: 2px;
      background: white;
      transform: translateY(-50%);
    }

    .formation-center-circle {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 80px;
      height: 80px;
      border: 2px solid white;
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    .formation-penalty-box {
      position: absolute;
      width: 150px;
      height: 60px;
      border: 2px solid white;
      left: 50%;
      transform: translateX(-50%);
    }

    .formation-penalty-box.top { top: 0; }
    .formation-penalty-box.bottom { bottom: 0; }

    .formation-goal {
      position: absolute;
      font-size: 50px;
      left: 50%;
      transform: translateX(-50%);
    }

    .formation-goal.top { top: -20px; }
    .formation-goal.bottom { bottom: -30px; }

    .formation-positions {
      display: flex;
      flex-direction: column;
      height: 100%;
      justify-content: space-between;
      z-index: 2;
      position: relative;
    }

    .formation-row {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin: 10px 0;
    }

    .position-slot {
      width: 50px;
      height: 50px;
      border: 2px dashed #FFD700;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(255, 215, 0, 0.1);
      transition: all 0.3s ease;
      position: relative;
    }

    .position-slot.highlight {
      background: rgba(255, 215, 0, 0.3);
      border: 2px solid #FFD700;
    }

    .position-slot.filled {
      background: rgba(20, 90, 50, 0.8);
      border: 2px solid #4CAF50;
    }

    .position-slot.invalid {
      border: 2px dashed #ff0000;
      background: rgba(255, 0, 0, 0.1);
    }

    .player-in-slot {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(to bottom, #1e5631, #2d7a46);
      cursor: move;
    }
    
    .position-label {
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.000000000000000000000000000000000001rem;
      color: #FFD700;
      background: transparent;
      padding: 2px 5px;
      border-radius: 3px;
    }

    .player-in-slot img {
      width: 50px;
      height: 50px;
      object-fit: cover;
    }

    .player-in-slot .player-name{
      font-size: 0.8rem;
      text-align: center;
      margin-top: 2px;
      color: white;
    }

    .available-players {
      flex: 1;
      min-width: 300px;
      background: #0d3b1e;
      border-radius: 15px;
      padding: 20px;
      border: 3px solid gold;
      max-height: 600px;
      overflow-y: auto;
    }

    .available-players-header {
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.5rem;
      color: #FFD700;
    }

    .available-players-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
    }

    .available-player {
      background: linear-gradient(to bottom, red, blue);
      border-radius: 10px;
      padding: 10px;
      text-align: center;
      cursor: move;
      transition: transform 0.3s;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .available-player:hover {
      background: linear-gradient(to bottom, yellow, turquoise);
      transform: scale(1.05);
    }

    .available-player img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 50%;
      margin-bottom: 5px;
    }

    .available-player .player-name {
      font-size: 0.8rem;
      color: white;
    }

    .formation-actions {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      width: 100%;
    }

    .save-formation, .reset-formation, .evaluate-formation {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
    }

    .reset-formation {
      background: linear-gradient(to right, #FF5722, #E64A19);
    }

    .evaluate-formation {
      background: linear-gradient(to right, #2196F3, #0D47A1);
    }

    .save-formation:hover {
      background: linear-gradient(to right, #66BB6A, #388E3C);
    }

    .reset-formation:hover {
      background: linear-gradient(to right, #FF7043, #F4511E);
    }

    .evaluate-formation:hover {
      background: linear-gradient(to right, #42A5F5, #1565C0);
    }

    /* Rating Result Styles */
    .rating-result {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      border: 3px solid gold;
      border-radius: 15px;
      padding: 30px;
      text-align: center;
      z-index: 1000;
      width: 80%;
      max-width: 500px;
      animation: fadeIn 0.5s;
    }

    .rating-header {
      font-size: 2rem;
      color: gold;
      margin-bottom: 20px;
    }

    .rating-score {
      font-size: 3rem;
      font-weight: bold;
      margin: 20px 0;
      color: #4CAF50;
      text-shadow: 0 0 10px rgba(76, 175, 80, 0.7);
    }

    .rating-details {
      text-align: right;
      margin: 15px 0;
    }

    .rating-details p {
      margin: 8px 0;
      font-size: 1.1rem;
    }

    .close-rating {
      background: linear-gradient(to right, #FF5722, #E64A19);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 20px;
    }

    .close-rating:hover {
      background: linear-gradient(to right, #FF7043, #F4511E);
    }

    /* Formation Customization Styles */
    .formation-customization {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 10px;
      border: 2px solid gold;
      margin-bottom: 20px;
      width: 100%;
      max-width: 500px;
    }

    .formation-customization h3 {
      margin-bottom: 15px;
      color: #FFD700;
    }

    .customization-inputs {
      display: flex;
      gap: 15px;
      width: 100%;
      flex-wrap: wrap;
      justify-content: center;
    }

    .customization-input {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 45%;
      min-width: 200px;
    }

    .customization-input label {
      margin-bottom: 5px;
      color: #FFD700;
    }

    .customization-input input {
      width: 100%;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: white;
      color: black;
    }

    .formation-preview {
      margin-top: 15px;
      text-align: center;
    }

    .formation-preview-img {
      max-width: 150px;
      max-height: 150px;
      border-radius: 10px;
      border: 2px solid gold;
      margin-top: 10px;
    }

    /* File Input Styling */
    .file-input-wrapper {
      position: relative;
      width: 100%;
    }

    .file-input-wrapper input[type="file"] {
      width: 100%;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: white;
      color: black;
    }

    /* Kit Color Preview */
    .kit-color-preview {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid white;
      margin-top: 10px;
      display: inline-block;
    }

    .color-input-wrapper {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }

    /* Match Screen Styles */
    .match-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      height: 100%;
      padding: 20px;
    }

    .match-header {
      text-align: center;
      margin-bottom: 20px;
      font-size: 2.5rem;
      color: gold;
      text-shadow: 0 0 10px rgba(0,0,0,0.7);
    }

    .match-controls {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: 20px;
    }

    .team-selector {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 45%;
    }

    .team-logo {
      width: 100px;
      height: 100px;
      object-fit: contain;
      margin-bottom: 10px;
      border: 2px solid gold;
      border-radius: 10px;
      background: white;
    }

    .team-name {
      text-align: center;
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .team-list {
      width: 100%;
      max-height: 200px;
      overflow-y: auto;
      background: rgba(0,0,0,0.3);
      border-radius: 10px;
      padding: 10px;
    }

    .team-item {
      padding: 8px;
      margin: 5px 0;
      background: rgba(255,255,255,0.1);
      border-radius: 5px;
      cursor: pointer;
      text-align: center;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .team-item:hover, .team-item.selected {
      background: rgba(255,215,0,0.3);
    }

    .team-logo-small {
      width: 30px;
      height: 30px;
      object-fit: contain;
    }

    .vs-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 10%;
    }

    .vs {
      font-size: 1.5rem;
      font-weight: bold;
      color: gold;
    }

    .start-match-btn {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.2rem;
      margin-top: 20px;
    }

    .start-match-btn:hover {
      background: linear-gradient(to right, #66BB6A, #388E3C);
    }

    .start-match-btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
    }

    .match-game-container {
      position: fixed;
      top: 0;
      left: -65px;
      width: 100vw;
      height: 100vh;
      background: transparent;
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .match-canvas-container {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 0;
      overflow: visible;
      position: relative;
    }

    .match-canvas {
      padding-top: 200px;
      width: 100vw;
      height: 70vh;
      display: block;
    }

    .match-hud {
      display: flex;
      justify-content: space-between;
      width: 100%;
      max-width: 600px;
      margin-top: 20px;
      padding: 10px;
      background: rgba(0,0,0,0.5);
      border-radius: 10px;
    }

    .match-score {
      font-size: 2rem;
      font-weight: bold;
      color: white;
    }

    .match-time {
      font-size: 1.5rem;
      color: white;
    }

    .match-result {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      z-index: 10;
      display: none;
    }

    .match-result.show {
      display: block;
    }

    .match-result h2 {
      margin-bottom: 15px;
      color: gold;
    }

    .match-reward {
      font-size: 1.5rem;
      margin: 15px 0;
      color: #4CAF50;
    }

    /* Player Guess Game Styles */
    .player-guess-container, .club-guess-container, .quiz-container, .stats-container, .speed-challenge-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      height: 100%;
      padding: 20px;
    }

    .player-guess-header, .club-guess-header, .stats-header, .speed-challenge-header {
      text-align: center;
      margin-bottom: 20px;
      font-size: 2.5rem;
      color: gold;
      background: white;
      border-radius: 40px;
      width: 300px;
      height: 300px;
      border: solid gold;
    }

    .speed-challenge-header {
      width: auto;
      height: auto;
      padding: 20px 40px;
      background: linear-gradient(to bottom, red, white, black);
      color: gold;
      font-size: 3rem;
      text-shadow: 0 0 10px rgba(0,0,0,0.7);
    }

    .game-info {
      display: flex;
      justify-content: space-between;
      width: 100%;
      max-width: 800px;
      margin-bottom: 20px;
      background:transparent;
      padding: 15px;
      border-radius: 10px;
      border: transparent;
    }

    .info-item {
      width: 0px;
    }

    .info-label {
      width: 0px;
      font-size: 1rem;
      color: #FFD700;
      margin-bottom: 5px;
    }

    .info-value {
      width: 0px;
      font-size: 1.5rem;
      font-weight: bold;
      color: white;
    }

    .player-image-container, .club-logo-container {
      top: 50%;
      margin: 20px 0;
      width: 300px;
      height: 300px;
      position: absolute;
    }

    .player-image, .club-logo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 15px;
      background: black;
    }

    .blur-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backdrop-filter: blur(20px);
      border-radius: 15px;
      transition: backdrop-filter 0.5s ease;
    }

    .blur-overlay.revealed {
      backdrop-filter: blur(0px);
    }

    .hints-container {
      width: 100%;
      max-width: 800px;
      margin-bottom: 30px;
      background: rgba(0,0,0,0.3);
      padding: 20px;
      border-radius: 10px;
      border: 2px solid gold;
    }

    .hints-header {
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.5rem;
      color: #FFD700;
    }

    .hints-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .hint-item {
      background: rgba(255,215,0,0.1);
      padding: 10px;
      border-radius: 5px;
      border-right: 4px solid gold;
    }

    .hint-text {
      font-size: 1.1rem;
    }

    .hint-number {
      color: gold;
      font-weight: bold;
      margin-left: 5px;
    }

    .choices-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      width: 100%;
      max-width: 800px;
      margin-bottom: 30px;
    }

    .choice-btn {
      background: linear-gradient(to right, #2196F3, #0D47A1);
      color: white;
      border: none;
      padding: 15px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .choice-btn:hover {
      background: linear-gradient(to right, #42A5F5, #1565C0);
      transform: translateY(-3px);
    }

    .choice-btn.correct {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      animation: pulse 1s infinite;
    }

    .choice-btn.wrong {
      background: linear-gradient(to right, #f44336, #c62828);
    }

    .choice-btn.disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .game-result {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.9);
      border: 3px solid gold;
      border-radius: 15px;
      padding: 30px;
      text-align: center;
      z-index: 1000;
      width: 80%;
      max-width: 500px;
      display: none;
    }

    .game-result.show {
      display: block;
      animation: fadeIn 0.5s;
    }

    .result-title {
      font-size: 2rem;
      color: gold;
      margin-bottom: 20px;
    }

    .result-message {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: white;
    }

    .result-reward {
      font-size: 1.5rem;
      color: #4CAF50;
      margin-bottom: 20px;
    }

    .next-round-btn {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
    }

    .next-round-btn:hover {
      background: linear-gradient(to right, #66BB6A, #388E3C);
    }

    /* Quiz Game Specific Styles */
    .question-container {
      position: absolute;
      top: 5%;
      right: 0%;
      width: 70%;
      max-width: 800px;
      background: white;
      padding: 25px;
      border-radius: 200px;
      border: 2px solid gold;
      margin-bottom: 30px;
      text-align: center;
    }

    .question-text {
      font-size: 1.5rem;
      color: black;
      margin-bottom: 25px;
      line-height: 1.5;
    }

    .quiz-choices-container {
      position: absolute;
      bottom: 20%;
      right: 10%;
      display: flex;
      gap: 15px;
      width: 20%;
      max-width: 800px;
      margin-bottom: 0px;
    }

    .quiz-choice-btn {
      background: linear-gradient(to right, #2196F3, #0D47A1);
      color: white;
      border: none;
      padding: 15px 10px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: all 0.3s ease;
      min-height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .quiz-choice-btn:hover {
      background: linear-gradient(to right, #42A5F5, #1565C0);
      transform: translateY(-3px);
    }

    .quiz-choice-btn.correct {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      animation: pulse 1s infinite;
    }

    .quiz-choice-btn.wrong {
      background: linear-gradient(to right, #f44336, #c62828);
    }

    .quiz-choice-btn.disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }
    
    #next-question-btn {
  position: relative;
  top: 100px; 
}


    /* Statistics Screen Styles */
    .stats-header {
      width: auto;
      height: auto;
      padding: 20px 40px;
      background: linear-gradient(to bottom, red, white, black);
      color: gold;
      font-size: 3rem;
      text-shadow: 0 0 10px rgba(0,0,0,0.7);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      width: 100%;
      max-width: 1200px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(0,0,0,0.9));
      border-radius: 15px;
      padding: 20px;
      border: 3px solid gold;
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }

    .stat-card h3 {
      color: #FFD700;
      font-size: 1.8rem;
      margin-bottom: 20px;
      text-align: center;
      padding-bottom: 10px;
      border-bottom: 2px solid gold;
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      font-size: 1.2rem;
    }

    .stat-item span:first-child {
      color: #ccc;
    }

    .stat-item span:last-child {
      color: #4CAF50;
      font-weight: bold;
      font-size: 1.3rem;
    }

    /* Speed Challenge Styles */
    .speed-challenge-game {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
    }

    .players-area {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: 30px;
    }

    .player-area {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 45%;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      padding: 20px;
      border: 3px solid gold;
    }

    .player-area.active {
      border-color: #4CAF50;
      box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
    }

    .player-area.disabled {
      border-color: #f44336;
      opacity: 0.7;
    }

    .player-button {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: #2196F3;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2rem;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 20px;
      transition: all 0.3s;
      border: 5px solid gold;
    }

    .player-button:hover {
      transform: scale(1.05);
    }

    .player-button.pressed {
      background: #4CAF50;
      transform: scale(0.95);
    }

    .player-button.disabled {
      background: #9E9E9E;
      cursor: not-allowed;
    }

    .player-button img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 50%;
    }

    .arrow-indicator {
      font-size: 3rem;
      color: #FFD700;
      margin: 10px 0;
      animation: bounce 1s infinite;
    }

    .timer-display {
      font-size: 2rem;
      font-weight: bold;
      color: #FFD700;
      margin: 20px 0;
      text-align: center;
    }

    .answer-area {
      width: 100%;
      max-width: 600px;
      margin-bottom: 30px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      padding: 20px;
      border: 3px solid gold;
    }

    .answer-input {
      width: 100%;
      padding: 15px;
      font-size: 1.2rem;
      border-radius: 10px;
      border: 2px solid #ccc;
      background: white;
      color: black;
      text-align: center;
      margin-bottom: 15px;
    }

    .answer-input:disabled {
      background: #f5f5f5;
      cursor: not-allowed;
    }

    .submit-answer-btn {
      background: linear-gradient(to right, #4CAF50, #2E7D32);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.2rem;
      font-weight: bold;
      width: 100%;
    }

    .submit-answer-btn:hover:not(:disabled) {
      background: linear-gradient(to right, #66BB6A, #388E3C);
    }

    .submit-answer-btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
    }

    .question-display {
      width: 100%;
      max-width: 800px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      padding: 25px;
      border: 3px solid gold;
      margin-bottom: 30px;
      text-align: center;
    }

    .question-text-speed {
      font-size: 1.8rem;
      color: white;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .speed-result {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.9);
      border: 3px solid gold;
      border-radius: 15px;
      padding: 30px;
      text-align: center;
      z-index: 1000;
      width: 80%;
      max-width: 500px;
      display: none;
    }

    .speed-result.show {
      display: block;
      animation: fadeIn 0.5s;
    }

    .result-winner {
      font-size: 2.5rem;
      color: #FFD700;
      margin-bottom: 20px;
    }

    .result-details {
      font-size: 1.2rem;
      color: white;
      margin-bottom: 20px;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translate(-50%, -60%); }
      to { opacity: 1; transform: translate(-50%, -50%); }
    }

    @keyframes zoomIn {
      0% { transform: scale(1); }
      100% { transform: scale(20); }
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      .store-header {
        font-size: 2rem;
      }
      
      .items-container {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      
      .item-image {
        height: 150px;
      }
      
      .players-header {
        font-size: 1.8rem;
      }
      
      .my-players-list {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      }
      
      .formation-layout {
        flex-direction: column;
      }
      
      .formation-field, .available-players {
        min-width: 100%;
      }
      
      .formation-actions {
        flex-direction: column;
        align-items: center;
      }
      
      .formation-controls {
        flex-direction: column;
        align-items: center;
      }
      
      .customization-inputs {
        flex-direction: column;
      }
      
      .customization-input {
        width: 100%;
      }
      
      .match-controls {
        flex-direction: column;
        align-items: center;
      }
      
      .team-selector {
        width: 100%;
        margin-bottom: 20px;
      }
      
      .vs-container {
        width: 100%;
        margin: 10px 0;
      }
      
      .choices-container {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .quiz-choices-container {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .player-image-container, .club-logo-container {
        width: 250px;
        height: 250px;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .players-area {
        flex-direction: column;
        gap: 20px;
      }
      
      .player-area {
        width: 100%;
      }
      
      .player-button {
        width: 150px;
        height: 150px;
      }
    }

    @media (max-width: 480px) {
      .choices-container {
        grid-template-columns: 1fr;
      }
      
      .quiz-choices-container {
        grid-template-columns: 1fr;
      }
      
      .player-image-container, .club-logo-container {
        width: 200px;
        height: 200px;
      }
      
      .game-info {
        flex-direction: column;
        gap: 10px;
      }
      
      .stats-header {
        font-size: 2rem;
        padding: 15px 20px;
      }
      
      .speed-challenge-header {
        font-size: 2rem;
        padding: 15px 20px;
      }
      
      .player-button {
        width: 120px;
        height: 120px;
      }
    }
  </style>
</head>
<body>
 <!-- Game Screen -->
  <div id="game-screen" class="screen">
    
      <h1 class="game-title">
        <img src="https://image2url.com/r2/bucket2/images/1766760938325-e11bbdb8-01fc-4573-9355-c6d3d5d400db.png" style="width:100px; height:200px">
      </h1>
      <div class="field">

      <div class="defense">
        <button id="player-guess-btn">
          <img src="https://uploads.onecompiler.io/43wsb3ewn/4465gnchn/ChatGPT_Image_Dec_11__2025__03_05_24_PM-removebg-preview.png" style="width:100px; height:100px;">
        </button>
        <button id="club-guess-btn">
          <img src="https://uploads.onecompiler.io/43wsb3ewn/43xkq59q6/ChatGPT_Image_Sep_23__2025__10_16_56_PM-removebg-preview.png" style="width:100px; height:100px;">
        </button>
        <button id="quiz-btn">
          <img src="https://uploads.onecompiler.io/43wsb3ewn/43xkq59q6/ChatGPT_Image_Sep_23__2025__10_25_45_PM-removebg-preview.png" style="width:100px; height:100px;">
        </button>
        <button id="speed-challenge-btn">
          <img src="https://image2url.com/r2/bucket1/images/1766628602763-0a7beea9-8ef2-4ca0-83a5-87148556889f.png" style="width:150px; height:200px;">
        </button>
      </div>

      <div class="music-btn">
        <button id="stats-button">
          <img src="https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/Untitled_design-removebg-preview.png" style="width:100px; height:100px;">
        </button>
      </div>
      
      <div class="t4keela">
        <button id="formation-button">
          <img src="https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/WhatsApp_Image_2025-09-24_at_7.12.12_PM-removebg-preview.png" style="width:100px; height:100px;">
        </button>
      </div>

      <div class="players-btn">
        <button id="players-button">
          <img src="https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/WhatsApp_Image_2025-09-24_at_7.24.21_PM-removebg-preview.png" style="width:100px; height:100px;">
        </button>
      </div>

      <div class="half-line"></div>
      <div class="center-circle"></div>

      <div class="penalty-box top"></div>
      <div class="penalty-box bottom"></div>

      <div class="goal top">
        <img src="https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/ChatGPT_Image_Sep_24__2025__10_09_09_PM-removebg-preview.png" style="width:90px; height:70px;">
      </div>
      <div class="goal bottom">
        <img src="https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/ChatGPT_Image_Sep_24__2025__10_09_09_PM-removebg-preview.png" style="width:90px; height:70px;">
      </div>

      <div class="match">
        <button id="match-button">
          <img src="https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/WhatsApp_Image_2025-09-24_at_6.44.37_PM-removebg-preview.png" style="width:130px; height:130px;">
        </button>
      </div>

      <div class="outline-down"></div>
      <div class="outline-up"></div>
      <div class="outline-right"></div>

      <!-- Store Button at Bottom Left -->
      <div class="store-btn">
        <button id="store-button">
          <img src="https://uploads.onecompiler.io/43wsb3ewn/43xkq59q6/WhatsApp_Image_2025-09-23_at_9.44.31_PM-removebg-preview.png" style="width:100px; height:100px;">
        </button>
      </div>
    </div>
  </div>
      
       <link rel="icon" href="https://image2url.com/r2/bucket2/images/1766760938325-e11bbdb8-01fc-4573-9355-c6d3d5d400db.png" type="image/png">
      

  <!-- Loading Screen -->
  <div id="loading-screen" class="screen">
      <div class="loading-image" id="loading-image">
        <span></span>
      </div>
      <div class="loading-text"></div>
      <div class="progress-bar">
        <div class="progress" id="progress-bar"></div>
      </div>
    </div>
  </div>

  <!-- Store Screen -->
  <div id="store-screen" class="screen">
    <div class="store-container">
      <h1 class="store-header">ŸÉÿ¥ŸÉ ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥</h1>
      
      <div class="search-wrapper">
        <input type="text" id="player-search" placeholder="ÿ¥ŸàŸÅ ÿπÿßŸäÿ≤ ÿßŸäŸá Ÿäÿß ŸÇŸÑÿ® ÿßÿÆŸàŸÉüòò" />
      </div>

      <div class="marketplace">
        <div id="players-container" class="items-container"></div>
      </div>

      <button class="back-btn" id="back-to-game-from-store">
        <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
      </button>
    </div>
  </div>

  <!-- Players Screen -->
  <div id="players-screen" class="screen">
    <div class="players-container">
      <h1 class="players-header">ŸÑÿßÿπÿ®ŸäŸÜŸä</h1>
      
      <div class="my-players-list" id="my-players-list">
        <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° Ÿáÿ∞Ÿá ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿ®ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑÿ∞ŸäŸÜ ÿßÿ¥ÿ™ÿ±ÿßŸáŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ -->
      </div>
      
      <button class="back-btn" id="back-to-game-from-players">
        <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
      </button>
    </div>
  </div>

  <!-- Formation Screen -->
  <div id="formation-screen" class="screen">
    <div class="formation-container">
      <h1 class="formation-header">ÿßŸÑŸÜÿßÿØŸä</h1>
      
      <!-- ÿ•ÿ∂ÿßŸÅÿ© ŸÇÿ≥ŸÖ ÿ™ÿÆÿµŸäÿµ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© -->
      <div class="formation-customization">
        <h3>ÿ™ÿÆÿµŸäÿµ ÿßŸÑŸÜÿßÿØŸä</h3>
        <div class="customization-inputs">
          <div class="customization-input">
            <label for="formation-name">ÿßÿ≥ŸÖ ÿßŸÑŸÜÿßÿØŸä</label>
            <input type="text" id="formation-name" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©">
          </div>
          <div class="customization-input">
            <label for="formation-image">ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿßÿØŸä</label>
            <div class="file-input-wrapper">
              <input type="file" id="formation-image" accept="image/*">
            </div>
          </div>
          <!-- ÿ•ÿ∂ÿßŸÅÿ© ÿ≠ŸÇŸÑ ÿßÿÆÿ™Ÿäÿßÿ± ŸÑŸàŸÜ ÿßŸÑÿ∑ŸÇŸÖ -->
          <div class="customization-input">
            <label for="kit-color">ŸÑŸàŸÜ ÿßŸÑÿ∑ŸÇŸÖ</label>
            <div class="color-input-wrapper">
              <input type="color" id="kit-color" value="#ffffff">
              <div class="kit-color-preview" id="kit-color-preview" style="background-color: #ffffff"></div>
            </div>
          </div>
        </div>
        <div class="formation-preview">
          <div id="formation-preview-container">
            <img id="formation-preview-img" class="formation-preview-img" src="" alt="ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©">
            <p id="formation-preview-name"></p>
          </div>
        </div>
      </div>
      
      <div class="formation-controls">
        <div class="formation-selector">
          <h3>ÿπÿØÿØ ÿßŸÑŸÖÿØÿßŸÅÿπŸäŸÜ</h3>
          <div class="formation-buttons" id="defenders-buttons">
            <button class="formation-btn" data-count="3">3</button>
            <button class="formation-btn" data-count="4">4</button>
            <button class="formation-btn" data-count="5">5</button>
          </div>
        </div>
        
        <div class="formation-selector">
          <h3>ÿπÿØÿØ ŸÑÿßÿπÿ®Ÿä ÿßŸÑŸàÿ≥ÿ∑</h3>
          <div class="formation-buttons" id="midfielders-buttons">
            <button class="formation-btn" data-count="3">3</button>
            <button class="formation-btn" data-count="4">4</button>
            <button class="formation-btn" data-count="5">5</button>
          </div>
        </div>
        
        <div class="formation-selector">
          <h3>ÿπÿØÿØ ÿßŸÑŸÖŸáÿßÿ¨ŸÖŸäŸÜ</h3>
          <div class="formation-buttons" id="attackers-buttons">
            <button class="formation-btn" data-count="1">1</button>
            <button class="formation-btn" data-count="2">2</button>
            <button class="formation-btn" data-count="3">3</button>
          </div>
        </div>
        
        <div class="formation-summary">
          <h3>ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©</h3>
          <div id="formation-summary-text">4-4-2</div>
          <div id="formation-validation"></div>
        </div>
      </div>
      
      <div class="formation-layout">
        <div class="formation-field">
          <!-- ÿπŸÜÿßÿµÿ± ÿßŸÑŸÖŸÑÿπÿ® -->
          <div class="formation-half-line"></div>
          <div class="formation-center-circle"></div>
          <div class="formation-penalty-box top"></div>
          <div class="formation-penalty-box bottom"></div>
          <div class="formation-goal top">
            <img src="https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/ChatGPT_Image_Sep_24__2025__10_09_09_PM-removebg-preview.png" style="width:70px; height:50px;">
          </div>
          <div class="formation-goal bottom">
            <img src="https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/ChatGPT_Image_Sep_24__2025__10_09_09_PM-removebg-preview.png" style="width:70px; height:50px;">
          </div>
          
          <!-- ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© -->
          <div class="formation-positions" id="formation-positions">
            <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° Ÿáÿ∞ÿß ÿßŸÑÿ¨ÿ≤ÿ° ÿ®ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© -->
          </div>
        </div>
        
        <div class="available-players">
          <h2 class="available-players-header">ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑŸÖÿ™ÿßÿ≠ŸäŸÜ</h2>
          <div class="available-players-list" id="available-players">
            <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° Ÿáÿ∞Ÿá ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿ®ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑŸÖÿ™ÿßÿ≠ŸäŸÜ -->
          </div>
        </div>
      </div>
      
      <div class="formation-actions">
        <button class="save-formation" id="save-formation">ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©</button>
        <button class="evaluate-formation" id="evaluate-formation">ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©</button>
        <button class="reset-formation" id="reset-formation">ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ</button>
        <button class="back-btn" id="back-to-game-from-formation">
          <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
        </button>
      </div>
    </div>
  </div>

  <!-- Match Screen -->
  <div id="match-screen" class="screen">
    <div class="match-container">
      <h1 class="match-header">ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©</h1>
      
      <div class="match-controls">
        <div class="team-selector">
          <div class="team-name">ŸÜÿßÿØŸäŸÉ</div>
          <img id="user-club-logo" class="team-logo" src="" alt="ÿ¥ÿπÿßÿ± ŸÜÿßÿØŸäŸÉ">
          <div id="user-club-name" class="team-name">ŸÜÿßÿØŸäŸÉ</div>
        </div>
        
        <div class="vs-container">
          <div class="vs">VS</div>
        </div>
        
        <div class="team-selector">
          <div class="team-name">ÿßŸÑÿÆÿµŸÖ</div>
          <img id="opponent-logo" class="team-logo" src="" alt="ÿ¥ÿπÿßÿ± ÿßŸÑÿÆÿµŸÖ">
          <div id="opponent-name" class="team-name">ÿßÿÆÿ™ÿ± ÿßŸÑÿÆÿµŸÖ</div>
          <div class="team-list" id="opponent-list">
            <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° Ÿáÿ∞Ÿá ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿ®ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑŸÖÿµÿ±Ÿäÿ© -->
          </div>
        </div>
      </div>
      
      <button class="start-match-btn" id="start-match-btn" disabled>ÿ®ÿØÿ° ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©</button>
      
      <div class="match-game-container" id="match-game-container" style="display: none;">
        <div class="match-canvas-container">
          <canvas id="match-canvas" class="match-canvas"></canvas>
          <div class="match-result" id="match-result">
            <h2 id="match-result-title">ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©</h2>
            <div id="match-result-score" class="match-score">0 - 0</div>
            <div id="match-reward" class="match-reward">+0 ÿπŸÖŸÑÿ©</div>
            <button class="back-btn" id="back-to-main-menu-from-match">
              <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
            </button>
          </div>
        </div>
        
        <div class="match-hud">
          <div class="match-score" id="live-score">0 - 0</div>
          <div class="match-time" id="live-time">01:30</div>
        </div>
        
        <div class="match-controls" style="margin-top: 20px;">
          <button id="match-restart">ÿ•ÿπÿßÿØÿ©</button>
          <button id="match-pause">ÿ•ŸäŸÇÿßŸÅ</button>
          <button class="back-btn" id="back-to-main-menu-from-game">
            <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
          </button>
        </div>
      </div>
      
      <!-- ÿ≤ÿ± ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© -->
      <button class="back-btn" id="back-to-main-menu">
        <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
      </button>
    </div>
  </div>

  <!-- Player Guess Game Screen -->
  <div id="player-guess-screen" class="screen">
    <div class="player-guess-container">
      <h1 class="player-guess-header">ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ™ÿ≠ÿØÿßŸÉ ÿ™ÿπÿ±ŸÅ ÿßŸÑŸÑÿßÿπÿ®</h1>
      
      <div class="game-info">
        <div class="info-item">
          <div class="info-label">ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©</div>
          <div class="info-value" id="attempts-left">2</div>
        </div>
        <div class="info-item">
          <div class="info-label">ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©</div>
          <div class="info-value" id="hints-left">3</div>
        </div>
        <div class="info-item">
          <div class="info-label">ÿßŸÑÿ¨ŸàŸÑÿ©</div>
          <div class="info-value" id="round-number">1</div>
        </div>
        <div class="info-item">
          <div class="info-label">ÿßŸÑŸÜŸÇÿßÿ∑</div>
          <div class="info-value" id="player-guess-score">0</div>
        </div>
      </div>
      
      <div class="player-image-container">
        <img id="mystery-player-image" class="player-image" src="" alt="ÿµŸàÿ±ÿ© ÿßŸÑŸÑÿßÿπÿ®">
        <div class="blur-overlay" id="blur-overlay"></div>
      </div>
      
      <div class="hints-container">
        <h2 class="hints-header">ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ÿπŸÜ ÿßŸÑŸÑÿßÿπÿ®</h2>
        <div class="hints-list" id="hints-list">
          <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ŸáŸÜÿß -->
        </div>
      </div>
      
      <div class="choices-container" id="choices-container">
        <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ŸáŸÜÿß -->
      </div>
      
      <div class="game-buttons">
        <button class="back-btn" id="back-to-game-from-player-guess">
          <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
        </button>
        <button id="next-hint-btn" class="choice-btn" style="background: linear-gradient(to right, #9C27B0, #7B1FA2);">ÿ™ŸÑŸÖŸäÿ≠ ÿ•ÿ∂ÿßŸÅŸä</button>
      </div>
    </div>
    
    <!-- ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑÿ¨ŸàŸÑÿ© -->
    <div class="game-result" id="game-result">
      <h2 class="result-title" id="result-title"></h2>
      <div class="result-message" id="result-message"></div>
      <div class="result-reward" id="result-reward"></div>
      <button class="next-round-btn" id="next-round-btn">ÿßŸÑÿ¨ŸàŸÑÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©</button>
      <button class="back-btn" id="back-to-game-from-player-result" style="margin-top: 10px;">
        <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
      </button>
    </div>
  </div>

  <!-- Club Guess Game Screen -->
  <div id="club-guess-screen" class="screen">
    <div class="club-guess-container">
      <h1 class="club-guess-header">ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ™ÿ≠ÿØÿßŸÉ ÿ™ÿπÿ±ŸÅ ÿßŸÑŸÜÿßÿØŸä</h1>
      
      <div class="game-info">
        <div class="info-item">
          <div class="info-label">ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©</div>
          <div class="info-value" id="club-attempts-left">1</div>
        </div>
        <div class="info-item">
          <div class="info-label">ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©</div>
          <div class="info-value" id="club-hints-left">1</div>
        </div>
        <div class="info-item">
          <div class="info-label">ÿßŸÑÿ¨ŸàŸÑÿ©</div>
          <div class="info-value" id="club-round-number">1</div>
        </div>
        <div class="info-item">
          <div class="info-label">ÿßŸÑŸÜŸÇÿßÿ∑</div>
          <div class="info-value" id="club-guess-score">0</div>
        </div>
      </div>
      
      <div class="club-logo-container">
        <img id="mystery-club-logo" class="club-logo" src="" alt="ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿßÿØŸä">
        <div class="blur-overlay" id="club-blur-overlay"></div>
      </div>
      
      <div class="hints-container">
        <h2 class="hints-header">ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ÿπŸÜ ÿßŸÑŸÜÿßÿØŸä</h2>
        <div class="hints-list" id="club-hints-list">
          <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ŸáŸÜÿß -->
        </div>
      </div>
      
      <div class="choices-container" id="club-choices-container">
        <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ£ŸÜÿØŸäÿ© ŸáŸÜÿß -->
      </div>
      
      <div class="game-buttons">
        <button class="back-btn" id="back-to-game-from-club-guess">
          <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
        </button>
        <button id="club-next-hint-btn" class="choice-btn" style="background: linear-gradient(to right, #9C27B0, #7B1FA2);">ÿ™ŸÑŸÖŸäÿ≠ ÿ•ÿ∂ÿßŸÅŸä</button>
      </div>
    </div>
    
    <!-- ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑÿ¨ŸàŸÑÿ© -->
    <div class="game-result" id="club-game-result">
      <h2 class="result-title" id="club-result-title"></h2>
      <div class="result-message" id="club-result-message"></div>
      <div class="result-reward" id="club-result-reward"></div>
      <button class="next-round-btn" id="club-next-round-btn">ÿßŸÑÿ¨ŸàŸÑÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©</button>
      <button class="back-btn" id="back-to-game-from-club-result" style="margin-top: 10px;">
        <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
      </button>
    </div>
  </div>

  <!-- Quiz Screen -->
  <div id="quiz-screen" class="screen">
    <div class="quiz-container">
      <h1 class="quiz-header"></h1>
      
      <div class="game-info">
        <div class="info-item">
          <div class="info-label"></div>
          <div class="info-value" id="current-question"></div>
        </div>
        <div class="info-item">
          <div class="info-label">ÿßŸÑŸÜŸÇÿßÿ∑</div>
          <div class="info-value" id="quiz-score"></div>
        </div>
        <div class="info-item">
          <div class="info-value" id="quiz-difficulty"></div>
        </div>
      </div>
      
      <div class="question-container">
        <div class="question-text" id="question-text">
          <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿßŸÑÿ≥ÿ§ÿßŸÑ ŸáŸÜÿß -->
        </div>
      </div>
      
      <div class="quiz-choices-container" id="quiz-choices-container">
        <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ŸáŸÜÿß -->
      </div>
      
      <div class="game-buttons">
        <button class="back-btn" id="back-to-game-from-quiz">
          <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
        </button>
        <button id="next-question-btn" class="choice-btn" style="background: linear-gradient(to right, #4CAF50, #2E7D32); display: none;">ÿßŸÑÿ≥ÿ§ÿßŸÑ ÿßŸÑÿ™ÿßŸÑŸä</button>
      </div>
    </div>
    
    <!-- ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑÿ¨ŸàŸÑÿ© -->
    <div class="game-result" id="quiz-game-result">
      <h2 class="result-title" id="quiz-result-title"></h2>
      <div class="result-message" id="quiz-result-message"></div>
      <div class="result-reward" id="quiz-result-reward"></div>
      <button class="next-round-btn" id="next-quiz-round-btn">ÿ¨ŸàŸÑÿ© ÿ¨ÿØŸäÿØÿ©</button>
      <button class="back-btn" id="back-to-game-from-quiz-result" style="margin-top: 10px;">
        <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
      </button>
    </div>
  </div>

  <!-- Stats Screen -->
  <div id="stats-screen" class="screen">
    <div class="stats-container">
      <h1 class="stats-header">ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ŸÉ</h1>
      
      <div class="stats-grid">
        <div class="stat-card">
          <h3>üéÆ ÿßŸÑÿ£ŸÑÿπÿßÿ®</h3>
          <div class="stat-item">
            <span>ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÑÿßÿπÿ®: </span>
            <span id="player-guess-played">0 ÿ¨ŸàŸÑÿ©</span>
          </div>
          <div class="stat-item">
            <span>ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÜÿßÿØŸä: </span>
            <span id="club-guess-played">0 ÿ¨ŸàŸÑÿ©</span>
          </div>
          <div class="stat-item">
            <span>ÿßŸÑŸÉŸàŸäÿ≤: </span>
            <span id="quiz-played">0 ÿ¨ŸàŸÑÿ©</span>
          </div>
          <div class="stat-item">
            <span>Speed Challenge: </span>
            <span id="speed-challenge-played">0 ÿ¨ŸàŸÑÿ©</span>
          </div>
        </div>

        <div class="stat-card">
          <h3>üèÜ ÿßŸÑÿßŸÜÿ™ÿµÿßÿ±ÿßÿ™</h3>
          <div class="stat-item">
            <span>ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÑÿßÿπÿ®: </span>
            <span id="player-guess-wins">0 ŸÖÿ±Ÿëÿ©</span>
          </div>
          <div class="stat-item">
            <span>ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÜÿßÿØŸä: </span>
            <span id="club-guess-wins">0 ŸÖÿ±Ÿëÿ©</span>
          </div>
          <div class="stat-item">
            <span>ÿßŸÑŸÉŸàŸäÿ≤: </span>
            <span id="quiz-wins">0 ŸÖÿ±Ÿëÿ©</span>
          </div>
          <div class="stat-item">
            <span>Speed Challenge: </span>
            <span id="speed-challenge-wins">0 ŸÖÿ±Ÿëÿ©</span>
          </div>
        </div>

        <div class="stat-card">
          <h3>üí∞ ÿßŸÑŸÖÿßŸÑŸäÿ©</h3>
          <div class="stat-item">
            <span>ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿπŸÖŸÑÿßÿ™: </span>
            <span id="total-coins">1000</span>
          </div>
          <div class="stat-item">
            <span>ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ: </span>
            <span id="players-bought">0 ŸÑÿßÿπÿ®</span>
          </div>
          <div class="stat-item">
            <span>ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑŸÖŸÑÿπŸàÿ®ÿ©: </span>
            <span id="matches-played">0 ŸÖÿ®ÿßÿ±ÿßÿ©</span>
          </div>
        </div>
      </div>

      <button class="back-btn" id="back-to-game-from-stats">
        <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
      </button>
    </div>
  </div>

  <!-- Speed Challenge Screen -->
  <div id="speed-challenge-screen" class="screen">
    <div class="speed-challenge-container">
      <h1 class="speed-challenge-header">ÿ®ÿ±ŸÜÿßŸÖÿ¨ 3-3-4</h1>
      
      <div class="speed-challenge-game">
        <div class="question-display">
          <div class="question-text-speed" id="speed-question-text">
            <!-- ÿ≥Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ≥ÿ§ÿßŸÑ ŸáŸÜÿß -->
          </div>
        </div>
        
        <div class="players-area">
          <!-- ÿßŸÑŸÑÿßÿπÿ® 1 -->
          <div class="player-area" id="player1-area">
            <div class="player-button" id="player1-button">
              <img src="https://image2url.com/r2/bucket1/images/1766630741241-c2c7031f-0205-4c12-aadc-540b465d1cc4.png" alt="ŸÑÿßÿπÿ® 1">
            </div>
            <div class="arrow-indicator" id="player1-arrow" style="display: none;">‚¨ÖÔ∏è</div>
            <h3>ŸÑÿßÿπÿ® 1</h3>
          </div>
          
          <!-- ÿßŸÑŸÑÿßÿπÿ® 2 -->
          <div class="player-area" id="player2-area">
            <div class="player-button" id="player2-button">
              <img src="https://image2url.com/r2/bucket1/images/1766630741241-c2c7031f-0205-4c12-aadc-540b465d1cc4.png" alt="ŸÑÿßÿπÿ® 2">
            </div>
            <div class="arrow-indicator" id="player2-arrow" style="display: none;">‚û°Ô∏è</div>
            <h3>ŸÑÿßÿπÿ® 2</h3>
          </div>
        </div>
        
        <div class="timer-display" id="timer-display">
          ‚è±Ô∏è 30 ÿ´ÿßŸÜŸäÿ©
        </div>
        
        <div class="answer-area">
          <input type="text" class="answer-input" id="answer-input" placeholder="ÿßŸÉÿ™ÿ® ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ ŸáŸÜÿß..." disabled>
          <button class="submit-answer-btn" id="submit-answer-btn" disabled>ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©</button>
        </div>
        
        <div class="game-buttons">
          <button class="back-btn" id="back-to-game-from-speed-challenge">
            <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
          </button>
          <button id="next-round-speed-btn" class="choice-btn" style="background: linear-gradient(to right, #9C27B0, #7B1FA2); display: none;">ÿ¨ŸàŸÑÿ© ÿ¨ÿØŸäÿØÿ©</button>
        </div>
      </div>
    </div>
    
    <!-- ŸÜÿ™Ÿäÿ¨ÿ© Speed Challenge -->
    <div class="speed-result" id="speed-result">
      <h2 class="result-title" id="speed-result-title"></h2>
      <div class="result-winner" id="speed-result-winner"></div>
      <div class="result-details" id="speed-result-details"></div>
      <button class="next-round-btn" id="next-speed-round-btn">ÿ¨ŸàŸÑÿ© ÿ¨ÿØŸäÿØÿ©</button>
      <button class="back-btn" id="back-to-game-from-speed-result" style="margin-top: 10px;">
        <img src="https://i.postimg.cc/VNXkxRxb/download-11-removebg-preview-(1).png" alt="ÿπŸàÿØÿ©">
      </button>
    </div>
  </div>

  <!-- Rating Result Modal -->
  <div id="rating-result" class="rating-result" style="display: none;">
    <h2 class="rating-header">ŸÜÿ™Ÿäÿ¨ÿ© ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©</h2>
    <div class="rating-score" id="formation-rating">0/100</div>
    <div class="rating-details" id="rating-details">
      <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ° ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ŸáŸÜÿß -->
    </div>
    <button class="close-rating" id="close-rating">ÿ•ÿ∫ŸÑÿßŸÇ</button>
  </div>

  <!-- Wallet -->
  <div class="wallet-top">
    <h3><span id="wallet-amount">400</span><img id="coins" src="https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/WhatsApp_Image_2025-10-01_at_9.23.02_PM-removebg-preview.png" style="width:25px"></h3>
  </div>
<link rel="icon" href="https://image2url.com/r2/bucket2/images/1766760938325-e11bbdb8-01fc-4573-9355-c6d3d5d400db.png" type="image/png">

  <script>
    // Player data with names, images, ratings, and prices
    const players = [
      {
        id: 1,
        name: "ÿßŸÑÿ¥ŸÜÿßŸàŸä",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xvpcpbz/download-removebg-preview.png",
        rating: 95,
        price: 475,
        club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "GK"
      },
      {
        id: 2,
        name: "ÿ≤Ÿäÿ≤Ÿà",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__1_-removebg-preview.png",
        rating: 98,
        price: 490,
        club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "RW"
      },
      {
        id: 3,
        name: "ÿ®ŸÜÿ™ÿßŸäŸÉ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__3_-removebg-preview.png",
        rating: 95,
        price: 475,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "LB"
      },
      {
        id: 4,
        name: "ŸÅÿ™Ÿàÿ≠",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__4_-removebg-preview.png",
        rating: 90,
        price: 450,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "LB"
      },
      {
        id: 5,
        name: "ÿπŸàÿßÿØ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__5_-removebg-preview.png",
        rating: 90,
        price: 450,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "GK"
      },
      {
        id: 6,
        name: "ÿÆŸàÿßŸÜ ÿßŸÑŸÅŸäŸÜÿß",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/images-removebg-preview.png",
        rating: 99,
        price: 450,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "RW"
      },
      {
        id: 7,
        name: "ÿ™ÿ±Ÿäÿ≤Ÿäÿ¨ŸäŸá",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__7_-removebg-preview.png",
        rating: 95,
        price:475,
        club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "LW"
      },
      {
        id: 8,
        name: "ŸÖŸáÿØŸä ÿ≥ŸÑŸäŸÖÿßŸÜ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/images__1_-removebg-preview.png",
        rating: 85,
        price:425,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "GK"
      },
      {
        id: 9,
        name: "ŸÖÿ≠ŸÖÿØ ÿµÿ®ÿ≠Ÿä",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__8_-removebg-preview.png",
        rating: 93,
        price: 465,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "GK"
      },
      {
        id: 10,
        name: "ŸÖÿ≠ŸÖŸàÿØ ÿßŸÑÿ¥ŸÜÿßŸàŸä",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__9_-removebg-preview.png",
        rating: 78,
        price: 390,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "GK"
      },
      {
        id: 11,
        name: "ÿπŸÖÿ± ÿ¨ÿßÿ®ÿ±",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__10_-removebg-preview.png",
        rating: 94,
        price: 470,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "RB"
      },
      {
        id: 12,
        name: "ÿßŸÑŸàŸÜÿ¥",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__15_-removebg-preview.png",
        rating: 85,
        price: 425,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "CB"
      },
      {
        id: 13,
        name: "ŸÖÿ≠ŸÖÿØ ÿ•ÿ≥ŸÖÿßÿπŸäŸÑ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__12_-removebg-preview.png",
        rating: 75,
        price: 375,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "CB"
      },
      {
        id: 14,
        name: "ÿ≠ÿ≥ÿßŸÖ ÿπÿ®ÿØ ÿßŸÑŸÖÿ¨ŸäÿØ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__13_-removebg-preview.png",
        rating: 95,
        price: 475,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "CB"
      },
      {
        id: 15,
        name: "ÿ£ÿ≠ŸÖÿØ ÿ≠ÿ≥ÿßŸÖ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__14_-removebg-preview.png",
        rating: 80,
        price: 400,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "LB"
      },
      {
        id: 16,
        name: "ÿµŸÑÿßÿ≠ ÿßŸÑÿØŸäŸÜ ŸÖÿµÿØŸÇ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/images__2_-removebg-preview.png",
        rating: 93,
        price: 465,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "CB"
      },
      {
        id: 17,
        name: "ÿπÿ®ÿØ ÿßŸÑŸÑŸá ÿßŸÑÿ≥ÿπŸäÿØ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__17_-removebg-preview.png",
        rating:96,
        price: 480,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "CAM"
      },
      {
        id: 18,
        name: "ÿ¥ŸäŸÉŸà ÿ®ÿßŸÜÿ≤ÿß",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__18_-removebg-preview.png",
        rating: 85,
        price: 425,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "LW"
      },
      {
        id: 19,
        name: "ÿ¢ÿØŸÖ ŸÉÿßŸäÿØ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/images__3_-removebg-preview.png",
        rating: 87,
        price: 435,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "ST"
      },
      {
        id: 20,
        name: "ŸÜÿßÿµÿ± ŸÖŸÜÿ≥Ÿä",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__19_-removebg-preview.png",
        rating: 94,
        price: 475,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "ST"
      },
      {
        id: 21,
        name: "ÿ≥ŸäŸÅ ÿßŸÑÿØŸäŸÜ ÿßŸÑÿ¨ÿ≤Ÿäÿ±Ÿä",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__20_-removebg-preview.png",
        rating: 87,
        price: 435,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "ST"
      },
      {
        id: 22,
        name: "ÿπÿØŸä ÿßŸÑÿØÿ®ÿßÿ∫",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/images__4_-removebg-preview.png",
        rating: 85,
        price: 425,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png"},
        position: "ST"
      },
      {
        id: 23,
        name: "ŸÖÿµÿ∑ŸÅŸâ ÿ¥Ÿàÿ®Ÿäÿ±",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xw2tw6u/download__21_-removebg-preview.png",
        rating: 92,
        price: 460,
        club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "GK"
      },
      {
        id: 24,
        name: "ŸÜŸäÿ™ÿ≥ ÿ¨ÿ±ÿßÿØŸäÿ¥ÿßÿ±",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xy8bqum/download__22_-removebg-preview.png",
        rating: 95,
        price: 475,
        club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "ST"
      },
      {
        id: 25,
        name: "ÿ£ŸÑŸäŸà ÿØŸäÿßŸÜÿ¨",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xy8bqum/images__5_-removebg-preview.png",
        rating: 94,
        price: 470,
        club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "CM"
      },
      {
        id: 26,
        name: "ŸÖÿ≠ŸÖÿØ ÿπŸÑŸä ÿ®ŸÜ ÿ±ŸÖÿ∂ÿßŸÜ",
        image: "https://uploads.onecompiler.io/43wsb3ewn/43xy8bqum/download__23_-removebg-preview.png",
        rating: 94,
        price: 470,
        club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "LM"
      },
      {
        id: 27,
      name: "Ÿäÿßÿ≥ÿ± ÿßÿ®ÿ±ÿßŸáŸäŸÖ",
      image: "https://i.postimg.cc/BbSKk8K8/OIP-removebg-preview.png",
      rating: 92,
      price: 460,
      club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
      position: "CB"
      },
      {
      id: 28,
      name: "ŸÖÿ≠ŸÖÿØ ŸáÿßŸÜŸä",
      image: "https://i.postimg.cc/BZmpssQy/OIP-1-removebg-preview.png",
      rating: 90,
      price: 450,
      club: { image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
      position: "CB"
      },
      {
        id: 29,
        name: "ÿπŸÖÿ± ŸÉŸÖÿßŸÑ",
        image: "https://i.postimg.cc/LsBz3ymY/OIP-2-removebg-preview.png",
        rating: 94,
        price: 470,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "RB"
      },
      {
        id: 30,
        name: "ÿßŸÖÿßŸÖ ÿπÿßÿ¥Ÿàÿ±",
        image: "https://image2url.com/r2/bucket2/images/1766749930532-e4fbc13d-07df-4329-a1fb-1170e0063f1e.png",
        rating: 99,
        price: 495,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "CM"
      },
      {
         id: 31,
        name: "ÿßŸÅÿ¥Ÿá",
        image: "https://image2url.com/r2/bucket2/images/1766751916219-f28b957d-9d5b-4e9f-a0ef-51522da32518.png",
        rating: 90,
        price: 450,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "CM"
      },
      {
         id: 32,
        name: "ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ¥ÿ≠ÿßÿ™",
        image: "https://image2url.com/r2/bucket2/images/1766752458384-b75a0d0b-3122-4f59-8a54-e75732401823.png",
        rating: 94,
        price: 470,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "RW"
      },
      {
         id: 32,
        name: "ÿ∑ÿßŸáÿ± ŸÖÿ≠ŸÖÿØ",
        image: "https://image2url.com/r2/bucket2/images/1766752614300-4b9f43c0-87a2-41a6-bcb4-b52073289200.png",
        rating: 93,
        price: 465,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "LW"
      },
      {
        id: 33,
        name: "ŸÖÿ≠ŸÖÿØ ÿ¥ÿ±ŸäŸÅ",
        image: "https://image2url.com/r2/bucket2/images/1766753035992-716c84ec-8121-4f3b-ae8a-6fad58f58fb6.png",
        rating: 90,
        price: 450,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "ST"
      },
      {
         id: 33,
        name: "ÿßÿ¥ÿ±ŸÅ ÿ®ŸÜÿ¥ÿ±ŸÇŸä",
        image: "https://image2url.com/r2/bucket2/images/1766753618451-e4db57e5-e1ba-4b21-a6d5-9db21e15c1c4.png",
        rating: 94,
        price: 470,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "LW"
      },
      {
        id: 34,
        name: "ÿßÿ¥ÿ±ŸÅ ÿØÿßÿ±Ÿä",
        image: "https://image2url.com/r2/bucket2/images/1766754438652-678dd469-5e76-4117-a3df-0a1d151d9023.png",
        rating: 85,
        price: 425,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "CB"
      },
      {
         id: 34,
        name: "Ÿäÿßÿ≥ŸäŸÜ ŸÖÿ±ÿπŸä",
        image: "https://image2url.com/r2/bucket2/images/1766754012893-ea975be3-e3b7-43a7-809a-3ded76b1e86f.png",
        rating: 87,
        price: 435,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "CB"
      },
      {
         id: 34,
        name: "ÿßÿ≠ŸÖÿØ ÿ±ŸÖÿ∂ÿßŸÜ ÿ®ŸäŸÉŸáÿßŸÖ",
        image: "https://image2url.com/r2/bucket2/images/1766754253762-7899c886-f0c5-44ba-9b24-b1c811a2a635.png",
        rating: 95,
        price: 475,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "CB"
      },
      {
         id: 35,
        name: "ÿßÿ≠ŸÖÿØ ŸÜÿ®ŸäŸÑ ŸÉŸàŸÉÿß",
        image: "https://image2url.com/r2/bucket2/images/1766754593924-1051f976-3a7b-4a39-b62f-1e79236ffd9b.png",
        rating: 89  ,
        price: 445,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "CM"
      },
      {
        id: 36,
        name: "ÿ≠ŸÖÿ≤Ÿá ÿπŸÑÿßÿ°",
        image: "https://image2url.com/r2/bucket2/images/1766755636947-b4dd1a3f-97a3-4a89-bc3e-cd6d54d35a1a.png",
        rating: 78,
        price: 390,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "GK"
      },
      {
        id: 37,
        name: "ŸÖÿµÿ∑ŸÅŸâ ÿßŸÑÿπÿ¥",
        image: "https://image2url.com/r2/bucket2/images/1766755781449-53cf599c-4e0a-4017-a4f5-59a4a17e899f.png",
        rating: 84,
        price: 420,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "CB"
      },
      {
        id: 38,
        name: "ÿ≠ŸÖÿ≤Ÿá ÿπÿ®ÿØÿßŸÑŸÉÿ±ŸäŸÖ",
        image: "https://image2url.com/r2/bucket2/images/1766755673224-f0804619-25d6-4698-ac6c-4e1ad57582e9.png",
        rating: 84,
        price: 420,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png"},
        position: "ST"
      },
      {
       id: 39,
        name: "ŸÖÿ≠ŸÖÿØ ÿßŸÑÿ¥Ÿäÿ®Ÿä",
        image: "https://image2url.com/r2/bucket2/images/1766756029600-0221d495-1d4e-4c88-8a64-f0a028c7f231.png",
        rating: 96,
        price: 480,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/444havbxf/download__35_-removebg-preview%20(1).png"},
        position: "RB"
      },
      {
        id: 40,
        name: "ŸÖÿµÿ∑ŸÅŸâ ŸÅÿ™ÿ≠Ÿä",
        image: "https://image2url.com/r2/bucket2/images/1766756313608-22dde9b6-ef4f-4fe7-a99e-47bd5530b8cc.png",
        rating: 94,
        price: 470,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/444havbxf/download__35_-removebg-preview%20(1).png"},
        position: "CM"
      },
      {
        id: 41,
        name: "ÿ±ŸÖÿ∂ÿßŸÜ ÿµÿ®ÿ≠Ÿä",
        image: "https://image2url.com/r2/bucket2/images/1766756440264-34da6735-f672-4701-8d79-2fd503baf6f6.png",
        rating: 95,
        price: 475,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/444havbxf/download__35_-removebg-preview%20(1).png"},
        position: "LW"
      },
      {
         id: 42,
        name: "ÿßÿ≠ŸÖÿØ ÿπÿßÿ∑ŸÅ ŸÇÿ∑Ÿá",
        image: "https://image2url.com/r2/bucket2/images/1766756606106-6179b885-01c1-4e84-aced-590656757abf.png",
        rating: 93,
        price: 465,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/444havbxf/download__35_-removebg-preview%20(1).png"},
        position: "CAM"
      },
       {
         id: 43,
        name: "ŸäŸàÿ≥ŸÅ ÿßŸàÿ®ÿßŸÖÿß",
        image: "https://image2url.com/r2/bucket2/images/1766756880382-9d5ac909-dd44-4e3e-bc82-549e50901c6e.png",
        rating: 90,
        price: 450,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/444havbxf/download__35_-removebg-preview%20(1).png"},
        position: "ST"
      },
      {
         id: 44,
        name: "ŸÖÿ±ŸàÿßŸÜ ÿ≠ŸÖÿØŸä",
        image: "https://image2url.com/r2/bucket2/images/1766757112779-6617275b-a3d6-4d20-80a0-9563d813bc0d.png",
        rating: 93,
        price: 465,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/444havbxf/download__35_-removebg-preview%20(1).png"},
        position: "LW"
      },
       {
         id: 44,
        name: "ŸÅŸäÿ≥ÿ™ŸàŸÜ ŸÖÿßŸäŸÑŸä",
        image: "https://image2url.com/r2/bucket2/images/1766758041514-9790cdd7-4051-435d-ab20-25d60eb38d08.png",
        rating: 97,
        price: 485,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/444havbxf/download__35_-removebg-preview%20(1).png"},
        position: "ST"
      },
      {
        id: 45,
        name: "ÿπŸÖÿ±Ÿà ÿßŸÑÿ≥ŸàŸÑŸäŸá",
        image: "https://image2url.com/r2/bucket2/images/1766757470227-0bebd8e8-f29b-4be5-8eb6-50da584fb511.png",
        rating: 90,
        price: 450,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__33_-removebg-preview.png"},
        position: "CM"
      },
      {
        id: 46,
        name: "ŸÖÿ≠ŸÖÿØ ÿ®ÿ≥ÿßŸÖ",
        image: "https://image2url.com/r2/bucket2/images/1766757705686-ebd17c20-d9cc-475a-96d4-e20c457bf6c4.png",
        rating: 85,
        price: 425,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__33_-removebg-preview.png"},
        position: "GK"
      },
      {
        id: 47,
        name: "ÿÆÿßŸÑÿØ ÿπÿ®ÿØÿßŸÑŸÅÿ™ÿßÿ≠",
        image: "https://image2url.com/r2/bucket2/images/1766757908525-14b07db1-5afe-4614-9df2-a9d11d30ee92.png",
        rating: 85,
        price: 425,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__33_-removebg-preview.png"},
        position: "CB"
      },
      {
        id: 48,
        name: "ŸÉÿ±ŸäŸÖ ÿßŸÑÿØÿ®Ÿäÿ≥",
        image: "https://image2url.com/r2/bucket2/images/1766758182284-16fb069e-9df9-41c6-8c25-a2b78251e9c4.png",
        rating: 88,
        price: 440,
        club: {image: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__33_-removebg-preview.png"},
        position: "CB"
      },
    ];

    // ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑŸÖÿµÿ±Ÿäÿ© ŸÖÿπ ÿ£ŸÑŸàÿßŸÜ ÿßŸÑÿ∑ŸÇŸÖ ŸàÿßŸÑÿµŸàÿ±
    const egyptianTeams = [
      { id: 1, name: "ÿßŸÑŸÜÿßÿØŸä ÿßŸÑÿ£ŸáŸÑŸä", logo: "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png", color: "#ff0000", info: { founded: 1907, city: "ÿßŸÑŸÇÿßŸáÿ±ÿ©", nickname: "ÿßŸÑÿ¥Ÿäÿßÿ∑ŸäŸÜ ÿßŸÑÿ≠ŸÖÿ±", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑŸÇÿßŸáÿ±ÿ© ÿßŸÑÿØŸàŸÑŸä" } },
      { id: 2, name: "ŸÜÿßÿØŸä ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ", logo: "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png", color: "#ffffff", info: { founded: 1911, city: "ÿßŸÑŸÇÿßŸáÿ±ÿ©", nickname: "ÿßŸÑŸÅÿ±ÿ≥ÿßŸÜ ÿßŸÑÿ®Ÿäÿ∂", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑŸÇÿßŸáÿ±ÿ© ÿßŸÑÿØŸàŸÑŸä" } },
      { id: 3, name: "ŸÜÿßÿØŸä ŸÅÿßÿ±ŸÉŸà", logo: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__32_-removebg-preview.png", color: "orange", info: { founded: 1995, city: "ÿßŸÑÿ≥ŸàŸäÿ≥", nickname: "ÿßŸÑŸÅÿ±ŸäŸÇ ÿßŸÑÿ®ÿ±ÿ™ŸÇÿßŸÑŸä", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑÿ≥ŸàŸäÿ≥" } },
      { id: 4, name: "ŸÜÿßÿØŸä ÿ≥Ÿäÿ±ÿßŸÖŸäŸÉÿß ŸÉŸÑŸäŸàÿ®ÿßÿ™ÿ±ÿß", logo: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__33_-removebg-preview.png", color: "#800080", info: { founded: 2007, city: "ÿßŸÑÿ≥ÿßÿØÿ≥ ŸÖŸÜ ÿ£ŸÉÿ™Ÿàÿ®ÿ±", nickname: "ÿßŸÑÿ≥Ÿäÿ±ÿßŸÖŸäŸÉÿß", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑÿ≥Ÿäÿ±ÿßŸÖŸäŸÉÿß" } },
      { id: 5, name: "ŸÜÿßÿØŸä ÿ®Ÿäÿ±ÿßŸÖŸäÿØÿ≤", logo: "https://uploads.onecompiler.io/43wsb3ewn/444havbxf/download__35_-removebg-preview%20(1).png", color: "#0000ff", info: { founded: 2008, city: "ÿßŸÑÿ≥ÿßÿØÿ≥ ŸÖŸÜ ÿ£ŸÉÿ™Ÿàÿ®ÿ±", nickname: "ÿßŸÑÿ£Ÿáÿ±ÿßŸÖÿßÿ™", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑÿØŸÅÿßÿπ ÿßŸÑÿ¨ŸàŸä" } },
      { id: 6, name: "ÿßŸÑŸÜÿßÿØŸä ÿßŸÑŸÖÿµÿ±Ÿä", logo: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__5_-removebg-preview%20(1).png", color: "green", info: { founded: 1995, city: "ÿßŸÑÿ≥ŸàŸäÿ≥", nickname: "ÿßŸÑŸÅÿ±ŸäŸÇ ÿßŸÑÿ®ÿ±ÿ™ŸÇÿßŸÑŸä", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑÿ≥ŸàŸäÿ≥" } },
      { id: 7, name: "ŸÜÿßÿØŸä ŸàÿßÿØŸä ÿØÿ¨ŸÑÿ©", logo: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__36_-removebg-preview.png", color: "yellow", info: { founded: 1995, city: "ÿßŸÑÿ≥ŸàŸäÿ≥", nickname: "ÿßŸÑŸÅÿ±ŸäŸÇ ÿßŸÑÿ®ÿ±ÿ™ŸÇÿßŸÑŸä", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑÿ≥ŸàŸäÿ≥" } },
      { id: 8, name: "ŸÜÿßÿØŸä ÿ≤ÿØ", logo: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__6_-removebg-preview.png", color: "black", info: { founded: 1995, city: "ÿßŸÑÿ≥ŸàŸäÿ≥", nickname: "ÿßŸÑŸÅÿ±ŸäŸÇ ÿßŸÑÿ®ÿ±ÿ™ŸÇÿßŸÑŸä", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑÿ≥ŸàŸäÿ≥" } },
      { id: 9, name: "ŸÜÿßÿØŸä ÿ•ŸÜÿ®Ÿä", logo: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/download__7_-removebg-preview%20(1).png", color: "blue", info: { founded: 1995, city: "ÿßŸÑÿ≥ŸàŸäÿ≥", nickname: "ÿßŸÑŸÅÿ±ŸäŸÇ ÿßŸÑÿ®ÿ±ÿ™ŸÇÿßŸÑŸä", stadium: "ÿ≥ÿ™ÿßÿØ ÿßŸÑÿ≥ŸàŸäÿ≥" } },
      {id: 11, name: "ŸÜÿßÿØŸä ÿßŸÑÿßÿ≥ŸÖÿßÿπŸäŸÑŸä", logo: "https://uploads.onecompiler.io/43wsb3ewn/4465cqbhv/images__13_-removebg-preview.png", color: "yellow" , info: {founded: 1937, city : "ÿßŸÑÿßÿ≥ŸÖÿßÿπŸäŸÑŸä", nickname: "ÿ®ŸÑÿØ ÿßŸÑŸÖÿßŸÜÿ¨ÿß", } }
    ];

    // ÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑŸÉŸàŸäÿ≤ ÿπŸÜ ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑŸÖÿµÿ±Ÿä
    const quizQuestions = [
      {
        question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ÿßŸÑŸáÿØÿßŸÅ ÿßŸÑÿ™ÿßÿ±ŸäÿÆŸä ŸÑŸÑÿØŸàÿ±Ÿä ÿßŸÑŸÖÿµÿ±Ÿä)",
        choices: ["ŸÖÿ≠ŸÖÿØ ÿ£ÿ®Ÿà ÿ™ÿ±ŸäŸÉÿ©", "ŸÖÿ≠ŸÖŸàÿØ ÿßŸÑÿÆÿ∑Ÿäÿ®", "ÿ≠ÿ≥ŸÜ ÿßŸÑÿ¥ÿßÿ∞ŸÑŸä", "ÿπŸÖÿ±Ÿà ÿ≤ŸÉŸä", "ŸÖÿ≠ŸÖÿØ ÿµŸÑÿßÿ≠"],
        correct: 2
      },
      {
        question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸÖÿ™Ÿâ ŸÉÿßŸÜÿ™ ÿ≠ÿßÿØÿ´ÿ© ÿ®Ÿàÿ±ÿ≥ÿπŸäÿØ ÿßŸÑÿ¥ŸáŸäÿ±Ÿá)",
        choices:["2012", "2007", "2015", "2011"],
        correct: 3
      },
      {
       question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸÖÿ™Ÿâ ÿ™ÿ£ÿ≥ÿ≥ ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑŸÖÿµÿ±Ÿä ÿßŸÑŸÖŸÖÿ™ÿßÿ≤)",
        choices: ["1948", "1958", "1968", "1938", "1928"],
        correct: 0,
        difficulty: "ŸÖÿ™Ÿàÿ≥ÿ∑"
      },
      {
        question:"ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸäŸá ÿßŸÅÿ∂ŸÑ ŸÑÿπÿ®ÿ© ŸÉÿ±ÿ© ŸÇÿØŸÖ ŸÅŸä ÿßŸÑÿπÿßŸÑŸÖ)",
        choices: ["ŸÅŸäŸÅÿß","3-3-4","ÿ®Ÿäÿ≥"],
        correct: 1
      },
      {
        question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸäŸá ÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸÑÿπÿ®Ÿá ÿ®ŸÜÿ≥ÿ®ÿßŸÑŸÉ [ŸÑŸäŸÉ ÿ≠ÿ±Ÿäÿ© ÿßŸÑÿ±ÿ£Ÿä])",
       choices:["‚≠ê","‚≠ê‚≠ê","‚≠ê‚≠ê‚≠ê","‚≠ê‚≠ê‚≠ê‚≠ê ","‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê"],
        correct: 4
      },
      {
        question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸäŸá ÿßŸàŸÑ ŸÅÿ±ŸÇŸá ŸÖÿµÿ±ŸäŸá ÿ™ÿ£ŸáŸÑÿ™ ŸÑŸÉÿ£ÿ≥ ÿßŸÑÿπÿßŸÑŸÖ ŸÑŸÑÿ£ŸÜÿØŸäŸá)",
       choices:[ "ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ","ÿßŸÑÿßŸáŸÑŸä"],
        correct: 0
      },
      {
        question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ŸÅÿßÿ≤ ÿ®ÿØŸàÿ±Ÿä ÿßÿ®ÿ∑ÿßŸÑ ÿßŸÅÿ±ŸäŸÇŸäÿß ÿ≥ŸÜÿ© 2016)",
       choices:["ÿßŸÑŸàÿØÿßÿØ","ÿßŸÑÿßŸáŸÑŸä","ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ","ÿµŸÜ ÿØÿßŸàŸÜÿ≤ "],
        correct: 3
      },
      {
       question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸÜ ÿßŸÑŸáÿØÿßŸÅ ÿßŸÑÿ™ÿßÿ±ŸäÿÆŸä ŸÑŸÜÿßÿØŸä ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ)",
      choices:["ÿ¥ŸäŸÉÿßÿ®ÿßŸÑÿß", "ÿπÿ®ÿØÿßŸÑÿ≠ŸÑŸäŸÖ ÿπŸÑŸä", "ÿ≠ÿßÿ≤ŸÖ ÿßŸÖÿßŸÖ", "ÿßÿ≠ŸÖÿØ ÿßŸÑÿ≥ŸäÿØ ÿ≤Ÿäÿ≤Ÿà"],
        correct: 1,
      },
      {
      question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ÿßŸàŸÑ ŸÑÿßÿπÿ® ŸÑÿπÿ® ŸÑŸÑÿßŸáŸÑŸä Ÿà ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ)",
      choices:["ÿ≠ÿ≥ŸäŸÜ ÿ≠ÿ¨ÿßÿ≤Ÿä", "ÿßÿ®ÿ±ÿßŸáŸäŸÖ ÿ≠ÿ≥ŸÜ", "ÿ±ÿ∂ÿß ÿπÿ®ÿØÿßŸÑÿπÿßŸÑ", "ÿßÿ≠ŸÖÿØ ÿßŸÑÿ≥ŸäÿØ ÿ≤Ÿäÿ≤Ÿà"],
        correct: 0
      },
      {
       question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ÿπŸÖŸÉ)",
       choices:[ "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥","ÿßÿÆŸà ÿßÿ®ŸàŸäÿß"],
        correct: 0
        },
        {question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑŸÖÿµÿ±Ÿä ÿßŸÑ ŸÉÿßŸÜ ŸÖÿ±ÿ¥ÿ≠ ŸÑÿ¨ÿßŸäÿ≤Ÿá ŸÅÿ±ÿØŸäŸá ÿπÿßŸÑŸÖŸäŸá)",
       choices:["ÿßÿ®Ÿà ÿ™ÿ±ŸäŸÉÿß","ÿ≠ÿ≥ÿßŸÖ ÿ≠ÿ≥ŸÜ","ÿπŸÖÿ±Ÿà ŸÜÿßÿµÿ± "],
        correct: 2
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸäŸá ŸáŸà ŸÜÿßÿØŸä ÿßŸÑÿßÿ≥ŸäŸàÿ∑Ÿä)",
          choices: ["ÿ≥ŸÖ ŸÜÿßÿØŸä ŸÅŸä ÿØÿ±ÿ¨Ÿá ÿ™ÿßŸÑÿ™ÿ©","ÿßÿ≥ŸÖ ŸÜÿßÿØŸä ÿ®Ÿäÿ±ÿßŸÖŸäÿØÿ≤ ÿßŸÑŸÇÿØŸäŸÖ","ÿßÿ≥ŸÖ ŸÜÿßÿØŸä ÿßŸÑÿßÿ≥ŸÖÿßÿπŸäŸÑŸä ÿßŸÑŸÇÿØŸäŸÖ","ÿßÿ≥ŸÖ ŸÜÿßÿØŸä ÿ≥Ÿäÿ±ÿßŸÖŸäŸÉÿß ŸÉŸÑŸäŸàÿ®ÿßÿ™ÿ±ÿß"],
          correct: 1
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ÿßŸÑ ÿ¨ÿßÿ® ÿßŸÑÿ¨ŸàŸÑ ÿßŸÑÿ±ÿßÿ®ÿπ ŸÑŸÑÿ≤ŸÖÿßŸÑŸÉ ŸÅŸä ŸÜÿµ ŸÜŸáÿßÿ¶Ÿä ÿßŸÅÿ±ŸäŸÇŸäÿß 2020)",
       choices:["ÿßÿ¥ÿ±ŸÅ ÿ®ŸÜÿ¥ÿ±ŸÇŸä","ÿ≤Ÿäÿ≤Ÿà","ŸÖÿµÿ∑ŸÅŸâ ŸÅÿ™ÿ≠Ÿä","ÿßŸäŸÖŸÜ ÿ≠ŸÅŸÜŸä","ÿ¥ŸäŸÉÿßÿ®ÿßŸÑÿß"],
        correct: 2
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ÿßŸÑ ÿ¨ÿßÿ® ÿßŸÑÿ¨ŸàŸÑ ÿßŸÑÿßÿÆŸäÿ± ŸÑŸÑÿßŸáŸÑŸä ŸÅŸä ŸÜŸáÿßÿ¶Ÿä ÿßŸÑŸÉŸÜŸÅÿØÿ±ÿßŸÑŸäŸá  2014)",
       choices:["ÿßÿ®Ÿà ÿ™ÿ±ŸäŸÉŸá","ÿ≠ÿ≥ÿßŸÖ ÿ∫ÿßŸÑŸä","ŸàŸÑŸäÿØ ÿßÿ≤ÿßÿ±Ÿà","ÿÆÿßŸÑÿØ ÿ®Ÿäÿ®Ÿà","ÿπŸÖÿßÿØ ŸÖÿ™ÿπÿ®"],
        correct: 4
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÉÿßŸÖ ŸÖÿ±Ÿá ÿ™Ÿàÿ¨ ŸÜÿßÿØŸä ŸÖÿßÿ≤ŸÖÿ®Ÿä ÿ®ÿØŸàÿ±Ÿä ÿßÿ®ÿ∑ÿßŸÑ ÿßŸÅÿ±ŸäŸÇŸäÿß)",
       choices:["1","2","3","4","5"],
        correct: 4
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸäŸá ÿßŸàŸÑ ŸÜÿßÿØŸä ÿ™ŸÖ ÿ™ÿ£ÿ≥Ÿäÿ≥Ÿá ŸÅŸä ŸÖÿµÿ±)",
       choices:["ÿßŸÑÿ≥ŸÉŸá ÿßŸÑÿ≠ÿØŸäÿØ","ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ","ÿßŸÑÿßŸáŸÑŸä","ÿßŸÑÿ¨ÿ≤Ÿäÿ±Ÿá ","ÿßŸÑŸÖÿµÿ±Ÿä"],
        correct: 3
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸäŸá ÿßŸàŸÑ ŸÜÿßÿØŸä ŸÉŸàÿ±ÿ© ŸÇÿØŸÖ ÿ™ŸÖ ÿ™ÿ£ÿ≥Ÿäÿ≥Ÿá ŸÅŸä ŸÖÿµÿ±)",
       choices:["ÿßŸÑÿ≥ŸÉŸá ÿßŸÑÿ≠ÿØŸäÿØ","ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ","ÿßŸÑÿßŸáŸÑŸä","ÿßŸÑÿ¨ÿ≤Ÿäÿ±Ÿá ","ÿßŸÑŸÖÿµÿ±Ÿä"],
        correct: 0
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ÿßŸÉÿ™ÿ± ŸÑÿßÿπÿ® ŸÑÿπÿ® ŸÖÿßÿ™ÿ¥ÿßÿ™ ŸÅŸä ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑŸÖÿµÿ±Ÿä)",
       choices:["ŸÖÿ≠ŸÖŸàÿØ ŸÅÿ™ÿ≠ ÿßŸÑŸÑŸá","ÿßŸÑÿ≠ÿ∂ÿ±Ÿä","ÿ≠ÿ≥ÿßŸÖ ÿ≠ÿ≥ŸÜ","ÿπÿ®ÿØŸÑŸÑŸá ÿßŸÑÿ≥ÿπŸäÿØ "],
        correct: 3
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÉÿßŸÖ ŸÑÿßÿπÿ® ŸÖÿµÿ±Ÿä ÿ≥ÿ¨ŸÑ ŸáÿØŸÅ ŸÅŸä ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿßŸÜÿ¨ŸÑŸäÿ≤Ÿä)",
       choices:["5","7","9","11"],
        correct: 3 
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸäŸá ÿßŸàŸÑ ŸÅÿ±ŸÇŸá ŸÉÿ≥ÿ®ÿ™ ŸÉÿßÿ≥ ŸÖÿµÿ±)",
       choices:["ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ","ÿßŸÑÿßÿ≥ŸÖÿßÿπŸäŸÑŸä","ÿßŸÑÿßŸáŸÑŸä","ÿßŸÑŸÖÿµÿ±Ÿä"],
        correct: 0
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÖŸäŸÜ ÿµÿßÿ≠ÿ® ÿßÿ≥ÿ±ÿπ ŸáÿØŸÅ ŸÅŸä ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑŸÖÿµÿ±Ÿä)",
       choices:["ÿ≠ÿßÿ≤ŸÖ ÿßŸÖÿßŸÖ","ÿπŸÖÿßÿØ ŸÖÿ™ÿπÿ®","ÿßŸäŸÖŸÜ ŸäŸàŸÜÿ≥","ÿ±ÿ∂ÿß ÿπÿ®ÿØÿßŸÑÿπÿßŸÑ"],
        correct: 2
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ŸÉÿßŸÖ ŸÖÿ±Ÿá ŸÅÿßÿ≤ ÿßŸÑÿßÿ≥ŸÖÿßÿπŸäŸÑŸä ÿ®ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑŸÖÿµÿ±Ÿä)",
       choices:["1","2","ÿß4","3"],
        correct: 2
        },
        {
          question: "ÿßÿ≥ÿ± ÿßŸÑŸàŸÜÿ¥ ÿ®Ÿäÿ≥ÿ£ŸÑŸÉ (ÿßŸÑŸÜÿßÿØŸä ÿßŸÑŸÖÿµÿ±Ÿä ŸÖÿπÿßŸá ŸÉÿßŸÖ ÿ®ÿ∑ŸàŸÑŸá)",
       choices:["6","13","24"," 30"],
        correct: 2
        },
    ];

    // ---------- GLOBAL STATE ----------
    let wallet = 400;
    let filteredPlayers = [...players];
    let myPlayers = []; // ŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
    let currentFormation = {}; // ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©
    let currentFormationType = {
      defenders: 4,
      midfielders: 4,
      attackers: 2
    }; // ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©
    let currentFormationName = "ÿ™ÿ¥ŸÉŸäŸÑÿ™Ÿä"; // ÿßÿ≥ŸÖ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    let currentFormationImage = ""; // ÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    let kitColor = "#ffffff"; // ŸÑŸàŸÜ ÿßŸÑÿ∑ŸÇŸÖ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä ÿ£ÿ®Ÿäÿ∂
    let selectedOpponent = null; // ÿßŸÑÿÆÿµŸÖ ÿßŸÑŸÖÿÆÿ™ÿßÿ±
    
    // ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÑÿßÿπÿ®
    let playerStats = {
      playerGuess: { played: 0, wins: 0 },
      clubGuess: { played: 0, wins: 0 },
      quiz: { played: 0, wins: 0 },
      speedChallenge: { played: 0, wins: 0 },
      matches: { played: 0, wins: 0 },
      playersBought: 0,
      totalCoinsEarned: 0,
      totalCoinsSpent: 0
    };
    
    // ÿ≠ÿßŸÑÿ© ŸÑÿπÿ®ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÑÿßÿπÿ®
    let playerGuessGameState = {
      currentPlayer: null,
      attemptsLeft: 2,
      hintsUsed: 0,
      maxHints: 3,
      round: 1,
      score: 0,
      revealed: false,
      choices: [],
      gameActive: false
    };

    // ÿ≠ÿßŸÑÿ© ŸÑÿπÿ®ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÜÿßÿØŸä
    let clubGuessGameState = {
      currentClub: null,
      attemptsLeft: 3,
      hintsUsed: 0,
      maxHints: 1, // ÿ™ÿ∫ŸäŸäÿ± ŸÖŸÜ 3 ÿ•ŸÑŸâ 1
      round: 1,
      score: 0,
      revealed: false,
      choices: [],
      gameActive: false
    };

    // ÿ≠ÿßŸÑÿ© ŸÑÿπÿ®ÿ© ÿßŸÑŸÉŸàŸäÿ≤
    let quizGameState = {
      currentQuestionIndex: 0,
      score: 0,
      totalQuestions: 10,
      gameActive: true,
      currentQuestion: null,
      answered: false,
      questions: []
    };

    // ÿ≠ÿßŸÑÿ© ŸÑÿπÿ®ÿ© Speed Challenge
    let speedChallengeGameState = {
      currentQuestion: null,
      player1Pressed: false,
      player2Pressed: false,
      activePlayer: null, // 1 ÿ£Ÿà 2
      timer: 30,
      timerInterval: null,
      gameActive: false,
      answerSubmitted: false,
      firstPressTime: null
    };

    // ---------- DOM ELEMENTS ----------
    const gameScreen = document.getElementById('game-screen');
    const loadingScreen = document.getElementById('loading-screen');
    const storeScreen = document.getElementById('store-screen');
    const playersScreen = document.getElementById('players-screen');
    const formationScreen = document.getElementById('formation-screen');
    const matchScreen = document.getElementById('match-screen');
    const playerGuessScreen = document.getElementById('player-guess-screen');
    const clubGuessScreen = document.getElementById('club-guess-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const statsScreen = document.getElementById('stats-screen');
    const speedChallengeScreen = document.getElementById('speed-challenge-screen');
    const storeButton = document.getElementById('store-button');
    const playersButton = document.getElementById('players-button');
    const formationButton = document.getElementById('formation-button');
    const matchButton = document.getElementById('match-button');
    const statsButton = document.getElementById('stats-button');
    const playerGuessButton = document.getElementById('player-guess-btn');
    const clubGuessButton = document.getElementById('club-guess-btn');
    const quizButton = document.getElementById('quiz-btn');
    const speedChallengeButton = document.getElementById('speed-challenge-btn');
    const backToGameFromStoreButton = document.getElementById('back-to-game-from-store');
    const backToGameFromPlayersButton = document.getElementById('back-to-game-from-players');
    const backToGameFromFormationButton = document.getElementById('back-to-game-from-formation');
    const backToGameFromPlayerGuessButton = document.getElementById('back-to-game-from-player-guess');
    const backToGameFromPlayerResultButton = document.getElementById('back-to-game-from-player-result');
    const backToGameFromClubGuessButton = document.getElementById('back-to-game-from-club-guess');
    const backToGameFromClubResultButton = document.getElementById('back-to-game-from-club-result');
    const backToGameFromQuizButton = document.getElementById('back-to-game-from-quiz');
    const backToGameFromQuizResultButton = document.getElementById('back-to-game-from-quiz-result');
    const backToGameFromStatsButton = document.getElementById('back-to-game-from-stats');
    const backToGameFromSpeedChallengeButton = document.getElementById('back-to-game-from-speed-challenge');
    const backToGameFromSpeedResultButton = document.getElementById('back-to-game-from-speed-result');
    const backToMainMenuButton = document.getElementById('back-to-main-menu');
    const backToMainMenuFromGameButton = document.getElementById('back-to-main-menu-from-game');
    const backToMainMenuFromMatchButton = document.getElementById('back-to-main-menu-from-match');
    const playersContainer = document.getElementById('players-container');
    const myPlayersList = document.getElementById('my-players-list');
    const formationPositions = document.getElementById('formation-positions');
    const availablePlayers = document.getElementById('available-players');
    const walletAmount = document.getElementById('wallet-amount');
    const searchInput = document.getElementById('player-search');
    const progressBar = document.getElementById('progress-bar');
    const saveFormationButton = document.getElementById('save-formation');
    const resetFormationButton = document.getElementById('reset-formation');
    const evaluateFormationButton = document.getElementById('evaluate-formation');
    const ratingResult = document.getElementById('rating-result');
    const formationRating = document.getElementById('formation-rating');
    const ratingDetails = document.getElementById('rating-details');
    const closeRating = document.getElementById('close-rating');
    const defendersButtons = document.getElementById('defenders-buttons');
    const midfieldersButtons = document.getElementById('midfielders-buttons');
    const attackersButtons = document.getElementById('attackers-buttons');
    const formationSummaryText = document.getElementById('formation-summary-text');
    const formationValidation = document.getElementById('formation-validation');
    const formationNameInput = document.getElementById('formation-name');
    const formationImageInput = document.getElementById('formation-image');
    const formationPreviewImg = document.getElementById('formation-preview-img');
    const formationPreviewName = document.getElementById('formation-preview-name');
    const kitColorInput = document.getElementById('kit-color');
    const kitColorPreview = document.getElementById('kit-color-preview');
    const userClubLogo = document.getElementById('user-club-logo');
    const userClubName = document.getElementById('user-club-name');
    const opponentLogo = document.getElementById('opponent-logo');
    const opponentName = document.getElementById('opponent-name');
    const opponentList = document.getElementById('opponent-list');
    const startMatchBtn = document.getElementById('start-match-btn');
    const matchGameContainer = document.getElementById('match-game-container');
    const matchCanvas = document.getElementById('match-canvas');
    const matchResult = document.getElementById('match-result');
    const matchResultTitle = document.getElementById('match-result-title');
    const matchResultScore = document.getElementById('match-result-score');
    const matchReward = document.getElementById('match-reward');
    const liveScore = document.getElementById('live-score');
    const liveTime = document.getElementById('live-time');
    const matchRestartBtn = document.getElementById('match-restart');
    const matchPauseBtn = document.getElementById('match-pause');
    
    // ÿπŸÜÿßÿµÿ± ŸÑÿπÿ®ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÑÿßÿπÿ®
    const attemptsLeftEl = document.getElementById('attempts-left');
    const hintsLeftEl = document.getElementById('hints-left');
    const roundNumberEl = document.getElementById('round-number');
    const playerGuessScoreEl = document.getElementById('player-guess-score');
    const mysteryPlayerImage = document.getElementById('mystery-player-image');
    const blurOverlay = document.getElementById('blur-overlay');
    const hintsList = document.getElementById('hints-list');
    const choicesContainer = document.getElementById('choices-container');
    const nextHintBtn = document.getElementById('next-hint-btn');
    const gameResult = document.getElementById('game-result');
    const resultTitle = document.getElementById('result-title');
    const resultMessage = document.getElementById('result-message');
    const resultReward = document.getElementById('result-reward');
    const nextRoundBtn = document.getElementById('next-round-btn');

    // ÿπŸÜÿßÿµÿ± ŸÑÿπÿ®ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÜÿßÿØŸä
    const clubAttemptsLeftEl = document.getElementById('club-attempts-left');
    const clubHintsLeftEl = document.getElementById('club-hints-left');
    const clubRoundNumberEl = document.getElementById('club-round-number');
    const clubGuessScoreEl = document.getElementById('club-guess-score');
    const mysteryClubLogo = document.getElementById('mystery-club-logo');
    const clubBlurOverlay = document.getElementById('club-blur-overlay');
    const clubHintsList = document.getElementById('club-hints-list');
    const clubChoicesContainer = document.getElementById('club-choices-container');
    const clubNextHintBtn = document.getElementById('club-next-hint-btn');
    const clubGameResult = document.getElementById('club-game-result');
    const clubResultTitle = document.getElementById('club-result-title');
    const clubResultMessage = document.getElementById('club-result-message');
    const clubResultReward = document.getElementById('club-result-reward');
    const clubNextRoundBtn = document.getElementById('club-next-round-btn');

    // ÿπŸÜÿßÿµÿ± ŸÑÿπÿ®ÿ© ÿßŸÑŸÉŸàŸäÿ≤
    const currentQuestionEl = document.getElementById('current-question');
    const quizScoreEl = document.getElementById('quiz-score');
    const quizDifficultyEl = document.getElementById('quiz-difficulty');
    const questionTextEl = document.getElementById('question-text');
    const quizChoicesContainer = document.getElementById('quiz-choices-container');
    const nextQuestionBtn = document.getElementById('next-question-btn');
    const quizGameResult = document.getElementById('quiz-game-result');
    const quizResultTitle = document.getElementById('quiz-result-title');
    const quizResultMessage = document.getElementById('quiz-result-message');
    const quizResultReward = document.getElementById('quiz-result-reward');
    const nextQuizRoundBtn = document.getElementById('next-quiz-round-btn');

    // ÿπŸÜÿßÿµÿ± ŸÑÿπÿ®ÿ© Speed Challenge
    const speedQuestionText = document.getElementById('speed-question-text');
    const player1Button = document.getElementById('player1-button');
    const player2Button = document.getElementById('player2-button');
    const player1Arrow = document.getElementById('player1-arrow');
    const player2Arrow = document.getElementById('player2-arrow');
    const player1Area = document.getElementById('player1-area');
    const player2Area = document.getElementById('player2-area');
    const timerDisplay = document.getElementById('timer-display');
    const answerInput = document.getElementById('answer-input');
    const submitAnswerBtn = document.getElementById('submit-answer-btn');
    const speedResult = document.getElementById('speed-result');
    const speedResultTitle = document.getElementById('speed-result-title');
    const speedResultWinner = document.getElementById('speed-result-winner');
    const speedResultDetails = document.getElementById('speed-result-details');
    const nextSpeedRoundBtn = document.getElementById('next-speed-round-btn');
    const nextRoundSpeedBtn = document.getElementById('next-round-speed-btn');

    // ÿπŸÜÿßÿµÿ± ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
    const playerGuessPlayedEl = document.getElementById('player-guess-played');
    const playerGuessWinsEl = document.getElementById('player-guess-wins');
    const clubGuessPlayedEl = document.getElementById('club-guess-played');
    const clubGuessWinsEl = document.getElementById('club-guess-wins');
    const quizPlayedEl = document.getElementById('quiz-played');
    const quizWinsEl = document.getElementById('quiz-wins');
    const speedChallengePlayedEl = document.getElementById('speed-challenge-played');
    const speedChallengeWinsEl = document.getElementById('speed-challenge-wins');
    const totalCoinsEl = document.getElementById('total-coins');
    const playersBoughtEl = document.getElementById('players-bought');
    const matchesPlayedEl = document.getElementById('matches-played');

    // ---------- SAVE AND LOAD FUNCTIONS ----------
    // ÿØÿßŸÑÿ© ŸÑÿ≠ŸÅÿ∏ ŸÉŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©
    function saveGameData() {
      const gameData = {
        wallet: wallet,
        myPlayers: myPlayers,
        currentFormation: currentFormation,
        currentFormationType: currentFormationType,
        currentFormationName: currentFormationName,
        currentFormationImage: currentFormationImage,
        kitColor: kitColor,
        playerStats: playerStats,
        playerGuessGameState: playerGuessGameState,
        clubGuessGameState: clubGuessGameState,
        quizGameState: quizGameState,
        speedChallengeGameState: speedChallengeGameState,
        lastSaveTime: Date.now()
      };
      
      try {
        localStorage.setItem('footballGameData', JSON.stringify(gameData));
        console.log('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ© ÿ®ŸÜÿ¨ÿßÿ≠');
      } catch (e) {
        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©:', e);
      }
    }
    
    // ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©
    function loadGameData() {
      try {
        const savedData = localStorage.getItem('footballGameData');
        if (savedData) {
          const gameData = JSON.parse(savedData);
          
          wallet = gameData.wallet || 400;
          myPlayers = gameData.myPlayers || [];
          currentFormation = gameData.currentFormation || {};
          currentFormationType = gameData.currentFormationType || { defenders: 4, midfielders: 4, attackers: 2 };
          currentFormationName = gameData.currentFormationName || "ÿ™ÿ¥ŸÉŸäŸÑÿ™Ÿä";
          currentFormationImage = gameData.currentFormationImage || "";
          kitColor = gameData.kitColor || "#ffffff";
          playerStats = gameData.playerStats || {
            playerGuess: { played: 0, wins: 0 },
            clubGuess: { played: 0, wins: 0 },
            quiz: { played: 0, wins: 0 },
            speedChallenge: { played: 0, wins: 0 },
            matches: { played: 0, wins: 0 },
            playersBought: 0,
            totalCoinsEarned: 0,
            totalCoinsSpent: 0
          };
          
          // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàÿßÿ¨Ÿáÿ©
          updateWallet();
          updateStatsDisplay();
          
          console.log('ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ© ÿ®ŸÜÿ¨ÿßÿ≠');
        } else {
          console.log('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ŸÑŸÑÿπÿ®ÿ©');
        }
      } catch (e) {
        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©:', e);
      }
    }
    
    // ÿØÿßŸÑÿ© ŸÑÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≠ÿØÿ´ÿ© ÿπŸÜÿØ ÿ≠ÿØŸàÿ´ ÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ŸÖŸáŸÖÿ©
    function autoSave() {
      saveGameData();
    }
    
    // ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ≠ŸÅÿ∏ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä
    function setupAutoSave() {
      // ÿ≠ŸÅÿ∏ ÿπŸÜÿØ ÿ¥ÿ±ÿßÿ° ŸÑÿßÿπÿ®
      document.addEventListener('buyPlayer', autoSave);
      
      // ÿ≠ŸÅÿ∏ ÿπŸÜÿØ ÿ™ÿ≠ÿØŸäÿ´ ŸÑÿßÿπÿ®
      document.addEventListener('updatePlayer', autoSave);
      
      // ÿ≠ŸÅÿ∏ ÿπŸÜÿØ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
      document.addEventListener('formationChanged', autoSave);
      
      // ÿ≠ŸÅÿ∏ ÿπŸÜÿØ ÿßŸÑŸÅŸàÿ≤ ŸÅŸä ŸÑÿπÿ®ÿ©
      document.addEventListener('gameWon', autoSave);
      
      // ÿ≠ŸÅÿ∏ ÿπŸÜÿØ ÿ™ÿ∫ŸäŸäÿ± ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿßÿØŸä
      document.addEventListener('clubDataChanged', autoSave);
      
      // ÿ≠ŸÅÿ∏ ÿπŸÜÿØ ÿßŸÑÿÆÿ±Ÿàÿ¨ ŸÖŸÜ ÿßŸÑÿµŸÅÿ≠ÿ©
      window.addEventListener('beforeunload', saveGameData);
      
      // ÿ≠ŸÅÿ∏ ŸÉŸÑ 30 ÿ´ÿßŸÜŸäÿ© ŸÉŸÜÿ≥ÿÆÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©
      setInterval(saveGameData, 30000);
    }
    
    // ÿØÿßŸÑÿ© ŸÑÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ© ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
    function resetGameData() {
      if (confirm('ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©ÿü Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜŸá.')) {
        localStorage.removeItem('footballGameData');
        location.reload();
      }
    }

    // ---------- SCREEN MANAGEMENT ----------
    function showStore() {
      // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖŸàŸÇÿπ ÿ≤ÿ± ÿßŸÑŸÖÿ™ÿ¨ÿ±
      const buttonRect = storeButton.getBoundingClientRect();
      const buttonCenterX = buttonRect.left + buttonRect.width /2;
      const buttonCenterY = buttonRect.top + buttonRect.height / 2;
      
      // ÿ•ŸÜÿ¥ÿßÿ° ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ™ŸÉÿ®Ÿäÿ± ŸÖÿ™ŸÖÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿ≤ÿ± ÿßŸÑŸÖÿ™ÿ¨ÿ±
      gameScreen.style.transformOrigin = `${buttonCenterX}px ${buttonCenterY}px`;
      gameScreen.style.animation = 'zoomIn 1s forwards';
      
      setTimeout(() => {
        // ÿ•ÿÆŸÅÿßÿ° ÿ¥ÿßÿ¥ÿ© ÿßŸÑŸÑÿπÿ®ÿ© Ÿàÿ•ÿ∏Ÿáÿßÿ± ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
        gameScreen.style.display = 'none';
        loadingScreen.classList.add('active');
        
        // ÿ®ÿØÿ° ÿ™ŸÇÿØŸÖ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
        let progress = 0;
        const interval = setInterval(() => {
          progress += 2;
          progressBar.style.width = `${progress}%`;
          
          if (progress >= 100) {
            clearInterval(interval);
            setTimeout(() => {
              loadingScreen.classList.remove('active');
              storeScreen.classList.add('active');
            }, 500);
          }
        }, 50);
      }, 1000);
    }

    function showGame() {
      // ÿ•ÿÆŸÅÿßÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿ£ÿÆÿ±Ÿâ
      storeScreen.classList.remove('active');
      playersScreen.classList.remove('active');
      formationScreen.classList.remove('active');
      matchScreen.classList.remove('active');
      playerGuessScreen.classList.remove('active');
      clubGuessScreen.classList.remove('active');
      quizScreen.classList.remove('active');
      statsScreen.classList.remove('active');
      speedChallengeScreen.classList.remove('active');
      
      setTimeout(() => {
        // ÿ•ÿ∏Ÿáÿßÿ± ÿ¥ÿßÿ¥ÿ© ÿßŸÑŸÑÿπÿ®ÿ© ŸÖÿπ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ
        gameScreen.style.display = 'block';
        gameScreen.style.animation = '';
        gameScreen.style.transform = 'scale(1)';
      }, 500);
    }

    function showPlayersScreen() {
      // ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ŸÇÿ®ŸÑ ÿπÿ±ÿ∂ ÿßŸÑÿ¥ÿßÿ¥ÿ©
      renderMyPlayers();
      
      // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿ¥ÿßÿ¥ÿ© ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ
      gameScreen.style.display = 'none';
      playersScreen.classList.add('active');
    }

    function showFormationScreen() {
      // ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑŸÖÿ™ÿßÿ≠ŸäŸÜ ŸÇÿ®ŸÑ ÿπÿ±ÿ∂ ÿßŸÑÿ¥ÿßÿ¥ÿ©
      renderFormation();
      updateFormationSummary();
      
      // ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
      loadFormationCustomization();
      
      // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
      gameScreen.style.display = 'none';
      formationScreen.classList.add('active');
    }

    function showMatchScreen() {
      // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿßÿØŸä ÿßŸÑÿÆÿßÿµ ÿ®ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
      updateUserClubInfo();
      
      // ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿÆÿµŸàŸÖ
      renderOpponentList();
      
      // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿ¥ÿßÿ¥ÿ© ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©
      gameScreen.style.display = 'none';
      matchScreen.classList.add('active');
    }
    
    function showPlayerGuessScreen() {
      // ÿ®ÿØÿ° ŸÑÿπÿ®ÿ© ÿ¨ÿØŸäÿØÿ©
      startNewPlayerGuessGame();
      
      // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿ¥ÿßÿ¥ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÑÿßÿπÿ®
      gameScreen.style.display = 'none';
      playerGuessScreen.classList.add('active');
    }
    
    function showClubGuessScreen() {
      // ÿ®ÿØÿ° ŸÑÿπÿ®ÿ© ÿ¨ÿØŸäÿØÿ©
      startNewClubGuessGame();
      
      // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿ¥ÿßÿ¥ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÜÿßÿØŸä
      gameScreen.style.display = 'none';
      clubGuessScreen.classList.add('active');
    }
    
    function showQuizScreen() {
      // ÿ®ÿØÿ° ŸÑÿπÿ®ÿ© ÿ¨ÿØŸäÿØÿ©
      startNewQuizGame();
      
      // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿ¥ÿßÿ¥ÿ© ÿßŸÑŸÉŸàŸäÿ≤
      gameScreen.style.display = 'none';
      quizScreen.classList.add('active');
    }
    
    function showStatsScreen() {
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÇÿ®ŸÑ ÿπÿ±ÿ∂ ÿßŸÑÿ¥ÿßÿ¥ÿ©
      updateStatsDisplay();
      
      // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      gameScreen.style.display = 'none';
      statsScreen.classList.add('active');
    }
    
    function showSpeedChallengeScreen() {
      // ÿ®ÿØÿ° ŸÑÿπÿ®ÿ© ÿ¨ÿØŸäÿØÿ©
      startNewSpeedChallengeGame();
      
      // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ÿ•ŸÑŸâ ÿ¥ÿßÿ¥ÿ© Speed Challenge
      gameScreen.style.display = 'none';
      speedChallengeScreen.classList.add('active');
    }

    // ÿ™ÿ≠ÿØŸäÿ´ ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
    function updateStatsDisplay() {
      playerGuessPlayedEl.textContent = `${playerStats.playerGuess.played} ÿ¨ŸàŸÑÿ©`;
      playerGuessWinsEl.textContent = `${playerStats.playerGuess.wins} ŸÖÿ±Ÿëÿ©`;
      clubGuessPlayedEl.textContent = `${playerStats.clubGuess.played} ÿ¨ŸàŸÑÿ©`;
      clubGuessWinsEl.textContent = `${playerStats.clubGuess.wins} ŸÖÿ±Ÿëÿ©`;
      quizPlayedEl.textContent = `${playerStats.quiz.played} ÿ¨ŸàŸÑÿ©`;
      quizWinsEl.textContent = `${playerStats.quiz.wins} ŸÖÿ±Ÿëÿ©`;
      speedChallengePlayedEl.textContent = `${playerStats.speedChallenge.played} ÿ¨ŸàŸÑÿ©`;
      speedChallengeWinsEl.textContent = `${playerStats.speedChallenge.wins} ŸÖÿ±Ÿëÿ©`;
      totalCoinsEl.textContent = wallet;
      playersBoughtEl.textContent = `${playerStats.playersBought} ŸÑÿßÿπÿ®`;
      matchesPlayedEl.textContent = `${playerStats.matches.played} ŸÖÿ®ÿßÿ±ÿßÿ©`;
    }

    // ---------- PLAYER CARD CREATION ----------
    function createPlayerCard(player) {
      const clubImg = player.club?.image
        ? `<img src="${player.club.image}" alt="Club logo" class="club-image">`
        : '';
      
      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ŸÖŸÖŸÑŸàŸÉŸãÿß ÿ®ÿßŸÑŸÅÿπŸÑ
      const isOwned = myPlayers.some(p => p.id === player.id);
      const positionName = getPositionName(player.position);
      
      return `
        <div class="item-card ${isOwned ? 'sold-out' : ''}">
          ${isOwned ? '<div class="sold-out-badge">ÿ™ŸÖ ÿßŸÑÿ¥ÿ±ÿßÿ°</div>' : ''}
          <img src="${player.image}" alt="${player.name}" class="item-image">
          <div class="item-name">${player.name}</div>
          <div class="item-rating">‚≠ê ${player.rating}</div>
          <div class="item-position">${positionName}</div>
          ${clubImg}
          <div class="item-price">$${player.price}</div>
          <button class="buy-button" data-id="${player.id}" ${isOwned ? 'disabled' : ''}>
            ${isOwned ? 'ÿ™ŸÖ ÿßŸÑÿ¥ÿ±ÿßÿ°' : 'ÿßÿ¥ÿ™ÿ±Ÿä ÿßŸÑÿ¢ŸÜ'}
          </button>
        </div>
      `;
    }

    // ÿØÿßŸÑÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ±ŸÉÿ≤ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿäÿ©
    function getPositionName(positionCode) {
      const positionNames = {
        'GK': 'ÿ≠ÿßÿ±ÿ≥ ŸÖÿ±ŸÖŸâ',
        'RB': 'ŸÖÿØÿßŸÅÿπ ÿ£ŸäŸÖŸÜ',
        'LB': 'ŸÖÿØÿßŸÅÿπ ÿ£Ÿäÿ≥ÿ±',
        'CB': 'ŸÖÿØÿßŸÅÿπ ŸÖÿ±ŸÉÿ≤Ÿä',
        'CM': 'Ÿàÿ≥ÿ∑ ŸÖŸÑÿπÿ®',
        'RM': 'Ÿàÿ≥ÿ∑ ÿ£ŸäŸÖŸÜ',
        'LM': 'Ÿàÿ≥ÿ∑ ÿ£Ÿäÿ≥ÿ±',
        'CAM': 'Ÿàÿ≥ÿ∑ Ÿáÿ¨ŸàŸÖŸä',
        'LAM': 'Ÿàÿ≥ÿ∑ Ÿáÿ¨ŸàŸÖŸä ÿ£Ÿäÿ≥ÿ±',
        'RAM': 'Ÿàÿ≥ÿ∑ Ÿáÿ¨ŸàŸÖŸä ÿ£ŸäŸÖŸÜ',
        'RWB': 'ÿ∏ŸáŸäÿ± ÿ£ŸäŸÖŸÜ',
        'LWB': 'ÿ∏ŸáŸäÿ± ÿ£Ÿäÿ≥ÿ±',
        'RW': 'ÿ¨ŸÜÿßÿ≠ ÿ£ŸäŸÖŸÜ',
        'LW': 'ÿ¨ŸÜÿßÿ≠ ÿ£Ÿäÿ≥ÿ±',
        'ST': 'ŸÖŸáÿßÿ¨ŸÖ',
        'CF': 'ŸÖŸáÿßÿ¨ŸÖ ŸÖÿ±ŸÉÿ≤Ÿä',
        'RF': 'ŸÖŸáÿßÿ¨ŸÖ ÿ£ŸäŸÖŸÜ',
        'LF': 'ŸÖŸáÿßÿ¨ŸÖ ÿ£Ÿäÿ≥ÿ±'
      };
      
      return positionNames[positionCode] || positionCode;
    }

    // ---------- RENDERING ----------
    function renderPlayers(list = filteredPlayers) {
      playersContainer.innerHTML = '';
      list.forEach(p => {
        playersContainer.insertAdjacentHTML('beforeend', createPlayerCard(p));
      });
    }

    // ---------- ÿπÿ±ÿ∂ ŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ----------
    function renderMyPlayers() {
      myPlayersList.innerHTML = '';
      
      if (myPlayers.length === 0) {
        myPlayersList.innerHTML = '<p style="text-align: center; color: #ccc; grid-column: 1/-1;">ŸÑŸÖ ÿ™ÿ¥ÿ™ÿ±Ÿä ÿ£Ÿä ŸÑÿßÿπÿ®ŸäŸÜ ÿ®ÿπÿØ</p>';
        return;
      }
      
      myPlayers.forEach(player => {
        const positionName = getPositionName(player.position);
        const playerCard = document.createElement('div');
        playerCard.className = 'my-player-card';
        
        // ÿ™ÿ≠ÿØŸäÿØ ŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ÿ≠ÿßÿ±ÿ≥ ŸÖÿ±ŸÖŸâ
        const isGoalkeeper = player.position === 'GK';
        
        playerCard.innerHTML = `
          <img src="${player.image}" alt="${player.name}" class="my-player-image">
          <div class="my-player-name">${player.name}</div>
          <div class="my-player-details">
            <div class="my-player-position">${positionName}</div>
            <div class="my-player-number">${player.number || '--'}</div>
          </div>
          ${isGoalkeeper ? 
            `<p style="color: #ccc; font-size: 0.8rem; margin-bottom: 10px;">ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿ∫ŸäŸäÿ± ŸÖÿ±ŸÉÿ≤ ÿßŸÑÿ≠ÿßÿ±ÿ≥</p>` : 
            `<select class="position-selector" data-id="${player.id}">
              <option value="" ${!player.position ? 'selected' : ''}>ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿ±ŸÉÿ≤</option>
              <option value="RB" ${player.position === 'RB' ? 'selected' : ''}>ŸÖÿØÿßŸÅÿπ ÿ£ŸäŸÖŸÜ</option>
              <option value="LB" ${player.position === 'LB' ? 'selected' : ''}>ŸÖÿØÿßŸÅÿπ ÿ£Ÿäÿ≥ÿ±</option>
              <option value="CB" ${player.position === 'CB' ? 'selected' : ''}>ŸÖÿØÿßŸÅÿπ ŸÖÿ±ŸÉÿ≤Ÿä</option>
              <option value="CM" ${player.position === 'CM' ? 'selected' : ''}>Ÿàÿ≥ÿ∑ ŸÖŸÑÿπÿ®</option>
              <option value="RM" ${player.position === 'RM' ? 'selected' : ''}>Ÿàÿ≥ÿ∑ ÿ£ŸäŸÖŸÜ</option>
              <option value="LM" ${player.position === 'LM' ? 'selected' : ''}>Ÿàÿ≥ÿ∑ ÿ£Ÿäÿ≥ÿ±</option>
              <option value="CAM" ${player.position === 'CAM' ? 'selected' : ''}>Ÿàÿ≥ÿ∑ Ÿáÿ¨ŸàŸÖŸä</option>
              <option value="LAM" ${player.position === 'LAM' ? 'selected' : ''}>Ÿàÿ≥ÿ∑ Ÿáÿ¨ŸàŸÖŸä ÿ£Ÿäÿ≥ÿ±</option>
              <option value="RAM" ${player.position === 'RAM' ? 'selected' : ''}>Ÿàÿ≥ÿ∑ Ÿáÿ¨ŸàŸÖŸä ÿ£ŸäŸÖŸÜ</option>
              <option value="RWB" ${player.position === 'RWB' ? 'selected' : ''}>ÿ∏ŸáŸäÿ± ÿ£ŸäŸÖŸÜ</option>
              <option value="LWB" ${player.position === 'LWB' ? 'selected' : ''}>ÿ∏ŸáŸäÿ± ÿ£Ÿäÿ≥ÿ±</option>
              <option value="RW" ${player.position === 'RW' ? 'selected' : ''}>ÿ¨ŸÜÿßÿ≠ ÿ£ŸäŸÖŸÜ</option>
              <option value="LW" ${player.position === 'LW' ? 'selected' : ''}>ÿ¨ŸÜÿßÿ≠ ÿ£Ÿäÿ≥ÿ±</option>
              <option value="ST" ${player.position === 'ST' ? 'selected' : ''}>ŸÖŸáÿßÿ¨ŸÖ</option>
              <option value="CF" ${player.position === 'CF' ? 'selected' : ''}>ŸÖŸáÿßÿ¨ŸÖ ŸÖÿ±ŸÉÿ≤Ÿä</option>
              <option value="RF" ${player.position === 'RF' ? 'selected' : ''}>ŸÖŸáÿßÿ¨ŸÖ ÿ£ŸäŸÖŸÜ</option>
              <option value="LF" ${player.position === 'LF' ? 'selected' : ''}>ŸÖŸáÿßÿ¨ŸÖ ÿ£Ÿäÿ≥ÿ±</option>
            </select>`
          }
          <input type="number" class="number-input" data-id="${player.id}" 
                 value="${player.number || ''}" placeholder="ÿ±ŸÇŸÖ ÿßŸÑŸÑÿßÿπÿ®" min="1" max="99">
          <button class="update-player-btn" data-id="${player.id}">ÿ™ÿ≠ÿØŸäÿ´</button>
        `;
        myPlayersList.appendChild(playerCard);
      });
    }

    // ---------- ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ----------
    function renderFormation() {
      // ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿπŸÜÿßÿµÿ±
      formationPositions.innerHTML = '';
      availablePlayers.innerHTML = '';
      
      // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ±
      const formationTemplate = [
        [{ id: 'gk1', position: 'GK', label: 'ÿ≠ÿßÿ±ÿ≥ ŸÖÿ±ŸÖŸâ' }],
        // ÿµŸÅ ÿßŸÑŸÖÿØÿßŸÅÿπŸäŸÜ
        Array.from({ length: currentFormationType.defenders }, (_, i) => {
          const positions = ['RB', 'CB', 'CB', 'CB', 'LB'];
          const labels = ['ŸÖÿØÿßŸÅÿπ ÿ£ŸäŸÖŸÜ', 'ŸÖÿØÿßŸÅÿπ ŸÖÿ±ŸÉÿ≤Ÿä', 'ŸÖÿØÿßŸÅÿπ ŸÖÿ±ŸÉÿ≤Ÿä', 'ŸÖÿØÿßŸÅÿπ ŸÖÿ±ŸÉÿ≤Ÿä', 'ŸÖÿØÿßŸÅÿπ ÿ£Ÿäÿ≥ÿ±'];
          return {
            id: `def${i+1}`,
            position: positions[i] || 'CB',
            label: labels[i] || `ŸÖÿØÿßŸÅÿπ ${i+1}`
          };
        }),
        // ÿµŸÅ ŸÑÿßÿπÿ®Ÿä ÿßŸÑŸàÿ≥ÿ∑
        Array.from({ length: currentFormationType.midfielders }, (_, i) => {
          const positions = ['RM', 'CM', 'CM', 'CM', 'LM'];
          const labels = ['Ÿàÿ≥ÿ∑ ÿ£ŸäŸÖŸÜ', 'Ÿàÿ≥ÿ∑ ŸÖŸÑÿπÿ®', 'Ÿàÿ≥ÿ∑ ŸÖŸÑÿπÿ®', 'Ÿàÿ≥ÿ∑ ŸÖŸÑÿπÿ®', 'Ÿàÿ≥ÿ∑ ÿ£Ÿäÿ≥ÿ±'];
          return {
            id: `mid${i+1}`,
            position: positions[i] || 'CM',
            label: labels[i] || `Ÿàÿ≥ÿ∑ ${i+1}`
          };
        }),
        // ÿµŸÅ ÿßŸÑŸÖŸáÿßÿ¨ŸÖŸäŸÜ
        Array.from({ length: currentFormationType.attackers }, (_, i) => {
          const positions = ['ST', 'ST', 'CF'];
          const labels = ['ŸÖŸáÿßÿ¨ŸÖ 1', 'ŸÖŸáÿßÿ¨ŸÖ 2', 'ŸÖŸáÿßÿ¨ŸÖ ŸÖÿ±ŸÉÿ≤Ÿä'];
          return {
            id: `att${i+1}`,
            position: positions[i] || 'ST',
            label: labels[i] || `ŸÖŸáÿßÿ¨ŸÖ ${i+1}`
          };
        })
      ];
      
      // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
      formationTemplate.forEach(row => {
        const rowElement = document.createElement('div');
        rowElement.className = 'formation-row';
        
        row.forEach(slot => {
          const slotElement = document.createElement('div');
          slotElement.className = 'position-slot';
          slotElement.dataset.position = slot.position;
          slotElement.dataset.slotId = slot.id; // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπÿ±ŸëŸÅ ŸÅÿ±ŸäÿØ ŸÑŸÑŸÅÿ™ÿ≠ÿ©
          
          // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ≥ŸÖŸäÿ© ÿßŸÑŸÖÿ±ŸÉÿ≤
          const labelElement = document.createElement('div');
          labelElement.className = 'position-label';
          labelElement.textContent = slot.label;
          slotElement.appendChild(labelElement);
          
          // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ŸÑÿßÿπÿ® ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑŸÖÿ±ŸÉÿ≤
          const playerInSlot = currentFormation[slot.id];
          if (playerInSlot) {
            const playerElement = createPlayerInSlot(playerInSlot);
            slotElement.appendChild(playerElement);
            slotElement.classList.add('filled');
          }
          
          // ÿ¨ÿπŸÑ ÿßŸÑŸÅÿ™ÿ≠ÿ© ŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ•ŸÅŸÑÿßÿ™
          slotElement.addEventListener('dragover', handleDragOver);
          slotElement.addEventListener('drop', handleDrop);
          
          rowElement.appendChild(slotElement);
        });
        
        formationPositions.appendChild(rowElement);
      });
      
      // ÿπÿ±ÿ∂ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑŸÖÿ™ÿßÿ≠ŸäŸÜ
      myPlayers.forEach(player => {
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ŸÖŸàÿ¨ŸàÿØŸãÿß ÿ®ÿßŸÑŸÅÿπŸÑ ŸÅŸä ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
        const isInFormation = Object.values(currentFormation).some(p => p && p.id === player.id);
        
        if (!isInFormation) {
          const playerElement = document.createElement('div');
          playerElement.className = 'available-player';
          playerElement.draggable = true;
          playerElement.dataset.playerId = player.id;
          
          playerElement.innerHTML = `
            <img src="${player.image}" alt="${player.name}">
            <div class="player-name">${player.name}</div>
          `;
          
          // ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ≥ÿ≠ÿ®
          playerElement.addEventListener('dragstart', handleDragStart);
          
          availablePlayers.appendChild(playerElement);
        }
      });
    }

    // ÿ•ŸÜÿ¥ÿßÿ° ÿπŸÜÿµÿ± ŸÑÿßÿπÿ® ŸÅŸä ŸÅÿ™ÿ≠ÿ© ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    function createPlayerInSlot(player) {
      const playerElement = document.createElement('div');
      playerElement.className = 'player-in-slot';
      playerElement.draggable = true;
      playerElement.dataset.playerId = player.id;
      
      playerElement.innerHTML = `
        <img src="${player.image}" alt="${player.name}">
        <div class="player-name">${player.name}</div>
      `;
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ≥ÿ≠ÿ®
      playerElement.addEventListener('dragstart', handleDragStart);
      
      return playerElement;
    }

    // ÿ™ÿ≠ÿØŸäÿ´ ŸÖŸÑÿÆÿµ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    function updateFormationSummary() {
      const totalPlayers = currentFormationType.defenders + currentFormationType.midfielders + currentFormationType.attackers;
      
      formationSummaryText.textContent = `${currentFormationType.defenders}-${currentFormationType.midfielders}-${currentFormationType.attackers}`;
      
      if (totalPlayers === 10) {
        formationValidation.innerHTML = '<span style="color: #4CAF50;">‚úì ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿµÿ≠Ÿäÿ≠ÿ© (10 ŸÑÿßÿπÿ®ŸäŸÜ + ÿ≠ÿßÿ±ÿ≥)</span>';
      } else if (totalPlayers < 10) {
        formationValidation.innerHTML = `<span style="color: #FFD700;">‚ö† ÿ™ÿ≠ÿ™ÿßÿ¨ ${10 - totalPlayers} ŸÑÿßÿπÿ®ŸäŸÜ ÿ•ÿ∂ÿßŸÅŸäŸäŸÜ</span>`;
      } else {
        formationValidation.innerHTML = `<span style="color: #FF5722;">‚úó ŸÑÿØŸäŸÉ ${totalPlayers - 10} ŸÑÿßÿπÿ®ŸäŸÜ ÿ•ÿ∂ÿßŸÅŸäŸäŸÜ</span>`;
      }
    }

    // ---------- ÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ•ŸÅŸÑÿßÿ™ ----------
    let draggedPlayer = null;

    function handleDragStart(e) {
      draggedPlayer = e.target;
      e.dataTransfer.setData('text/plain', e.target.dataset.playerId);
    }

    function handleDragOver(e) {
      e.preventDefault();
      e.currentTarget.classList.add('highlight');
    }

    function handleDrop(e) {
      e.preventDefault();
      e.currentTarget.classList.remove('highlight');
      
      const playerId = parseInt(e.dataTransfer.getData('text/plain'));
      const position = e.currentTarget.dataset.position;
      const slotId = e.currentTarget.dataset.slotId; // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖÿπÿ±ŸëŸÅ ÿßŸÑŸÅÿ™ÿ≠ÿ© ÿßŸÑŸÅÿ±ŸäÿØ
      
      // ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÑÿßÿπÿ®
      const player = myPlayers.find(p => p.id === playerId);
      
      if (player) {
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ŸÖŸàÿ¨ŸàÿØŸãÿß ÿ®ÿßŸÑŸÅÿπŸÑ ŸÅŸä ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
        const isAlreadyInFormation = Object.values(currentFormation).some(p => p && p.id === playerId);
        
        // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ŸÖŸàÿ¨ŸàÿØŸãÿß ÿ®ÿßŸÑŸÅÿπŸÑÿå ŸÇŸÖ ÿ®ÿ•ÿ≤ÿßŸÑÿ™Ÿá ŸÖŸÜ ŸÖŸàŸÇÿπŸá ÿßŸÑÿ≥ÿßÿ®ŸÇ
        if (isAlreadyInFormation) {
          for (const slot in currentFormation) {
            if (currentFormation[slot] && currentFormation[slot].id === playerId) {
              delete currentFormation[slot];
              break;
            }
          }
        }
        
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ£ŸÜ ŸÖÿ±ŸÉÿ≤ ÿ≠ÿ±ÿßÿ≥ÿ© ÿßŸÑŸÖÿ±ŸÖŸâ ŸÖÿÆÿµÿµ ŸÅŸÇÿ∑ ŸÑŸÑÿ≠ÿ±ÿßÿ≥
        if (position === 'GK' && player.position !== 'GK') {
          return;
        }
        
        // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÑÿßÿπÿ® ÿ•ŸÑŸâ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÖÿπÿ±ŸëŸÅ ÿßŸÑŸÅÿ™ÿ≠ÿ© ÿßŸÑŸÅÿ±ŸäÿØ
        currentFormation[slotId] = player;
        
        // ÿ•ÿπÿßÿØÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
        renderFormation();
        
        // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        saveGameData();
      }
    }

    // ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    function evaluateFormation() {
      let totalRating = 0;
      const totalPlayers = currentFormationType.defenders + currentFormationType.midfielders + currentFormationType.attackers;
      const positionPoints = 100 / (totalPlayers + 1); // +1 ŸÑŸÑÿ≠ÿßÿ±ÿ≥
      const details = [];
      
      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿµÿ≠Ÿäÿ≠ÿ© (10 ŸÑÿßÿπÿ®ŸäŸÜ + ÿ≠ÿßÿ±ÿ≥)
      if (totalPlayers !== 10) {
        return;
      }
      
      // ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖÿ±ÿßŸÉÿ≤ ŸÅŸä ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© (ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿπÿ±ŸëŸÅÿßÿ™ ÿßŸÑŸÅÿ±ŸäÿØÿ©)
      const positions = [
        { id: 'gk1', position: 'GK', label: 'ÿ≠ÿßÿ±ÿ≥ ŸÖÿ±ŸÖŸâ' }
      ];
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿØÿßŸÅÿπŸäŸÜ
      for (let i = 1; i <= currentFormationType.defenders; i++) {
        positions.push({
          id: `def${i}`,
          position: i === 1 ? 'RB' : i === currentFormationType.defenders ? 'LB' : 'CB',
          label: i === 1 ? 'ŸÖÿØÿßŸÅÿπ ÿ£ŸäŸÖŸÜ' : i === currentFormationType.defenders ? 'ŸÖÿØÿßŸÅÿπ ÿ£Ÿäÿ≥ÿ±' : `ŸÖÿØÿßŸÅÿπ ŸÖÿ±ŸÉÿ≤Ÿä ${i-1}`
        });
      }
      
      // ÿ•ÿ∂ÿßŸÅÿ© ŸÑÿßÿπÿ®Ÿä ÿßŸÑŸàÿ≥ÿ∑
      for (let i = 1; i <= currentFormationType.midfielders; i++) {
        positions.push({
          id: `mid${i}`,
          position: i === 1 ? 'RM' : i === currentFormationType.midfielders ? 'LM' : 'CM',
          label: i === 1 ? 'Ÿàÿ≥ÿ∑ ÿ£ŸäŸÖŸÜ' : i === currentFormationType.midfielders ? 'Ÿàÿ≥ÿ∑ ÿ£Ÿäÿ≥ÿ±' : `Ÿàÿ≥ÿ∑ ŸÖŸÑÿπÿ® ${i-1}`
        });
      }
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸáÿßÿ¨ŸÖŸäŸÜ
      for (let i = 1; i <= currentFormationType.attackers; i++) {
        positions.push({
          id: `att${i}`,
          position: 'ST',
          label: `ŸÖŸáÿßÿ¨ŸÖ ${i}`
        });
      }
      
      // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ™ŸÇŸäŸäŸÖ ŸÑŸÉŸÑ ŸÖÿ±ŸÉÿ≤
      positions.forEach(pos => {
        const player = currentFormation[pos.id];
        
        if (player) {
          // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ŸÅŸä ŸÖÿ±ŸÉÿ≤Ÿá ÿßŸÑŸÖŸÜÿßÿ≥ÿ®
          if (player.position === pos.position) {
            // Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÉÿßŸÖŸÑ ÿßŸÑŸÜŸÇÿßÿ∑ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ™ŸÇŸäŸäŸÖŸá
            const playerPoints = (player.rating / 100) * positionPoints;
            totalRating += playerPoints;
            details.push(`<p>${pos.label} - ${player.name}: ${playerPoints.toFixed(2)} (${player.rating})</p>`);
          } else {
            // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ŸÅŸä ŸÖÿ±ŸÉÿ≤ ÿ∫Ÿäÿ± ŸÖŸÜÿßÿ≥ÿ®ÿå Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÜÿµŸÅ ÿßŸÑŸÜŸÇÿßÿ∑
            const playerPoints = (player.rating / 100) * positionPoints * 0.5;
            totalRating += playerPoints;
            details.push(`<p>${pos.label} - ${player.name}: ${playerPoints.toFixed(2)} (${player.rating})</p>`);
          }
        } else {
          // ŸÖÿ±ŸÉÿ≤ ŸÅÿßÿ±ÿ∫
          details.push(`<p>${pos.label}: 0.00 (ŸÖÿ±ŸÉÿ≤ ŸÅÿßÿ±ÿ∫)</p>`);
        }
      });
      
      // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸÜŸáÿßÿ¶Ÿä
      const finalRating = Math.min(100, Math.round(totalRating));
      
      // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
      formationRating.textContent = `${finalRating}/100`;
      ratingDetails.innerHTML = details.join('');
      
      // ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©
      const filledPositions = Object.keys(currentFormation).length;
      if (filledPositions < 11) {
        ratingDetails.innerHTML += `<p style="color: #FFD700; margin-top: 15px;">ŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿ∫Ÿäÿ± ŸÖŸÉÿ™ŸÖŸÑÿ© (${filledPositions}/11 ŸÑÿßÿπÿ®)</p>`;
      }
      
      // ÿπÿ±ÿ∂ ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ™ŸÇŸäŸäŸÖ
      ratingResult.style.display = 'block';
    }

    // ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    function saveFormation() {
      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿµÿ≠Ÿäÿ≠ÿ© (10 ŸÑÿßÿπÿ®ŸäŸÜ + ÿ≠ÿßÿ±ÿ≥)
      const totalPlayers = currentFormationType.defenders + currentFormationType.midfielders + currentFormationType.attackers;
      
      if (totalPlayers !== 10) {
        return;
      }
      
      // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
      saveFormationCustomization();
      
      // ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
      localStorage.setItem('currentFormation', JSON.stringify(currentFormation));
      localStorage.setItem('currentFormationType', JSON.stringify(currentFormationType));
      
      // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©
      saveGameData();
    }

    // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    function resetFormation() {
      currentFormation = {};
      renderFormation();
      
      // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
      saveGameData();
    }

    // ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    function changeFormation(type, count) {
      currentFormationType[type] = parseInt(count);
      
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©
      currentFormation = {};
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸÜÿ¥ÿ∑ÿ©
      updateActiveButtons();
      
      // ÿ•ÿπÿßÿØÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
      renderFormation();
      updateFormationSummary();
      
      // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
      saveGameData();
    }

    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸÜÿ¥ÿ∑ÿ©
    function updateActiveButtons() {
      // ÿ™ÿ≠ÿØŸäÿ´ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸÖÿØÿßŸÅÿπŸäŸÜ
      document.querySelectorAll('#defenders-buttons .formation-btn').forEach(btn => {
        if (parseInt(btn.dataset.count) === currentFormationType.defenders) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿ£ÿ≤ÿ±ÿßÿ± ŸÑÿßÿπÿ®Ÿä ÿßŸÑŸàÿ≥ÿ∑
      document.querySelectorAll('#midfielders-buttons .formation-btn').forEach(btn => {
        if (parseInt(btn.dataset.count) === currentFormationType.midfielders) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });
      
      document.querySelectorAll('#attackers-buttons .formation-btn').forEach(btn => {
        if (parseInt(btn.dataset.count) === currentFormationType.attackers) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });
    }

    // ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿßÿπÿ®
    function updatePlayer(playerId, position, number) {
      const player = myPlayers.find(p => p.id === playerId);
      if (player) {
        // ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿ∫ŸäŸäÿ± ŸÖÿ±ŸÉÿ≤ ÿßŸÑÿ≠ÿßÿ±ÿ≥
        const isGoalkeeper = player.position === 'GK';
        if (isGoalkeeper && position && position !== 'GK') {
          return;
        }
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        if (position && !isGoalkeeper) {
          player.position = position;
        }
        
        if (number) {
          player.number = number;
        }
        
        // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        saveGameData();
      }
    }

    // ÿ¥ÿ±ÿßÿ° ŸÑÿßÿπÿ® ŸÖÿ®ÿßÿ¥ÿ±ÿ©
    function buyPlayer(playerId) {
      const player = players.find(p => p.id === playerId);

      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ŸÖŸÖŸÑŸàŸÉŸãÿß ÿ®ÿßŸÑŸÅÿπŸÑ
      const isOwned = myPlayers.some(p => p.id === playerId);
      if (isOwned) {
        return;
      }

      if (player) {
        if (wallet >= player.price) {
          const buyButton = document.querySelector(`.buy-button[data-id="${playerId}"]`);
          const itemCard = buyButton ? buyButton.closest('.item-card') : null;

          if (itemCard) {
            const walletCoin = document.getElementById('coins');
            const walletRect = walletCoin.getBoundingClientRect();
            const itemCardRect = itemCard.getBoundingClientRect();

            const numberOfCoins = 10; // ÿπÿØÿØ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ©
            const animationPromises = []; // ŸÑÿ™ÿ™ÿ®ÿπ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜŸäŸÖŸäÿ¥ŸÜÿßÿ™

            for (let i = 0; i < numberOfCoins; i++) {
              const flyingCoin = document.createElement('img');
              flyingCoin.src = walletCoin.src;
              flyingCoin.classList.add('flying-coin');
              
              // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿßÿ®ÿ™ÿØÿßÿ¶Ÿä ÿ≠ŸàŸÑ ÿπŸÖŸÑÿ© ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
              const startX = walletRect.left + (Math.random() * walletRect.width - walletRect.width / 2);
              const startY = walletRect.top + (Math.random() * walletRect.height - walletRect.height / 2);
              flyingCoin.style.left = `${startX}px`;
              flyingCoin.style.top = `${startY}px`;
              flyingCoin.style.opacity = '1'; // ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸáÿß ŸÖÿ±ÿ¶Ÿäÿ© ŸÅŸä ÿßŸÑÿ®ÿØÿßŸäÿ©
              document.body.appendChild(flyingCoin);

              // ÿ•ÿ¨ÿ®ÿßÿ± ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿØŸÅŸÇ ŸÑÿ∂ŸÖÿßŸÜ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ£ŸàŸÑŸäÿ© ŸÇÿ®ŸÑ ÿ®ÿØÿ° ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ
              flyingCoin.offsetWidth; 

              // ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿßŸÑŸáÿØŸÅ ŸÅŸä ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑŸÜÿßÿ≠Ÿäÿ© ÿßŸÑŸäŸÖŸÜŸâ ŸÑŸÑÿ¥ÿßÿ¥ÿ©
              const targetX = window.innerWidth - 100; // 100px ŸÖŸÜ ÿßŸÑÿ≠ÿßŸÅÿ© ÿßŸÑŸäŸÖŸÜŸâ ŸÑŸÑÿ¥ÿßÿ¥ÿ©
              const targetY = window.innerHeight / 2; // ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑÿ¥ÿßÿ¥ÿ© ÿπŸÖŸàÿØŸäŸãÿß
              
              const animationDelay = i * 80; // ÿ™ÿ£ÿÆŸäÿ± ÿ∑ŸÅŸäŸÅ ÿ®ŸäŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ™
              const animationDuration = 800 + (Math.random() * 200); // 0.8s ÿ•ŸÑŸâ 1s

              // ÿ™ÿ∑ÿ®ŸäŸÇ ÿÆÿµÿßÿ¶ÿµ ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ŸÖÿπ ÿ™ÿ£ÿÆŸäÿ± ŸàŸÖÿØÿ© ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ©
              flyingCoin.style.transition = `all ${animationDuration}ms ease-out ${animationDelay}ms`;

              // ÿ•ŸÜÿ¥ÿßÿ° ŸàÿπŸàÿØ ŸÑŸÉŸÑ ÿ£ŸÜŸäŸÖŸäÿ¥ŸÜ ÿπŸÖŸÑÿ©
              const coinAnimationPromise = new Promise(resolve => {
                const transitionEndHandler = () => {
                  flyingCoin.remove();
                  resolve();
                };
                flyingCoin.addEventListener('transitionend', transitionEndHandler, { once: true });

                // ÿ®ÿØŸäŸÑ: ŸÅŸä ÿ≠ÿßŸÑ ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ transitionend (ŸÖÿ´ŸÑÿßŸã ÿ•ÿ∞ÿß ÿ™ŸÖÿ™ ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿπŸÜÿµÿ± ÿ®ÿ≥ÿ±ÿπÿ© ŸÉÿ®Ÿäÿ±ÿ©)
                setTimeout(() => {
                  if (document.body.contains(flyingCoin)) { // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÑÿß Ÿäÿ≤ÿßŸÑ ŸÅŸä DOM
                    flyingCoin.remove();
                  }
                  resolve(); // ÿßŸÑÿ≠ŸÑ ŸÅŸä ÿ£Ÿä ÿ≠ÿßŸÑ ŸÑŸÖŸÜÿπ ÿßŸÑÿ™ÿπŸÑŸÇ
                }, animationDuration + animationDelay + 100); // ÿ•ÿ∂ÿßŸÅÿ© ÿπÿßÿ≤ŸÑ ÿµÿ∫Ÿäÿ±
              });
              animationPromises.push(coinAnimationPromise);

              // ÿ™ÿπŸäŸäŸÜ ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑŸáÿØŸÅ ŸÑÿ™ÿ≠ŸÅŸäÿ≤ ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ
              flyingCoin.style.left = `${targetX - flyingCoin.offsetWidth / 2}px`;
              flyingCoin.style.top = `${targetY - flyingCoin.offsetHeight / 2}px`;
              flyingCoin.style.transform = 'scale(0.5) rotate(360deg)'; // ÿ™ÿµÿ∫Ÿäÿ± ŸàÿØŸàÿ±ÿßŸÜ
              flyingCoin.style.opacity = '0'; // ÿ™ÿÆÿ™ŸÅŸä
            }

            // ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÉÿ™ŸÖÿßŸÑ ÿ¨ŸÖŸäÿπ ÿ£ŸÜŸäŸÖŸäÿ¥ŸÜÿßÿ™ ÿßŸÑÿπŸÖŸÑÿßÿ™
            Promise.all(animationPromises).then(() => {
              wallet -= player.price;
              updateWallet();
              myPlayers.push({
                ...player,
                number: null
              });
              
              // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
              playerStats.playersBought++;
              playerStats.totalCoinsSpent += player.price;
              
              renderPlayers(); // ÿ•ÿπÿßÿØÿ© ÿßŸÑÿπÿ±ÿ∂ ŸÑÿ•ÿ∏Ÿáÿßÿ± ÿ¥ÿßÿ±ÿ© "ÿ™ŸÖ ÿßŸÑÿ®Ÿäÿπ"
              
              // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
              saveGameData();
            });

          } else {
            // ÿ®ÿØŸäŸÑ ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ itemCard (ŸÑÿß ŸäŸÜÿ®ÿ∫Ÿä ÿ£ŸÜ Ÿäÿ≠ÿØÿ´ ÿ•ÿ∞ÿß ÿ™ŸÖ ÿßŸÑŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑÿ≤ÿ±)
            wallet -= player.price;
            updateWallet();
            myPlayers.push({
              ...player,
              number: null
            });
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
              playerStats.playersBought++;
              playerStats.totalCoinsSpent += player.price;
              
              renderPlayers();
              
              // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
              saveGameData();
          }
        }
      }
    }

    // ---------- ÿ•ÿØÿßÿ±ÿ© ÿ™ÿÆÿµŸäÿµ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ----------
    function saveFormationCustomization() {
      currentFormationName = formationNameInput.value || "ÿ™ÿ¥ŸÉŸäŸÑÿ™Ÿä";
      kitColor = kitColorInput.value;
      
      // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
      localStorage.setItem('formationName', currentFormationName);
      localStorage.setItem('formationImage', currentFormationImage);
      localStorage.setItem('kitColor', kitColor);
      
      updateFormationPreview();
      
      // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©
      saveGameData();
    }

    function loadFormationCustomization() {
      const savedName = localStorage.getItem('formationName');
      const savedImage = localStorage.getItem('formationImage');
      const savedColor = localStorage.getItem('kitColor');
      
      if (savedName) {
        currentFormationName = savedName;
        formationNameInput.value = savedName;
      }
      
      if (savedImage) {
        currentFormationImage = savedImage;
        formationPreviewImg.src = savedImage;
      }
      
      if (savedColor) {
        kitColor = savedColor;
        kitColorInput.value = savedColor;
        kitColorPreview.style.backgroundColor = savedColor;
      }
      
      updateFormationPreview();
    }

    function updateFormationPreview() {
      if (currentFormationImage) {
        formationPreviewImg.src = currentFormationImage;
        formationPreviewImg.style.display = 'block';
      } else {
        formationPreviewImg.style.display = 'none';
      }
      
      formationPreviewName.textContent = currentFormationName;
      kitColorPreview.style.backgroundColor = kitColor;
    }

    // ŸÖÿπÿßŸÑÿ¨ÿ© ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    function handleFormationImageUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          currentFormationImage = e.target.result;
          updateFormationPreview();
          saveFormationCustomization();
        };
        reader.readAsDataURL(file);
      }
    }

    // ---------- MATCH SCREEN FUNCTIONS ----------
    function updateUserClubInfo() {
      userClubName.textContent = currentFormationName || "ŸÜÿßÿØŸäŸÉ";
      
      if (currentFormationImage) {
        userClubLogo.src = currentFormationImage;
      } else {
        userClubLogo.src = "https://uploads.onecompiler.io/43wsb3ewn/43xpece7b/WhatsApp_Image_2025-09-24_at_9.38.31_PM-removebg-preview.png";
      }
    }

    function renderOpponentList() {
      opponentList.innerHTML = '';
      
      egyptianTeams.forEach(team => {
        const teamItem = document.createElement('div');
        teamItem.className = 'team-item';
        teamItem.dataset.teamId = team.id;
        
        teamItem.innerHTML = `
          <img src="${team.logo}" alt="${team.name}" class="team-logo-small">
          <span>${team.name}</span>
        `;
        
        teamItem.addEventListener('click', () => {
          // ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿØ ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑÿπŸÜÿßÿµÿ±
          document.querySelectorAll('.team-item').forEach(item => {
            item.classList.remove('selected');
          });
          
          // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿπŸÜÿµÿ± ÿßŸÑÿ≠ÿßŸÑŸä
          teamItem.classList.add('selected');
          
          // ÿ≠ŸÅÿ∏ ÿßŸÑÿÆÿµŸÖ ÿßŸÑŸÖÿÆÿ™ÿßÿ±
          selectedOpponent = team;
          opponentName.textContent = team.name;
          opponentLogo.src = team.logo;
          
          // ÿ™ŸÅÿπŸäŸÑ ÿ≤ÿ± ÿ®ÿØÿ° ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©
          startMatchBtn.disabled = false;
        });
        
        opponentList.appendChild(teamItem);
      });
    }

    // ---------- PLAYER GUESS GAME FUNCTIONS ----------
    function startNewPlayerGuessGame() {
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÑÿπÿ®ÿ©
      playerGuessGameState.attemptsLeft = 2;
      playerGuessGameState.hintsUsed = 0;
      playerGuessGameState.revealed = false;
      playerGuessGameState.gameActive = true;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      playerStats.playerGuess.played++;
      
      // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      saveGameData();
      
      // ÿßÿÆÿ™Ÿäÿßÿ± ŸÑÿßÿπÿ® ÿπÿ¥Ÿàÿßÿ¶Ÿä
      playerGuessGameState.currentPlayer = getRandomPlayer();
      
      // ÿ•ŸÜÿ¥ÿßÿ° ÿÆŸäÿßÿ±ÿßÿ™ (ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿµÿ≠Ÿäÿ≠ + 6 ŸÑÿßÿπÿ®ŸäŸÜ ÿπÿ¥Ÿàÿßÿ¶ŸäŸäŸÜ)
      playerGuessGameState.choices = generatePlayerChoices(playerGuessGameState.currentPlayer);
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàÿßÿ¨Ÿáÿ©
      updatePlayerGuessUI();
    }
    
    function getRandomPlayer() {
      // ÿßÿÆÿ™Ÿäÿßÿ± ŸÑÿßÿπÿ® ÿπÿ¥Ÿàÿßÿ¶Ÿä ŸÖŸÜ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ
      const randomIndex = Math.floor(Math.random() * players.length);
      return players[randomIndex];
    }
    
    function generatePlayerChoices(correctPlayer) {
      const choices = [correctPlayer];
      
      // ÿ•ÿ∂ÿßŸÅÿ© 6 ŸÑÿßÿπÿ®ŸäŸÜ ÿπÿ¥Ÿàÿßÿ¶ŸäŸäŸÜ ÿ¢ÿÆÿ±ŸäŸÜ (ŸÑŸäÿ≥Ÿàÿß ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿµÿ≠Ÿäÿ≠)
      while (choices.length < 7) {
        const randomPlayer = getRandomPlayer();
        if (!choices.some(p => p.id === randomPlayer.id)) {
          choices.push(randomPlayer);
        }
      }
      
      // ÿÆŸÑÿ∑ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿπÿ¥Ÿàÿßÿ¶ŸäÿßŸã
      return shuffleArray(choices);
    }
    
    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }
    
    function updatePlayerGuessUI() {
      // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©
      attemptsLeftEl.textContent = playerGuessGameState.attemptsLeft;
      hintsLeftEl.textContent = playerGuessGameState.maxHints - playerGuessGameState.hintsUsed;
      roundNumberEl.textContent = playerGuessGameState.round;
      playerGuessScoreEl.textContent = playerGuessGameState.score;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿµŸàÿ±ÿ© ÿßŸÑŸÑÿßÿπÿ®
      mysteryPlayerImage.src = playerGuessGameState.currentPlayer.image;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ∂ÿ®ÿßÿ®Ÿäÿ©
      if (playerGuessGameState.revealed) {
        blurOverlay.classList.add('revealed');
      } else {
        blurOverlay.classList.remove('revealed');
      }
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™
      updatePlayerHints();
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™
      updatePlayerChoices();
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ŸÑŸÖŸäÿ≠
      nextHintBtn.disabled = playerGuessGameState.hintsUsed >= playerGuessGameState.maxHints;
    }
    
    function updatePlayerHints() {
      hintsList.innerHTML = '';
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿ©
      const hints = generatePlayerHints(playerGuessGameState.currentPlayer);
      
      for (let i = 0; i < playerGuessGameState.hintsUsed; i++) {
        if (i < hints.length) {
          const hintItem = document.createElement('div');
          hintItem.className = 'hint-item';
          hintItem.innerHTML = `<span class="hint-number">${i + 1}.</span> <span class="hint-text">${hints[i]}</span>`;
          hintsList.appendChild(hintItem);
        }
      }
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ŸÖÿÆŸÅŸäÿ©
      for (let i = playerGuessGameState.hintsUsed; i < playerGuessGameState.maxHints; i++) {
        const hintItem = document.createElement('div');
        hintItem.className = 'hint-item';
        hintItem.innerHTML = `<span class="hint-number">${i + 1}.</span> <span class="hint-text">ÿ™ŸÑŸÖŸäÿ≠ ŸÖÿÆŸÅŸä (ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ≤ÿ± ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ ÿßŸÑÿ•ÿ∂ÿßŸÅŸä)</span>`;
        hintsList.appendChild(hintItem);
      }
    }
    
    function generatePlayerHints(player) {
      const hints = [];
      
      // ÿ™ŸÑŸÖŸäÿ≠ 1: ÿßŸÑŸÖÿ±ŸÉÿ≤
      const positionName = getPositionName(player.position);
      hints.push(`ŸäŸÑÿπÿ® ŸÅŸä ŸÖÿ±ŸÉÿ≤: ${positionName}`);
      
      // ÿ™ŸÑŸÖŸäÿ≠ 2: ÿßŸÑÿ™ŸÇŸäŸäŸÖ
      const ratingRange = getRatingRange(player.rating);
      hints.push(`ÿ™ŸÇŸäŸäŸÖŸá: ${ratingRange}`);
      
      // ÿ™ŸÑŸÖŸäÿ≠ 3: ÿßŸÑŸÜÿßÿØŸä
      if (player.club && player.club.image) {
        // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÜÿßÿØŸä ŸÖŸÜ ÿßŸÑÿµŸàÿ±ÿ©
        const clubNames = {
          "https://uploads.onecompiler.io/43wsb3ewn/43y9bdta9/images__6_-removebg-preview.png": "ÿßŸÑŸÜÿßÿØŸä ÿßŸÑÿ£ŸáŸÑŸä",
          "https://uploads.onecompiler.io/43wsb3ewn/43ycar8vh/images__7_-removebg-preview.png": "ŸÜÿßÿØŸä ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ"
        };
        const clubName = clubNames[player.club.image] || "ŸÜÿßÿØŸä ŸÖÿµÿ±Ÿä";
        hints.push(`ŸäŸÑÿπÿ® ŸÅŸä ŸÜÿßÿØŸä: ${clubName}`);
      }
      
      return hints;
    }
    
    function getRatingRange(rating) {
      if (rating >= 90) return "90+ (ŸÖŸÖÿ™ÿßÿ≤)";
      if (rating >= 80) return "80-89 (ÿ¨ŸäÿØ ÿ¨ÿØÿßŸã)";
      if (rating >= 70) return "70-79 (ÿ¨ŸäÿØ)";
      return "ÿ£ŸÇŸÑ ŸÖŸÜ 70 (ŸÖŸÇÿ®ŸàŸÑ)";
    }
    
    function updatePlayerChoices() {
      choicesContainer.innerHTML = '';
      
      playerGuessGameState.choices.forEach((player, index) => {
        const choiceBtn = document.createElement('button');
        choiceBtn.className = 'choice-btn';
        choiceBtn.textContent = player.name;
        choiceBtn.dataset.playerId = player.id;
        
        // ÿ•ÿ∞ÿß ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ÿå ŸÜÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©
        if (playerGuessGameState.attemptsLeft === 0 || !playerGuessGameState.gameActive) {
          if (player.id === playerGuessGameState.currentPlayer.id) {
            choiceBtn.classList.add('correct');
          }
        }
        
        choiceBtn.addEventListener('click', () => handlePlayerGuess(player));
        
        choicesContainer.appendChild(choiceBtn);
      });
    }
    
    function handlePlayerGuess(selectedPlayer) {
      if (!playerGuessGameState.gameActive || playerGuessGameState.attemptsLeft <= 0) {
        return;
      }
      
      playerGuessGameState.attemptsLeft--;
      
      if (selectedPlayer.id === playerGuessGameState.currentPlayer.id) {
        // ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ©
        playerGuessGameState.score += 20;
        playerGuessGameState.gameActive = false;
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
        playerStats.playerGuess.wins++;
        
        // ÿπÿ±ÿ∂ ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÅŸàÿ≤
        showPlayerGameResult(true);
        
        // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
        addCoinsToWallet(20);
        
        // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        saveGameData();
      } else {
        // ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿÆÿßÿ∑ÿ¶ÿ©
        if (playerGuessGameState.attemptsLeft === 0) {
          // ŸÜŸÅÿ∞ÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™
          playerGuessGameState.gameActive = false;
          showPlayerGameResult(false);
          
          // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
          saveGameData();
        }
        
        // ÿ™ÿπÿ∑Ÿäÿ® ÿßŸÑÿ≤ÿ± ÿßŸÑÿÆÿßÿ∑ÿ¶
        const choiceBtn = document.querySelector(`.choice-btn[data-player-id="${selectedPlayer.id}"]`);
        if (choiceBtn) {
          choiceBtn.classList.add('wrong');
          choiceBtn.classList.add('disabled');
          choiceBtn.disabled = true;
        }
      }
      
      updatePlayerGuessUI();
    }
    
    function showPlayerGameResult(isWin) {
      if (isWin) {
        resultTitle.textContent = "ÿ™ŸáÿßŸÜŸäŸÜÿß! üéâ";
        resultMessage.textContent = `ŸÑŸÇÿØ ÿÆŸÖŸÜÿ™ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠! ÿßŸÑŸÑÿßÿπÿ® ŸáŸà ${playerGuessGameState.currentPlayer.name}`;
        resultReward.textContent = "+20 ÿπŸÖŸÑÿ©";
      } else {
        resultTitle.textContent = "ŸÑŸÑÿ£ÿ≥ŸÅ! üòû";
        resultMessage.textContent = `ŸÜŸÅÿ∞ÿ™ ŸÖÿ≠ÿßŸàŸÑÿßÿ™ŸÉ! ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿµÿ≠Ÿäÿ≠ ŸáŸà ${playerGuessGameState.currentPlayer.name}`;
        resultReward.textContent = "+0 ÿπŸÖŸÑÿ©";
      }
      
      gameResult.classList.add('show');
    }
    
    function addCoinsToWallet(amount) {
      // ÿ•ŸÜÿ¥ÿßÿ° ÿπŸÖŸÑÿßÿ™ ŸÖÿ™ÿ≠ÿ±ŸÉÿ©
      const walletCoin = document.getElementById('coins');
      const walletRect = walletCoin.getBoundingClientRect();
      
      const numberOfCoins = 5; // ÿπÿØÿØ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ©
      const animationPromises = [];
      
      for (let i = 0; i < numberOfCoins; i++) {
        const flyingCoin = document.createElement('img');
        flyingCoin.src = walletCoin.src;
        flyingCoin.classList.add('flying-coin');
        
        // ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿπÿ¥Ÿàÿßÿ¶Ÿä ŸÅŸä ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑÿ¥ÿßÿ¥ÿ©
        const startX = window.innerWidth / 2 + (Math.random() * 200 - 100);
        const startY = window.innerHeight / 2 + (Math.random() * 200 - 100);
        flyingCoin.style.left = `${startX}px`;
        flyingCoin.style.top = `${startY}px`;
        flyingCoin.style.opacity = '1';
        document.body.appendChild(flyingCoin);
        
        flyingCoin.offsetWidth; // ÿ•ÿ¨ÿ®ÿßÿ± ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿØŸÅŸÇ
        
        // ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿßŸÑŸáÿØŸÅ (ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©)
        const targetX = walletRect.left + walletRect.width / 2;
        const targetY = walletRect.top + walletRect.height / 2;
        
        const animationDelay = i * 100;
        const animationDuration = 800 + (Math.random() * 200);
        
        flyingCoin.style.transition = `all ${animationDuration}ms ease-out ${animationDelay}ms`;
        
        const coinAnimationPromise = new Promise(resolve => {
          const transitionEndHandler = () => {
            flyingCoin.remove();
            resolve();
          };
          flyingCoin.addEventListener('transitionend', transitionEndHandler, { once: true });
          
          setTimeout(() => {
            if (document.body.contains(flyingCoin)) {
              flyingCoin.remove();
            }
            resolve();
          }, animationDuration + animationDelay + 100);
        });
        animationPromises.push(coinAnimationPromise);
        
        // ÿ™ÿ≠ÿ±ŸäŸÉ ÿßŸÑÿπŸÖŸÑÿ© ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
        flyingCoin.style.left = `${targetX - flyingCoin.offsetWidth / 2}px`;
        flyingCoin.style.top = `${targetY - flyingCoin.offsetHeight / 2}px`;
        flyingCoin.style.transform = 'scale(0.5) rotate(360deg)';
        flyingCoin.style.opacity = '0';
      }
      
      // ÿ≤ŸäÿßÿØÿ© ÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ÿ®ÿπÿØ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿ£ŸÜŸäŸÖŸäÿ¥ŸÜ
      Promise.all(animationPromises).then(() => {
        wallet += amount;
        playerStats.totalCoinsEarned += amount;
        updateWallet();
        updateStatsDisplay();
      });
    }
    
    function playerNextRound() {
      playerGuessGameState.round++;
      gameResult.classList.remove('show');
      startNewPlayerGuessGame();
    }
    
    function addPlayerHint() {
      if (playerGuessGameState.hintsUsed < playerGuessGameState.maxHints) {
        playerGuessGameState.hintsUsed++;
        updatePlayerGuessUI();
      }
    }

    // ---------- CLUB GUESS GAME FUNCTIONS ----------
    function startNewClubGuessGame() {
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÑÿπÿ®ÿ©
      clubGuessGameState.attemptsLeft = 1;
      clubGuessGameState.hintsUsed = 0;
      clubGuessGameState.revealed = false;
      clubGuessGameState.gameActive = true;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      playerStats.clubGuess.played++;
      
      // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      saveGameData();
      
      // ÿßÿÆÿ™Ÿäÿßÿ± ŸÜÿßÿØŸä ÿπÿ¥Ÿàÿßÿ¶Ÿä
      clubGuessGameState.currentClub = getRandomClub();
      
      // ÿ•ŸÜÿ¥ÿßÿ° ÿÆŸäÿßÿ±ÿßÿ™ (ÿßŸÑŸÜÿßÿØŸä ÿßŸÑÿµÿ≠Ÿäÿ≠ + 6 ÿ£ŸÜÿØŸäÿ© ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ©)
      clubGuessGameState.choices = generateClubChoices(clubGuessGameState.currentClub);
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàÿßÿ¨Ÿáÿ©
      updateClubGuessUI();
    }
    
    function getRandomClub() {
      // ÿßÿÆÿ™Ÿäÿßÿ± ŸÜÿßÿØŸä ÿπÿ¥Ÿàÿßÿ¶Ÿä ŸÖŸÜ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ŸÜÿØŸäÿ© ÿßŸÑŸÖÿµÿ±Ÿäÿ©
      const randomIndex = Math.floor(Math.random() * egyptianTeams.length);
      return egyptianTeams[randomIndex];
    }
    
    function generateClubChoices(correctClub) {
      const choices = [correctClub];
      
      // ÿ•ÿ∂ÿßŸÅÿ© 6 ÿ£ŸÜÿØŸäÿ© ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ÿ£ÿÆÿ±Ÿâ (ŸÑŸäÿ≥ÿ™ ÿßŸÑŸÜÿßÿØŸä ÿßŸÑÿµÿ≠Ÿäÿ≠)
      while (choices.length < 7) {
        const randomClub = getRandomClub();
        if (!choices.some(c => c.id === randomClub.id)) {
          choices.push(randomClub);
        }
      }
      
      // ÿÆŸÑÿ∑ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿπÿ¥Ÿàÿßÿ¶ŸäÿßŸã
      return shuffleArray(choices);
    }
    
    function updateClubGuessUI() {
      // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©
      clubAttemptsLeftEl.textContent = clubGuessGameState.attemptsLeft;
      clubHintsLeftEl.textContent = clubGuessGameState.maxHints - clubGuessGameState.hintsUsed;
      clubRoundNumberEl.textContent = clubGuessGameState.round;
      clubGuessScoreEl.textContent = clubGuessGameState.score;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿπÿßÿ± ÿßŸÑŸÜÿßÿØŸä
      mysteryClubLogo.src = clubGuessGameState.currentClub.logo;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ∂ÿ®ÿßÿ®Ÿäÿ©
      if (clubGuessGameState.revealed) {
        clubBlurOverlay.classList.add('revealed');
      } else {
        clubBlurOverlay.classList.remove('revealed');
      }
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™
      updateClubHints();
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™
      updateClubChoices();
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ŸÑŸÖŸäÿ≠
      clubNextHintBtn.disabled = clubGuessGameState.hintsUsed >= clubGuessGameState.maxHints;
    }
    
    function updateClubHints() {
      clubHintsList.innerHTML = '';
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿ©
      const hints = generateClubHints(clubGuessGameState.currentClub);
      
      for (let i = 0; i < clubGuessGameState.hintsUsed; i++) {
        if (i < hints.length) {
          const hintItem = document.createElement('div');
          hintItem.className = 'hint-item';
          hintItem.innerHTML = `<span class="hint-number">${i + 1}.</span> <span class="hint-text">${hints[i]}</span>`;
          clubHintsList.appendChild(hintItem);
        }
      }
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ŸÑŸÖŸäÿ≠ÿßÿ™ ŸÖÿÆŸÅŸäÿ©
      for (let i = clubGuessGameState.hintsUsed; i < clubGuessGameState.maxHints; i++) {
        const hintItem = document.createElement('div');
        hintItem.className = 'hint-item';
        hintItem.innerHTML = `<span class="hint-number">${i + 1}.</span> <span class="hint-text">ÿ™ŸÑŸÖŸäÿ≠ ŸÖÿÆŸÅŸä (ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ≤ÿ± ÿßŸÑÿ™ŸÑŸÖŸäÿ≠ ÿßŸÑÿ•ÿ∂ÿßŸÅŸä)</span>`;
        clubHintsList.appendChild(hintItem);
      }
    }
    
    function generateClubHints(club) {
      const hints = [];
      
      // ÿ™ŸÑŸÖŸäÿ≠ 1: ŸÑŸàŸÜ ÿßŸÑÿ∑ŸÇŸÖ
      const colorName = getColorName(club.color);
      hints.push(`ŸÑŸàŸÜ ÿßŸÑÿ∑ŸÇŸÖ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä: ${colorName}`);
      
      // ÿ™ŸÑŸÖŸäÿ≠ 2: ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©
      if (club.info) {
        hints.push(`ÿßŸÑŸÖÿØŸäŸÜÿ©: ${club.info.city}`);
        if (club.info.founded) {
          hints.push(`ÿ≥ŸÜÿ© ÿßŸÑÿ™ÿ£ÿ≥Ÿäÿ≥: ${club.info.founded}`);
        }
        if (club.info.nickname) {
          hints.push(`ÿßŸÑŸÑŸÇÿ®: ${club.info.nickname}`);
        }
      }
      
      return hints;
    }
    
    function getColorName(colorCode) {
      const colorMap = {
        "#ff0000": "ÿ£ÿ≠ŸÖÿ±",
        "#ffffff": "ÿ£ÿ®Ÿäÿ∂",
        "#0000ff": "ÿ£ÿ≤ÿ±ŸÇ",
        "#800080": "ÿ®ŸÜŸÅÿ≥ÿ¨Ÿä",
        "#008000": "ÿ£ÿÆÿ∂ÿ±",
        "#ffd700": "ÿ∞Ÿáÿ®Ÿä",
        "#ffa500": "ÿ®ÿ±ÿ™ŸÇÿßŸÑŸä"
      };
      return colorMap[colorCode] || colorCode;
    }
    
    function updateClubChoices() {
      clubChoicesContainer.innerHTML = '';
      
      clubGuessGameState.choices.forEach((club, index) => {
        const choiceBtn = document.createElement('button');
        choiceBtn.className = 'choice-btn';
        choiceBtn.textContent = club.name;
        choiceBtn.dataset.clubId = club.id;
        
        // ÿ•ÿ∞ÿß ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ÿå ŸÜÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©
        if (clubGuessGameState.attemptsLeft === 0 || !clubGuessGameState.gameActive) {
          if (club.id === clubGuessGameState.currentClub.id) {
            choiceBtn.classList.add('correct');
          }
        }
        
        choiceBtn.addEventListener('click', () => handleClubGuess(club));
        
        clubChoicesContainer.appendChild(choiceBtn);
      });
    }
    
    function handleClubGuess(selectedClub) {
      if (!clubGuessGameState.gameActive || clubGuessGameState.attemptsLeft <= 0) {
        return;
      }
      
      clubGuessGameState.attemptsLeft--;
      
      if (selectedClub.id === clubGuessGameState.currentClub.id) {
        // ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ©
        clubGuessGameState.score += 10;
        clubGuessGameState.gameActive = false;
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
        playerStats.clubGuess.wins++;
        
        // ÿπÿ±ÿ∂ ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÅŸàÿ≤
        showClubGameResult(true);
        
        // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
        addCoinsToWallet(10);
        
        // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        saveGameData();
      } else {
        // ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿÆÿßÿ∑ÿ¶ÿ©
        if (clubGuessGameState.attemptsLeft === 0) {
          // ŸÜŸÅÿ∞ÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™
          clubGuessGameState.gameActive = false;
          showClubGameResult(false);
          
          // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
          saveGameData();
        }
        
        // ÿ™ÿπÿ∑Ÿäÿ® ÿßŸÑÿ≤ÿ± ÿßŸÑÿÆÿßÿ∑ÿ¶
        const choiceBtn = document.querySelector(`.choice-btn[data-club-id="${selectedClub.id}"]`);
        if (choiceBtn) {
          choiceBtn.classList.add('wrong');
          choiceBtn.classList.add('disabled');
          choiceBtn.disabled = true;
        }
      }
      
      updateClubGuessUI();
    }
    
    function showClubGameResult(isWin) {
      if (isWin) {
        clubResultTitle.textContent = "ÿ™ŸáÿßŸÜŸäŸÜÿß! üéâ";
        clubResultMessage.textContent = `ŸÑŸÇÿØ ÿÆŸÖŸÜÿ™ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠! ÿßŸÑŸÜÿßÿØŸä ŸáŸà ${clubGuessGameState.currentClub.name}`;
        clubResultReward.textContent = "+10 ÿπŸÖŸÑÿ©";
      } else {
        clubResultTitle.textContent = "ŸÑŸÑÿ£ÿ≥ŸÅ! üòû";
        clubResultMessage.textContent = `ŸÜŸÅÿ∞ÿ™ ŸÖÿ≠ÿßŸàŸÑÿßÿ™ŸÉ! ÿßŸÑŸÜÿßÿØŸä ÿßŸÑÿµÿ≠Ÿäÿ≠ ŸáŸà ${clubGuessGameState.currentClub.name}`;
        clubResultReward.textContent = "+0 ÿπŸÖŸÑÿ©";
      }
      
      clubGameResult.classList.add('show');
    }
    
    function clubNextRound() {
      clubGuessGameState.round++;
      clubGameResult.classList.remove('show');
      startNewClubGuessGame();
    }
    
    function addClubHint() {
      if (clubGuessGameState.hintsUsed < clubGuessGameState.maxHints) {
        clubGuessGameState.hintsUsed++;
        updateClubGuessUI();
      }
    }

    // ---------- QUIZ GAME FUNCTIONS ----------
    function startNewQuizGame() {
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÑÿπÿ®ÿ©
      quizGameState.currentQuestionIndex = 0;
      quizGameState.score = 0;
      quizGameState.gameActive = true;
      quizGameState.answered = false;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      playerStats.quiz.played++;
      
      // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      saveGameData();
      
      // ÿÆŸÑÿ∑ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿπÿ¥Ÿàÿßÿ¶ŸäÿßŸã
      quizGameState.questions = [...quizQuestions].sort(() => Math.random() - 0.5);
      
      // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ≥ÿ§ÿßŸÑ ÿßŸÑÿ£ŸàŸÑ
      loadQuestion();
    }
    
    function loadQuestion() {
      if (quizGameState.currentQuestionIndex >= quizGameState.questions.length) {
        endQuizGame();
        return;
      }
      
      quizGameState.currentQuestion = quizGameState.questions[quizGameState.currentQuestionIndex];
      quizGameState.answered = false;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàÿßÿ¨Ÿáÿ©
      updateQuizUI();
    }
    
    function updateQuizUI() {
      // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©
      currentQuestionEl.textContent = `${quizGameState.currentQuestionIndex + 1}/${quizGameState.questions.length}`;
      quizScoreEl.textContent = quizGameState.score;
      quizDifficultyEl.textContent = quizGameState.currentQuestion.difficulty;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ŸÜÿµ ÿßŸÑÿ≥ÿ§ÿßŸÑ
      questionTextEl.textContent = quizGameState.currentQuestion.question;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™
      updateQuizChoices();
      
      // ÿ•ÿÆŸÅÿßÿ° ÿ≤ÿ± ÿßŸÑÿ≥ÿ§ÿßŸÑ ÿßŸÑÿ™ÿßŸÑŸä
      nextQuestionBtn.style.display = 'none';
    }
    
    function updateQuizChoices() {
      quizChoicesContainer.innerHTML = '';
      
      quizGameState.currentQuestion.choices.forEach((choice, index) => {
        const choiceBtn = document.createElement('button');
        choiceBtn.className = 'quiz-choice-btn';
        choiceBtn.textContent = choice;
        choiceBtn.dataset.choiceIndex = index;
        
        // ÿ•ÿ∞ÿß ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿ®ÿßŸÑŸÅÿπŸÑÿå ŸÜÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©
        if (quizGameState.answered) {
          if (index === quizGameState.currentQuestion.correct) {
            choiceBtn.classList.add('correct');
          } else if (choiceBtn.classList.contains('wrong')) {
            // ŸÜÿ™ÿ±ŸÉ ÿßŸÑÿ≤ÿ± ÿßŸÑÿÆÿßÿ∑ÿ¶ ŸÉŸÖÿß ŸáŸà
          }
        }
        
        choiceBtn.addEventListener('click', () => handleQuizAnswer(index));
        
        quizChoicesContainer.appendChild(choiceBtn);
      });
    }
    
    function handleQuizAnswer(selectedIndex) {
      if (quizGameState.answered || !quizGameState.gameActive) {
        return;
      }
      
      quizGameState.answered = true;
      const isCorrect = selectedIndex === quizGameState.currentQuestion.correct;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
      const choiceBtns = document.querySelectorAll('.quiz-choice-btn');
      choiceBtns.forEach((btn, index) => {
        if (index === quizGameState.currentQuestion.correct) {
          btn.classList.add('correct');
        } else if (index === selectedIndex && !isCorrect) {
          btn.classList.add('wrong');
        }
        btn.classList.add('disabled');
        btn.disabled = true;
      });
      
      if (isCorrect) {
        // ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ©
        quizGameState.score += 50;
        updateQuizUI();
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
        if (quizGameState.currentQuestionIndex === quizGameState.questions.length - 1) {
          playerStats.quiz.wins++;
          saveGameData();
        }
        
        // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
        addCoinsToWallet(50);
      }
      
      // ÿ•ÿ∏Ÿáÿßÿ± ÿ≤ÿ± ÿßŸÑÿ≥ÿ§ÿßŸÑ ÿßŸÑÿ™ÿßŸÑŸä
      nextQuestionBtn.style.display = 'block';
    }
    
    function nextQuestion() {
      quizGameState.currentQuestionIndex++;
      loadQuestion();
    }
    
    function endQuizGame() {
      quizGameState.gameActive = false;
      
      // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑÿ•ÿ∂ÿßŸÅŸäÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑŸÜŸÇÿßÿ∑
      const bonusCoins = Math.floor(quizGameState.score / 10);
      const totalCoins = quizGameState.score + bonusCoins;
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
      addCoinsToWallet(quizGameState.score);
      
      // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
      quizResultTitle.textContent = "ÿßŸÜÿ™ŸáŸâ ÿßŸÑŸÉŸàŸäÿ≤!";
      quizResultMessage.textContent = `ŸÑŸÇÿØ ÿ£ŸÜŸáŸäÿ™ ${quizGameState.questions.length} ÿ£ÿ≥ÿ¶ŸÑÿ©!`;
      quizResultReward.textContent = `+${quizGameState.score} ÿπŸÖŸÑÿ©`;
      quizGameResult.classList.add('show');
    }
    
    function startNewQuizRound() {
      quizGameResult.classList.remove('show');
      startNewQuizGame();
    }

    // ---------- SPEED CHALLENGE GAME FUNCTIONS ----------
    function startNewSpeedChallengeGame() {
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÑÿπÿ®ÿ©
      speedChallengeGameState.player1Pressed = false;
      speedChallengeGameState.player2Pressed = false;
      speedChallengeGameState.activePlayer = null;
      speedChallengeGameState.timer = 30;
      speedChallengeGameState.gameActive = true;
      speedChallengeGameState.answerSubmitted = false;
      speedChallengeGameState.firstPressTime = null;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      playerStats.speedChallenge.played++;
      
      // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      saveGameData();
      
      // ÿßÿÆÿ™Ÿäÿßÿ± ÿ≥ÿ§ÿßŸÑ ÿπÿ¥Ÿàÿßÿ¶Ÿä ŸÖŸÜ ÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑŸÉŸàŸäÿ≤
      const randomIndex = Math.floor(Math.random() * quizQuestions.length);
      speedChallengeGameState.currentQuestion = { ...quizQuestions[randomIndex] };
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàÿßÿ¨Ÿáÿ©
      updateSpeedChallengeUI();
      
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
      player1Button.classList.remove('pressed', 'disabled');
      player2Button.classList.remove('pressed', 'disabled');
      player1Button.disabled = false;
      player2Button.disabled = false;
      
      // ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ£ÿ≥ŸáŸÖ
      player1Arrow.style.display = 'none';
      player2Arrow.style.display = 'none';
      
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÖŸÜÿßÿ∑ŸÇ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ
      player1Area.classList.remove('active', 'disabled');
      player2Area.classList.remove('active', 'disabled');
      
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ≠ŸÇŸÑ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©
      answerInput.value = '';
      answerInput.disabled = true;
      submitAnswerBtn.disabled = true;
      
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≤ÿ± ÿßŸÑÿ™ÿßŸÑŸä
      nextRoundSpeedBtn.style.display = 'none';
      
      // ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
      speedResult.classList.remove('show');
    }
    
    function updateSpeedChallengeUI() {
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≥ÿ§ÿßŸÑ
      speedQuestionText.textContent = speedChallengeGameState.currentQuestion.question;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ§ŸÇÿ™
      timerDisplay.textContent = `‚è±Ô∏è ${speedChallengeGameState.timer} ÿ´ÿßŸÜŸäÿ©`;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿµŸàÿ±ÿ© ÿßŸÑÿ≤ÿ± ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸäŸá
      if (!speedChallengeGameState.player1Pressed) {
        player1Button.innerHTML = '<img src="https://image2url.com/r2/bucket1/images/1766630741241-c2c7031f-0205-4c12-aadc-540b465d1cc4.png" alt="ŸÑÿßÿπÿ® 1">';
      }
      
      if (!speedChallengeGameState.player2Pressed) {
        player2Button.innerHTML = '<img src="https://image2url.com/r2/bucket1/images/1766630741241-c2c7031f-0205-4c12-aadc-540b465d1cc4.png" alt="ŸÑÿßÿπÿ® 2">';
      }
    }
    
    function handlePlayerButtonClick(playerNumber) {
      if (!speedChallengeGameState.gameActive || speedChallengeGameState.answerSubmitted) {
        return;
      }
      
      // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÑÿßÿπÿ® ŸÇÿØ ÿ∂ÿ∫ÿ∑ ÿ®ÿßŸÑŸÅÿπŸÑÿå ŸÑÿß ÿ™ŸÅÿπŸÑ ÿ¥Ÿäÿ¶ÿßŸã
      if ((playerNumber === 1 && speedChallengeGameState.player1Pressed) ||
          (playerNumber === 2 && speedChallengeGameState.player2Pressed)) {
        return;
      }
      
      // ÿ™ÿ≥ÿ¨ŸäŸÑ ŸàŸÇÿ™ ÿßŸÑÿ∂ÿ∫ÿ∑ ÿßŸÑÿ£ŸàŸÑ
      if (!speedChallengeGameState.firstPressTime) {
        speedChallengeGameState.firstPressTime = Date.now();
      }
      
      // ÿ™ÿπÿ∑Ÿäÿ® ÿ≤ÿ± ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿ¢ÿÆÿ±
      if (playerNumber === 1) {
        speedChallengeGameState.player1Pressed = true;
        speedChallengeGameState.activePlayer = 1;
        player1Button.classList.add('pressed');
        player1Button.disabled = true;
        player2Button.classList.add('disabled');
        player2Button.disabled = true;
        
        // ÿ™ÿ∫ŸäŸäÿ± ÿµŸàÿ±ÿ© ÿ≤ÿ± ÿßŸÑŸÑÿßÿπÿ® 1 ÿ•ŸÑŸâ ÿµŸàÿ±ÿ© ŸÖÿÆÿ™ŸÑŸÅÿ©
        player1Button.innerHTML = '<img src="https://image2url.com/r2/bucket1/images/1766628602763-0a7beea9-8ef2-4ca0-83a5-87148556889f.png" alt="ŸÑÿßÿπÿ® 1">';
        
        // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ≥ŸáŸÖ ÿßŸÑŸÖÿ§ÿ¥ÿ±
        player1Arrow.style.display = 'block';
        
        // ÿ™ŸÅÿπŸäŸÑ ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÑÿßÿπÿ® 1
        player1Area.classList.add('active');
        player2Area.classList.add('disabled');
        
        // ÿ™ŸÅÿπŸäŸÑ ÿ≠ŸÇŸÑ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©
        answerInput.disabled = false;
        submitAnswerBtn.disabled = false;
        answerInput.focus();
      } else {
        speedChallengeGameState.player2Pressed = true;
        speedChallengeGameState.activePlayer = 2;
        player2Button.classList.add('pressed');
        player2Button.disabled = true;
        player1Button.classList.add('disabled');
        player1Button.disabled = true;
        
        // ÿ™ÿ∫ŸäŸäÿ± ÿµŸàÿ±ÿ© ÿ≤ÿ± ÿßŸÑŸÑÿßÿπÿ® 2 ÿ•ŸÑŸâ ÿµŸàÿ±ÿ© ŸÖÿÆÿ™ŸÑŸÅÿ©
        player2Button.innerHTML = '<img src="https://image2url.com/r2/bucket1/images/1766628602763-0a7beea9-8ef2-4ca0-83a5-87148556889f.png" alt="ŸÑÿßÿπÿ® 2">';
        
        // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ≥ŸáŸÖ ÿßŸÑŸÖÿ§ÿ¥ÿ±
        player2Arrow.style.display = 'block';
        
        // ÿ™ŸÅÿπŸäŸÑ ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÑÿßÿπÿ® 2
        player2Area.classList.add('active');
        player1Area.classList.add('disabled');
        
        // ÿ™ŸÅÿπŸäŸÑ ÿ≠ŸÇŸÑ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©
        answerInput.disabled = false;
        submitAnswerBtn.disabled = false;
        answerInput.focus();
      }
      
      // ÿ®ÿØÿ° ÿßŸÑŸÖÿ§ŸÇÿ™
      startSpeedChallengeTimer();
    }
    
    function startSpeedChallengeTimer() {
      // ÿ•ŸÑÿ∫ÿßÿ° ÿ£Ÿä ŸÖÿ§ŸÇÿ™ ÿ≥ÿßÿ®ŸÇ
      if (speedChallengeGameState.timerInterval) {
        clearInterval(speedChallengeGameState.timerInterval);
      }
      
      speedChallengeGameState.timerInterval = setInterval(() => {
        speedChallengeGameState.timer--;
        timerDisplay.textContent = `‚è±Ô∏è ${speedChallengeGameState.timer} ÿ´ÿßŸÜŸäÿ©`;
        
        if (speedChallengeGameState.timer <= 0) {
          clearInterval(speedChallengeGameState.timerInterval);
          
          // ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©ÿå ŸäŸÅŸàÿ≤ ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿ¢ÿÆÿ±
          if (!speedChallengeGameState.answerSubmitted) {
            handleTimeout();
          }
        }
      }, 1000);
    }
    
    function handleSubmitAnswer() {
      if (!speedChallengeGameState.gameActive || speedChallengeGameState.answerSubmitted) {
        return;
      }
      
      const answer = answerInput.value.trim();
      if (!answer) {
        return;
      }
      
      speedChallengeGameState.answerSubmitted = true;
      clearInterval(speedChallengeGameState.timerInterval);
      
      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©
      const correctAnswer = speedChallengeGameState.currentQuestion.choices[speedChallengeGameState.currentQuestion.correct];
      const isCorrect = answer.toLowerCase() === correctAnswer.toLowerCase();
      
      // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
      showSpeedChallengeResult(isCorrect);
      
      // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
      saveGameData();
    }
    
    function handleTimeout() {
      speedChallengeGameState.answerSubmitted = true;
      clearInterval(speedChallengeGameState.timerInterval);
      
      // ÿ•ÿ∞ÿß ÿßŸÜÿ™ŸáŸâ ÿßŸÑŸàŸÇÿ™ÿå ŸäŸÅŸàÿ≤ ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿ¢ÿÆÿ±
      const winner = speedChallengeGameState.activePlayer === 1 ? 2 : 1;
      showSpeedChallengeResult(false, winner);
      
      // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
      saveGameData();
    }
    
    function showSpeedChallengeResult(isCorrect, timeoutWinner = null) {
      const correctAnswer = speedChallengeGameState.currentQuestion.choices[speedChallengeGameState.currentQuestion.correct];
      
      if (isCorrect) {
        // ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ© - ŸäŸÅŸàÿ≤ ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿ∞Ÿä ÿ£ÿ¨ÿßÿ®
        const winner = speedChallengeGameState.activePlayer;
        speedResultTitle.textContent = "ÿ™ŸáÿßŸÜŸäŸÜÿß! üéâ";
        speedResultWinner.textContent = `ÿßŸÑŸÑÿßÿπÿ® ${winner} ŸäŸÅŸàÿ≤!`;
        speedResultDetails.textContent = `ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©: ${correctAnswer}`;
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
        playerStats.speedChallenge.wins++;
      } else if (timeoutWinner) {
        // ÿßŸÜÿ™ŸáŸâ ÿßŸÑŸàŸÇÿ™ - ŸäŸÅŸàÿ≤ ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿ¢ÿÆÿ±
        speedResultTitle.textContent = "ÿßŸÜÿ™ŸáŸâ ÿßŸÑŸàŸÇÿ™! ‚è∞";
        speedResultWinner.textContent = `ÿßŸÑŸÑÿßÿπÿ® ${timeoutWinner} ŸäŸÅŸàÿ≤!`;
        speedResultDetails.textContent = `ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©: ${correctAnswer}`;
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
        playerStats.speedChallenge.wins++;
      } else {
        // ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿÆÿßÿ∑ÿ¶ÿ© - ŸäŸÅŸàÿ≤ ÿßŸÑŸÑÿßÿπÿ® ÿßŸÑÿ¢ÿÆÿ±
        const winner = speedChallengeGameState.activePlayer === 1 ? 2 : 1;
        speedResultTitle.textContent = "ÿ•ÿ¨ÿßÿ®ÿ© ÿÆÿßÿ∑ÿ¶ÿ©! ‚ùå";
        speedResultWinner.textContent = `ÿßŸÑŸÑÿßÿπÿ® ${winner} ŸäŸÅŸàÿ≤!`;
        speedResultDetails.textContent = `ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©: ${correctAnswer}`;
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
        playerStats.speedChallenge.wins++;
      }
      
      speedResult.classList.add('show');
      nextRoundSpeedBtn.style.display = 'block';
    }
    
    function nextSpeedRound() {
      speedResult.classList.remove('show');
      startNewSpeedChallengeGame();
    }

    // ---------- GAME LOGIC ----------
    let matchPaused = false;
    let matchTimeLeft = 90; // 90 seconds
    let matchScoreA = 0, matchScoreB = 0; // A = player (ÿ£ÿ≥ŸÅŸÑ), B = AI (ÿ£ÿπŸÑŸâ)
    let matchInterval;
    
    function startMatch() {
      if (!selectedOpponent) return;
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      playerStats.matches.played++;
      
      // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
      saveGameData();
      
      // ÿ•ÿÆŸÅÿßÿ° Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ Ÿàÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÑÿπÿ®ÿ©
      document.querySelector('.match-controls').style.display = 'none';
      startMatchBtn.style.display = 'none';
      matchGameContainer.style.display = 'flex';
      
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÑÿπÿ®ÿ©
      resetMatch();
      
      // ÿ®ÿØÿ° ÿßŸÑŸÑÿπÿ®ÿ©
      initMatchGame();
    }
    
    function resetMatch() {
      matchTimeLeft = 90;
      matchScoreA = 0;
      matchScoreB = 0;
      updateMatchHUD();
      matchResult.classList.remove('show');
    }
    
    function updateMatchHUD() {
      liveScore.textContent = `${matchScoreA} - ${matchScoreB}`;
      const mm = String(Math.floor(matchTimeLeft/60)).padStart(2,'0');
      const ss = String(Math.floor(matchTimeLeft%60)).padStart(2,'0');
      liveTime.textContent = mm + ':' + ss;
    }
    
    function endMatch() {
      clearInterval(matchInterval);
      
      // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ©
      const goalDifference = matchScoreA - matchScoreB;
      let reward = 0;
      
      if (goalDifference > 0) {
        reward = goalDifference * 100;
        wallet += reward;
        playerStats.totalCoinsEarned += reward;
        playerStats.matches.wins++;
        updateWallet();
        updateStatsDisplay();
        
        // ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        saveGameData();
      }
      
      // ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
      matchResultTitle.textContent = goalDifference > 0 ? "ŸÅŸàÿ≤!" : goalDifference < 0 ? "ÿÆÿ≥ÿßÿ±ÿ©!" : "ÿ™ÿπÿßÿØŸÑ!";
      matchResultScore.textContent = `${matchScoreA} - ${matchScoreB}`;
      matchReward.textContent = reward > 0 ? `+${reward} ÿπŸÖŸÑÿ©` : "+0 ÿπŸÖŸÑÿ©";
      matchResult.classList.add('show');
    }
    
    function initMatchGame() {
      const canvas = matchCanvas;
      const ctx = canvas.getContext('2d');
      const W = canvas.width = canvas.offsetWidth;
      const H = canvas.height = canvas.offsetHeight;
      
      function clamp(v,a,b){return Math.max(a,Math.min(b,v));}
      
      class Striker{
        constructor(x,y,r,color){ 
          this.x=x; 
          this.y=y; 
          this.r=r; 
          this.color=color; 
          this.speed=3; // ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ≥ÿ±ÿπÿ© ŸÖŸÜ 4 ÿ•ŸÑŸâ 3
          this.moveTo=null; 
          this.vx = 0;
          this.vy = 0;
        }
        draw(){ 
          ctx.beginPath(); 
          ctx.arc(this.x,this.y,this.r,0,Math.PI*2); 
          ctx.fillStyle=this.color; 
          ctx.fill(); 
          ctx.lineWidth=2; 
          ctx.strokeStyle='#053115'; 
          ctx.stroke(); 
        }
        update() {
          // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸàŸÇÿπ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ≥ÿ±ÿπÿ©
          this.x += this.vx;
          this.y += this.vy;
          
          // ÿ™ÿÆŸÅŸäŸÅ ÿßŸÑÿ≥ÿ±ÿπÿ© (ÿßÿ≠ÿ™ŸÉÿßŸÉ)
          this.vx *= 0.95;
          this.vy *= 0.95;
          
          // ÿ≠ÿØŸàÿØ ÿßŸÑŸÑÿßÿπÿ®
          const buffer = 5; // ŸÖÿ≥ÿßŸÅÿ© ŸÖŸÜ ÿßŸÑÿ≠ŸàÿßŸÅ
          if(this.x < this.r + buffer) { 
            this.x = this.r + buffer; 
            this.vx = Math.abs(this.vx) * 0.8; // ÿßÿ±ÿ™ÿØÿßÿØ ŸÇŸàŸä
          }
          if(this.x > W - this.r - buffer) { 
            this.x = W - this.r - buffer; 
            this.vx = -Math.abs(this.vx) * 0.8;
          }
          if(this.y < this.r + buffer) { 
            this.y = this.r + buffer; 
            this.vy = Math.abs(this.vy) * 0.8;
          }
          if(this.y > H - this.r - buffer) { 
            this.y = H - this.r - buffer; 
            this.vy = -Math.abs(this.vy) * 0.8;
          }
        }
      }
      
      class Puck{ 
        constructor(x,y){ 
          this.x=x; 
          this.y=y; 
          this.r=10; 
          this.vx=0; 
          this.vy=0; 
          this.stuckTimer = 0; // ŸÖÿ§ÿ¥ÿ± ŸÑŸÑÿ™ÿπŸÑŸÇ
        }
        update(){ 
          this.x += this.vx; 
          this.y += this.vy; 
          this.vx *= 0.99; // ÿ™ÿÆŸÅŸäŸÅ ÿ≥ÿ±ÿπÿ© ÿßŸÑŸÉÿ±ÿ©
          this.vy *= 0.99;
          
          // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿπŸÑŸÇ
          if (Math.abs(this.vx) < 0.1 && Math.abs(this.vy) < 0.1) {
            this.stuckTimer++;
            if (this.stuckTimer > 60) { // ÿ•ÿ∞ÿß ÿ™ÿπŸÑŸÇÿ™ ŸÑŸÖÿØÿ© ÿ´ÿßŸÜŸäÿ©
              // ÿ•ÿπÿ∑ÿßÿ° ÿØŸÅÿπÿ© ÿπÿ¥Ÿàÿßÿ¶Ÿäÿ© ŸÑŸÑÿ™ÿ≠ÿ±ÿ±
              this.vx = (Math.random() - 0.5) * 3;
              this.vy = (Math.random() - 0.5) * 3;
              this.stuckTimer = 0;
            }
          } else {
            this.stuckTimer = 0;
          }
          
          // ÿ≠ÿØŸàÿØ ŸÖÿπ ÿßÿ±ÿ™ÿØÿßÿØ ŸÇŸàŸä ŸÑŸÖŸÜÿπ ÿßŸÑÿ™ÿπŸÑŸÇ
          const buffer = 5;
          if(this.x < this.r + buffer){ 
            this.x = this.r + buffer; 
            this.vx = Math.abs(this.vx) * 0.9 + 0.5; // ÿ•ÿ∂ÿßŸÅÿ© ÿØŸÅÿπÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©
          }
          if(this.x > W - this.r - buffer){ 
            this.x = W - this.r - buffer; 
            this.vx = -Math.abs(this.vx) * 0.9 - 0.5;
          }
          if(this.y < this.r + buffer){ 
            this.y = this.r + buffer; 
            this.vy = Math.abs(this.vy) * 0.9 + 0.5;
          }
          if(this.y > H - this.r - buffer){ 
            this.y = H - this.r - buffer; 
            this.vy = -Math.abs(this.vy) * 0.9 - 0.5;
          }
        }
        draw(){ 
          ctx.beginPath(); 
          ctx.arc(this.x,this.y,this.r,0,Math.PI*2); 
          ctx.fillStyle='#f5f5f5'; 
          ctx.fill(); 
          ctx.lineWidth=1.2; 
          ctx.strokeStyle='#222'; 
          ctx.stroke(); 
        }
      }
      
      // ÿπŸÜÿßÿµÿ± ÿßŸÑŸÑÿπÿ®ÿ© - ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ£ŸÑŸàÿßŸÜ ÿßŸÑŸÖÿÆÿ™ÿßÿ±ÿ©
      const player = new Striker(W/2, H - 70, 24, kitColor); // ŸÑŸàŸÜ ÿßŸÑÿ∑ŸÇŸÖ ÿßŸÑŸÖÿÆÿ™ÿßÿ±
      const opponentColor = selectedOpponent ? selectedOpponent.color : '#ffd166'; // ŸÑŸàŸÜ ÿßŸÑÿ∑ŸÇŸÖ ÿßŸÑÿ≠ŸÇŸäŸÇŸä ŸÑŸÑÿÆÿµŸÖ
      const ai = new Striker(W/2, 70, 26, opponentColor);
      const puck = new Puck(W/2, H/2);
      
      // ŸÑŸÖÿ≥/ŸÖÿßŸàÿ≥ ÿ™ÿ≠ŸÉŸÖ
      let dragging = false;
      function getPos(e){ 
        const rect = canvas.getBoundingClientRect(); 
        if(e.touches && e.touches[0]){ 
          return {
            x:(e.touches[0].clientX-rect.left)*(canvas.width/rect.width), 
            y:(e.touches[0].clientY-rect.top)*(canvas.height/rect.height)
          }; 
        } else if(e.clientX !== undefined){ 
          return {
            x:(e.clientX-rect.left)*(canvas.width/rect.width), 
            y:(e.clientY-rect.top)*(canvas.height/rect.height)
          }; 
        } 
        return null; 
      }
      
      function start(e){ 
        e.preventDefault(); 
        const p = getPos(e); 
        if(!p) return; 
        const d = Math.hypot(p.x - player.x, p.y - player.y); 
        if(d < player.r + 20){ 
          dragging = true; 
        } else { 
          player.moveTo = {
            x: clamp(p.x, player.r + 10, W - player.r - 10), 
            y: clamp(p.y, H/2 + 30, H - player.r - 10)
          }; 
        }
      }
      
      function move(e){ 
        if(!dragging) return; 
        const p = getPos(e); 
        if(!p) return; 
        player.x = clamp(p.x, player.r + 10, W - player.r - 10); 
        player.y = clamp(p.y, H/2 + 30, H - player.r - 10); 
      }
      
      function end(e){ dragging = false; }
      
      canvas.addEventListener('touchstart', start, {passive:false}); 
      canvas.addEventListener('touchmove', move, {passive:false}); 
      canvas.addEventListener('touchend', end);
      canvas.addEventListener('mousedown', start); 
      window.addEventListener('mousemove', move); 
      window.addEventListener('mouseup', end);
      
      // ŸÅŸäÿ≤Ÿäÿßÿ° ÿ™ÿµÿßÿØŸÖ ÿ®ŸäŸÜ ÿßŸÑŸÇÿ±ÿµ ŸàÿßŸÑŸÖÿ∂ÿ±ÿ®
      function collideStrikerPuck(s){ 
        const dx = puck.x - s.x, dy = puck.y - s.y; 
        const d = Math.hypot(dx,dy); 
        if(d < s.r + puck.r){ 
          const nx = dx/d, ny = dy/d; // ÿØŸÅÿπ ÿßŸÑŸÇÿ±ÿµ
          
          // move puck out of overlap
          const overlap = s.r + puck.r - d + 0.5; 
          puck.x += nx * overlap; 
          puck.y += ny * overlap; 
          
          // set velocity relative to striker motion
          let svx = 0, svy = 0;
          if(s === player && dragging){ 
            svx = (player.vx || 0) * 0.5;
            svy = (player.vy || 0) * 0.5;
          } else if(s.moveTo){ 
            svx = (s.moveTo.x - s.x) * 0.05; // ÿ™ŸÇŸÑŸäŸÑ ÿ™ÿ£ÿ´Ÿäÿ± AI
            svy = (s.moveTo.y - s.y) * 0.05;
          }
          
          // ÿ≥ÿ±ÿπÿ© ÿßŸÑŸÉÿ±ÿ© ÿ®ÿπÿØ ÿßŸÑÿßÿµÿ∑ÿØÿßŸÖ (ÿ£ÿ®ÿ∑ÿ£)
          puck.vx = nx * 3 + svx + (Math.random()-0.5)*0.3; 
          puck.vy = ny * 3 + svy + (Math.random()-0.5)*0.3;
        }
      }
      
      // AI ÿ£ÿ®ÿ∑ÿ£ Ÿàÿ£ŸÉÿ´ÿ± ÿ∞ŸÉÿßÿ°Ÿã
      function aiLogic(dt){ 
        // ÿ™ÿ≠ÿØŸäÿØ ŸáÿØŸÅ AI ŸÖÿπ ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ≠ŸàÿßŸÅ
        const targetX = clamp(puck.x, ai.r + 15, W - ai.r - 15);
        const targetY = clamp(Math.min(puck.y, H/2 - 40), ai.r + 15, H/2 - 25);
        
        // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ≥ÿßŸÅÿ© ŸàÿßŸÑÿßÿ™ÿ¨ÿßŸá
        const dx = targetX - ai.x, dy = targetY - ai.y; 
        const dist = Math.hypot(dx,dy) || 1; 
        
        // ÿ≥ÿ±ÿπÿ© AI (ÿ£ÿ®ÿ∑ÿ£ ÿ®ÿ´ŸÑÿßÿ´ ŸÖÿ±ÿßÿ™ ŸÖŸÜ ÿßŸÑŸÉÿ±ÿ©)
        const speed = 0.8; // ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ≥ÿ±ÿπÿ© ÿ®ÿ¥ŸÉŸÑ ŸÉÿ®Ÿäÿ±
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿ≥ÿ±ÿπÿ© AI
        ai.vx = (dx/dist) * Math.min(speed, dist) * 0.5;
        ai.vy = (dy/dist) * Math.min(speed, dist) * 0.5;
        
        // ÿ™ÿ≠ÿØŸäÿ´ ŸÖŸàŸÇÿπ AI ŸÖÿπ ÿßŸÑÿ≠ÿØŸàÿØ
        ai.x = clamp(ai.x + ai.vx, ai.r + 10, W - ai.r - 10);
        ai.y = clamp(ai.y + ai.vy, ai.r + 10, H/2 - 20);
        
        // ŸÖŸÜÿπ AI ŸÖŸÜ ÿßŸÑÿ™ÿπŸÑŸÇ ŸÅŸä ÿßŸÑÿ≤ŸàÿßŸäÿß
        if (ai.x < ai.r + 20 && ai.y < ai.r + 20) {
          ai.vx = 1;
          ai.vy = 1;
        }
        if (ai.x > W - ai.r - 20 && ai.y < ai.r + 20) {
          ai.vx = -1;
          ai.vy = 1;
        }
      }
      
      function checkGoal(){
        const goalWidth = 110;
        const goalHeight = 24;
        
        // top goal
        if(puck.y - puck.r <= goalHeight && puck.x >= W/2 - goalWidth/2 && puck.x <= W/2 + goalWidth/2){
          matchScoreA++; 
          onGoal();
        }
        
        // bottom goal
        if(puck.y + puck.r >= H - goalHeight && puck.x >= W/2 - goalWidth/2 && puck.x <= W/2 + goalWidth/2){
          matchScoreB++; 
          onGoal();
        }
      }
      
      function onGoal(){ 
        puck.x = W/2; 
        puck.y = H/2; 
        puck.vx = 0; 
        puck.vy = 0; 
        player.x = W/2; 
        player.y = H - 70; 
        ai.x = W/2; 
        ai.y = 70; 
        updateMatchHUD(); 
      }
      
      // ÿ±ÿ≥ŸÖ ŸÖŸÑÿπÿ® ŸÉÿ±ÿ© ŸÇÿØŸÖ ŸÑŸÉŸÜ ÿ®ÿ≥Ÿäÿ∑
      function drawField(){ 
        // ÿ£ÿ±ÿ∂Ÿäÿ©
        const stripes = 8; 
        for(let i=0;i<stripes;i++){ 
          ctx.fillStyle = i%2? '#0d7a3f' : '#0b6b2f'; 
          ctx.fillRect(0, i*(H/stripes), W, H/stripes); 
        }
        
        // ÿ≠ÿØŸàÿØ ÿßŸÑŸÖŸÑÿπÿ®
        ctx.strokeStyle = '#fff'; 
        ctx.lineWidth = 3; 
        ctx.strokeRect(6,6,W-12,H-12);
        
        // ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑŸÖŸÑÿπÿ® (ÿÆÿ∑ ÿ£ŸÅŸÇŸä ŸÑŸÑŸÜÿµŸÅ)
        ctx.beginPath();
        ctx.moveTo(6, H/2);
        ctx.lineTo(W - 6, H/2);
        ctx.stroke();
        
        ctx.beginPath(); 
        ctx.arc(W/2,H/2,46,0,Math.PI*2); 
        ctx.stroke();
        
        // ŸÖÿ±ŸÖŸâ ÿπŸÑŸàŸä Ÿàÿ≥ŸÅŸÑŸä (ŸÖÿ≥ÿ™ÿ∑ŸäŸÑ ÿ®ÿ≥Ÿäÿ∑)
        ctx.fillStyle = 'rgba(255,255,255,0.06)'; 
        ctx.fillRect(W/2 - 55, 0, 110, 24); 
        ctx.fillRect(W/2 - 55, H-24, 110, 24);
        
        // ÿπŸÑÿßŸÖÿßÿ™ ÿ¨ÿ≤ÿßÿ° ÿ®ÿ≥Ÿäÿ∑ÿ©
        ctx.strokeStyle = '#fff'; 
        ctx.lineWidth = 1.5; 
        ctx.strokeRect(W/2 - 55, 6, 110, 12); 
        ctx.strokeRect(W/2 - 55, H-18, 110, 12);
      }
      
      function update(dt){ 
        if(matchPaused) return; 
        
        // AI
        aiLogic(dt);
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ
        player.update();
        ai.update();
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÉÿ±ÿ©
        puck.update(); 
        
        // ÿ™ÿµÿßÿØŸÖ ŸÖÿπ ÿßŸÑŸÖÿ∂ÿßÿ±ÿ®
        collideStrikerPuck(player); 
        collideStrikerPuck(ai);
        
        // ÿßÿµÿ∑ÿØÿßŸÖÿßÿ™ ÿ®ÿ≥Ÿäÿ∑ÿ©: ÿ™ŸÇŸÑŸÑ ÿßŸÑÿ≥ÿ±ÿπÿ© ÿßÿ∞ÿß ŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜ ÿßŸÑÿ≠ŸàÿßŸÅ
        checkGoal(); 
        
        // ŸàŸÇÿ™
        matchTimeLeft -= dt; 
        if(matchTimeLeft <= 0){ 
          matchTimeLeft = 0; 
          matchPaused = true; 
          endMatch(); 
        }
      }
      
      function draw(){ 
        ctx.clearRect(0,0,W,H); 
        drawField(); 
        
        puck.draw(); 
        ai.draw(); 
        player.draw(); 
        
        // HUD
        updateMatchHUD(); 
      }
      
      let last = performance.now(); 
      function loop(now){ 
        const dt = Math.min(0.05, (now - last)/1000); 
        last = now; 
        if (!matchPaused) {
          update(dt); 
          draw(); 
        }
        requestAnimationFrame(loop); 
      } 
      requestAnimationFrame(loop);
      
      // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÑÿπÿ®ÿ©
      matchRestartBtn.addEventListener('click', ()=>{ 
        matchScoreA=0; 
        matchScoreB=0; 
        matchTimeLeft=90; 
        matchPaused=false; 
        onGoal(); 
        matchResult.classList.remove('show');
      });
      
      // ÿ•ŸäŸÇÿßŸÅ/ÿßÿ≥ÿ™ÿ¶ŸÜÿßŸÅ ÿßŸÑŸÑÿπÿ®ÿ©
      matchPauseBtn.addEventListener('click', ()=>{ 
        matchPaused = !matchPaused; 
        matchPauseBtn.textContent = matchPaused? 'ÿßÿ≥ÿ™ÿ¶ŸÜÿßŸÅ' : 'ÿ•ŸäŸÇÿßŸÅ'; 
      });
      
      // ÿ®ÿØÿ° ÿßŸÑŸÖÿ§ŸÇÿ™
      matchInterval = setInterval(() => {
        if (!matchPaused && matchTimeLeft > 0) {
          matchTimeLeft--;
          if (matchTimeLeft <= 0) {
            matchTimeLeft = 0;
            matchPaused = true;
            endMatch();
          }
        }
      }, 1000);
    }

    // ---------- SEARCH ----------
    function applySearch(term) {
      const q = term.trim().toLowerCase();
      filteredPlayers = q
        ? players.filter(p => p.name.toLowerCase().includes(q))
        : [...players];
      renderPlayers();
    }

    // ---------- WALLET ----------
    function updateWallet() {
      walletAmount.textContent = wallet;
    }

    // ---------- INITIALIZATION ----------
    function init() {
      // ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ© ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
      loadGameData();
      
      // ÿ•ÿπÿØÿßÿØ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä
      setupAutoSave();
      
      // ÿπÿ±ÿ∂ ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ÿßŸÑÿ£ŸàŸÑŸä
      renderPlayers();
      updateWallet();
      
      // ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ© ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©
      const savedFormation = localStorage.getItem('currentFormation');
      if (savedFormation) {
        currentFormation = JSON.parse(savedFormation);
      }
      
      const savedFormationType = localStorage.getItem('currentFormationType');
      if (savedFormationType) {
        currentFormationType = JSON.parse(savedFormationType);
      }
      
      // ÿ™ÿ≠ŸÖŸäŸÑ ŸÑŸàŸÜ ÿßŸÑÿ∑ŸÇŸÖ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏
      const savedColor = localStorage.getItem('kitColor');
      if (savedColor) {
        kitColor = savedColor;
        kitColorInput.value = savedColor;
        kitColorPreview.style.backgroundColor = savedColor;
      }
      
      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸÜÿ¥ÿ∑ÿ©
      updateActiveButtons();
      
      // ÿ•ÿ∂ÿßŸÅÿ© ÿ≤ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (ŸÑŸÑÿ™ÿ∑ŸàŸäÿ± ŸÅŸÇÿ∑)
      const resetBtn = document.createElement('button');
      resetBtn.textContent = 'ÿ≠ÿ∞ŸÅ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™';
      resetBtn.style.position = 'fixed';
      resetBtn.style.top = '10px';
      resetBtn.style.left = '10px';
      resetBtn.style.zIndex = '10000';
      resetBtn.style.padding = '5px 10px';
      resetBtn.style.background = 'red';
      resetBtn.style.color = 'white';
      resetBtn.style.border = 'none';
      resetBtn.style.borderRadius = '5px';
      resetBtn.addEventListener('click', resetGameData);
      document.body.appendChild(resetBtn);
    }

    // ---------- EVENT LISTENERS ----------
    storeButton.addEventListener('click', showStore);
    backToGameFromStoreButton.addEventListener('click', showGame);
    playersButton.addEventListener('click', showPlayersScreen);
    formationButton.addEventListener('click', showFormationScreen);
    matchButton.addEventListener('click', showMatchScreen);
    statsButton.addEventListener('click', showStatsScreen);
    playerGuessButton.addEventListener('click', showPlayerGuessScreen);
    clubGuessButton.addEventListener('click', showClubGuessScreen);
    quizButton.addEventListener('click', showQuizScreen);
    speedChallengeButton.addEventListener('click', showSpeedChallengeScreen);
    backToGameFromPlayersButton.addEventListener('click', showGame);
    backToGameFromFormationButton.addEventListener('click', showGame);
    backToGameFromPlayerGuessButton.addEventListener('click', showGame);
    backToGameFromPlayerResultButton.addEventListener('click', showGame);
    backToGameFromClubGuessButton.addEventListener('click', showGame);
    backToGameFromClubResultButton.addEventListener('click', showGame);
    backToGameFromQuizButton.addEventListener('click', showGame);
    backToGameFromQuizResultButton.addEventListener('click', showGame);
    backToGameFromStatsButton.addEventListener('click', showGame);
    backToGameFromSpeedChallengeButton.addEventListener('click', showGame);
    backToGameFromSpeedResultButton.addEventListener('click', showGame);
    backToMainMenuButton.addEventListener('click', showGame);
    backToMainMenuFromGameButton.addEventListener('click', showGame);
    backToMainMenuFromMatchButton.addEventListener('click', showGame);
    saveFormationButton.addEventListener('click', saveFormation);
    resetFormationButton.addEventListener('click', resetFormation);
    evaluateFormationButton.addEventListener('click', evaluateFormation);
    closeRating.addEventListener('click', () => {
      ratingResult.style.display = 'none';
    });
    
    // ÿ£ÿ≠ÿØÿßÿ´ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    document.querySelectorAll('#defenders-buttons .formation-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        changeFormation('defenders', btn.dataset.count);
      });
    });
    
    document.querySelectorAll('#midfielders-buttons .formation-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        changeFormation('midfielders', btn.dataset.count);
      });
    });
    
    document.querySelectorAll('#attackers-buttons .formation-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        changeFormation('attackers', btn.dataset.count);
      });
    });
    
    // ÿ£ÿ≠ÿØÿßÿ´ ÿ™ÿ≠ÿØŸäÿ´ ÿ™ÿÆÿµŸäÿµ ÿßŸÑÿ™ÿ¥ŸÉŸäŸÑÿ©
    formationNameInput.addEventListener('input', saveFormationCustomization);
    formationImageInput.addEventListener('change', handleFormationImageUpload);
    kitColorInput.addEventListener('input', function() {
      kitColorPreview.style.backgroundColor = this.value;
      saveFormationCustomization();
    });
    
    // ÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©
    startMatchBtn.addEventListener('click', startMatch);
    
    // ÿ£ÿ≠ÿØÿßÿ´ ŸÑÿπÿ®ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÑÿßÿπÿ®
    nextHintBtn.addEventListener('click', addPlayerHint);
    nextRoundBtn.addEventListener('click', playerNextRound);
    
    // ÿ£ÿ≠ÿØÿßÿ´ ŸÑÿπÿ®ÿ© ÿ™ÿÆŸÖŸäŸÜ ÿßŸÑŸÜÿßÿØŸä
    clubNextHintBtn.addEventListener('click', addClubHint);
    clubNextRoundBtn.addEventListener('click', clubNextRound);
    
    // ÿ£ÿ≠ÿØÿßÿ´ ŸÑÿπÿ®ÿ© ÿßŸÑŸÉŸàŸäÿ≤
    nextQuestionBtn.addEventListener('click', nextQuestion);
    nextQuizRoundBtn.addEventListener('click', startNewQuizRound);
    
    // ÿ£ÿ≠ÿØÿßÿ´ ŸÑÿπÿ®ÿ© Speed Challenge
    player1Button.addEventListener('click', () => handlePlayerButtonClick(1));
    player2Button.addEventListener('click', () => handlePlayerButtonClick(2));
    submitAnswerBtn.addEventListener('click', handleSubmitAnswer);
    nextSpeedRoundBtn.addEventListener('click', nextSpeedRound);
    nextRoundSpeedBtn.addEventListener('click', nextSpeedRound);
    
    // ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ≤ÿ± Enter
    answerInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        handleSubmitAnswer();
      }
    });
    
    // ÿ®ÿ≠ÿ´ ÿßŸÑŸÖÿ™ÿ¨ÿ±
    searchInput.addEventListener('input', e => applySearch(e.target.value));

    // ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿ¥ÿ±ÿßÿ° ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ
    document.addEventListener('click', e => {
      if (e.target.classList.contains('buy-button')) {
        const playerId = Number(e.target.dataset.id);
        buyPlayer(playerId);
      }
      
      if (e.target.classList.contains('update-player-btn')) {
        const playerId = Number(e.target.dataset.id);
        const positionSelector = document.querySelector(`.position-selector[data-id="${playerId}"]`);
        const numberInput = document.querySelector(`.number-input[data-id="${playerId}"]`);
        
        const position = positionSelector ? positionSelector.value : null;
        const number = numberInput ? numberInput.value : null;
        
        updatePlayer(playerId, position, number);
      }
    });

    // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
    init();
  </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"e3c1c9af36de41759418005494a48906","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"e3c1c9af36de41759418005494a48906","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"e3c1c9af36de41759418005494a48906","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>
